/*! For license information please see vendors.dcbaee41586dd0276b31.js.LICENSE.txt */
(self.webpackChunkthomas=self.webpackChunkthomas||[]).push([[96],{43960:function(){_.mixin(window.written),_.mixin({trim:function(e){return"string"==typeof e?e.replace(/(^\s+|\s+$)/g,""):e}})},6984:function(){var e;"undefined"!=typeof _&&null!==_&&(e={average:function(e,t){return _.sum(e,t)/_.size(e)},median:function(e){var t,n;return t=(e.length+1)/2,n=_.sortBy(e,_.identity),_.isInteger(t)?n[t-1]:_.sum(n.slice(t-1.5,t+.5))/2},nearest:function(e,t,n){return null==n&&(n=[-1,999]),_.chain(e).map((function(e){return[e,Math.abs(e-t)]})).reduce((function(e,t){return e[1]<t[1]?e:t}),n).first().value()},sum:function(e,t){var n;return null==t&&(t="value"),n=_.isArray(e)&&_.isNumber(e[0])?e:_.pluck(e,t),_.reduce(n,(function(e,t){return e+t}))},factors:function(e){var t;return function(){var n,i,r;for(r=[],t=n=0,i=e;0<=i?n<=i:n>=i;t=0<=i?++n:--n)_.isInteger(e/t)&&r.push(e/t);return r}().reverse()},isInteger:function(e){return _.hasFactor(e,1)},isEven:function(e){return _.hasFactor(e,2)},isOdd:function(e){return!_.isEven(e)},hasFactor:function(e,t){return e%t==0},limit:function(e,t,n){return null==n&&(n=0),t<n?Math.max(Math.min(e,n),t):t>n?Math.min(Math.max(e,n),t):t}},_.mixin(e))},35358:function(e,t,n){var i={"./af":25177,"./af.js":25177,"./ar":61509,"./ar-dz":41488,"./ar-dz.js":41488,"./ar-kw":58676,"./ar-kw.js":58676,"./ar-ly":42353,"./ar-ly.js":42353,"./ar-ma":24496,"./ar-ma.js":24496,"./ar-sa":82682,"./ar-sa.js":82682,"./ar-tn":89756,"./ar-tn.js":89756,"./ar.js":61509,"./az":95533,"./az.js":95533,"./be":28959,"./be.js":28959,"./bg":47777,"./bg.js":47777,"./bm":54903,"./bm.js":54903,"./bn":38909,"./bn.js":38909,"./bo":31545,"./bo.js":31545,"./br":11470,"./br.js":11470,"./bs":44429,"./bs.js":44429,"./ca":7306,"./ca.js":7306,"./cs":56464,"./cs.js":56464,"./cv":73635,"./cv.js":73635,"./cy":64226,"./cy.js":64226,"./da":93601,"./da.js":93601,"./de":77853,"./de-at":26111,"./de-at.js":26111,"./de-ch":54697,"./de-ch.js":54697,"./de.js":77853,"./dv":60708,"./dv.js":60708,"./el":54691,"./el.js":54691,"./en-au":53872,"./en-au.js":53872,"./en-ca":28298,"./en-ca.js":28298,"./en-gb":56195,"./en-gb.js":56195,"./en-ie":66584,"./en-ie.js":66584,"./en-il":65543,"./en-il.js":65543,"./en-nz":79402,"./en-nz.js":79402,"./eo":32934,"./eo.js":32934,"./es":97650,"./es-do":20838,"./es-do.js":20838,"./es-us":56575,"./es-us.js":56575,"./es.js":97650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":90527,"./fi.js":90527,"./fo":52477,"./fo.js":52477,"./fr":85498,"./fr-ca":26435,"./fr-ca.js":26435,"./fr-ch":37892,"./fr-ch.js":37892,"./fr.js":85498,"./fy":37071,"./fy.js":37071,"./gd":70217,"./gd.js":70217,"./gl":77329,"./gl.js":77329,"./gom-latn":93383,"./gom-latn.js":93383,"./gu":95050,"./gu.js":95050,"./he":11713,"./he.js":11713,"./hi":43861,"./hi.js":43861,"./hr":26308,"./hr.js":26308,"./hu":90609,"./hu.js":90609,"./hy-am":17160,"./hy-am.js":17160,"./id":74063,"./id.js":74063,"./is":89374,"./is.js":89374,"./it":88383,"./it.js":88383,"./ja":23827,"./ja.js":23827,"./jv":89722,"./jv.js":89722,"./ka":41794,"./ka.js":41794,"./kk":27088,"./kk.js":27088,"./km":96870,"./km.js":96870,"./kn":84451,"./kn.js":84451,"./ko":63164,"./ko.js":63164,"./ky":78474,"./ky.js":78474,"./lb":79680,"./lb.js":79680,"./lo":15867,"./lo.js":15867,"./lt":45766,"./lt.js":45766,"./lv":69532,"./lv.js":69532,"./me":58076,"./me.js":58076,"./mi":41848,"./mi.js":41848,"./mk":30306,"./mk.js":30306,"./ml":73739,"./ml.js":73739,"./mn":99053,"./mn.js":99053,"./mr":86169,"./mr.js":86169,"./ms":73386,"./ms-my":92297,"./ms-my.js":92297,"./ms.js":73386,"./mt":77075,"./mt.js":77075,"./my":72264,"./my.js":72264,"./nb":22274,"./nb.js":22274,"./ne":8235,"./ne.js":8235,"./nl":92572,"./nl-be":43784,"./nl-be.js":43784,"./nl.js":92572,"./nn":54566,"./nn.js":54566,"./pa-in":29849,"./pa-in.js":29849,"./pl":94418,"./pl.js":94418,"./pt":79834,"./pt-br":48303,"./pt-br.js":48303,"./pt.js":79834,"./ro":24457,"./ro.js":24457,"./ru":82271,"./ru.js":82271,"./sd":1221,"./sd.js":1221,"./se":33478,"./se.js":33478,"./si":17538,"./si.js":17538,"./sk":5784,"./sk.js":5784,"./sl":46637,"./sl.js":46637,"./sq":86794,"./sq.js":86794,"./sr":45719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":45719,"./ss":56e3,"./ss.js":56e3,"./sv":41011,"./sv.js":41011,"./sw":40748,"./sw.js":40748,"./ta":11025,"./ta.js":11025,"./te":11885,"./te.js":11885,"./tet":28861,"./tet.js":28861,"./tg":86571,"./tg.js":86571,"./th":55802,"./th.js":55802,"./tl-ph":29231,"./tl-ph.js":29231,"./tlh":31052,"./tlh.js":31052,"./tr":85096,"./tr.js":85096,"./tzl":79846,"./tzl.js":79846,"./tzm":81765,"./tzm-latn":97711,"./tzm-latn.js":97711,"./tzm.js":81765,"./ug-cn":48414,"./ug-cn.js":48414,"./uk":16618,"./uk.js":16618,"./ur":57777,"./ur.js":57777,"./uz":57609,"./uz-latn":72475,"./uz-latn.js":72475,"./uz.js":57609,"./vi":21135,"./vi.js":21135,"./x-pseudo":64051,"./x-pseudo.js":64051,"./yo":82218,"./yo.js":82218,"./zh-cn":52648,"./zh-cn.js":52648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-tw":50304,"./zh-tw.js":50304};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=35358},46555:function(e){var t={UTILS:{},debug:{isActive:!0},SCORM:{version:null,handleCompletionStatus:!0,handleExitMode:!0,API:{handle:null,isFound:!1},connection:{isActive:!1},data:{completionStatus:null,exitStatus:null},debug:{}}};t.SCORM.isAvailable=function(){return!0},t.SCORM.API.find=function(e){for(var n=null,i=0,r="SCORM.API.find",o=t.UTILS.trace,s=t.SCORM;!e.API&&!e.API_1484_11&&e.parent&&e.parent!=e&&i<=500;)i++,e=e.parent;if(s.version)switch(s.version){case"2004":e.API_1484_11?n=e.API_1484_11:o(r+": SCORM version 2004 was specified by user, but API_1484_11 cannot be found.");break;case"1.2":e.API?n=e.API:o(r+": SCORM version 1.2 was specified by user, but API cannot be found.")}else e.API_1484_11?(s.version="2004",n=e.API_1484_11):e.API&&(s.version="1.2",n=e.API);return n?(o(r+": API found. Version: "+s.version),o("API: "+n)):o(r+": Error finding API. \nFind attempts: "+i+". \nFind attempt limit: 500"),n},t.SCORM.API.get=function(){var e=null,n=window,i=t.SCORM,r=i.API.find,o=t.UTILS.trace;return!(e=r(n))&&n.parent&&n.parent!=n&&(e=r(n.parent)),!e&&n.top&&n.top.opener&&(e=r(n.top.opener)),!e&&n.top&&n.top.opener&&n.top.opener.document&&(e=r(n.top.opener.document)),e?i.API.isFound=!0:o("API.get failed: Can't find the API!"),e},t.SCORM.API.getHandle=function(){var e=t.SCORM.API;return e.handle||e.isFound||(e.handle=e.get()),e.handle},t.SCORM.connection.initialize=function(e){e=e||{};var n=!1,i=t.SCORM,r=i.data.completionStatus,o=t.UTILS.trace,s=t.UTILS.StringToBoolean,a=i.debug,u="SCORM.connection.initialize ";if(e.preventLogoutOnExit&&(i.handleExitMode=!1),o("connection.initialize called."),i.connection.isActive)o(u+"aborted: Connection already active.");else{var c=i.API.getHandle(),l=0;if(c){switch(i.version){case"1.2":n=s(c.LMSInitialize(""));break;case"2004":n=s(c.Initialize(""))}if(n)if(null!==(l=a.getCode())&&0===l){if(i.connection.isActive=!0,i.handleCompletionStatus&&(r=i.status("get"))){switch(r){case"not attempted":case"unknown":i.status("set","incomplete")}i.save()}}else n=!1,o(u+"failed. \nError code: "+l+" \nError info: "+a.getInfo(l));else o(null!==(l=a.getCode())&&0!==l?u+"failed. \nError code: "+l+" \nError info: "+a.getInfo(l):u+"failed: No response from server.")}else o(u+"failed: API is null.")}return n},t.SCORM.connection.terminate=function(){var e=!1,n=t.SCORM,i=n.data.exitStatus,r=n.data.completionStatus,o=t.UTILS.trace,s=t.UTILS.StringToBoolean,a=n.debug,u="SCORM.connection.terminate ";if(n.connection.isActive){var c=n.API.getHandle(),l=0;if(c){if(n.handleExitMode&&!i)if("completed"!==r&&"passed"!==r)switch(n.version){case"1.2":e=n.set("cmi.core.exit","suspend");break;case"2004":e=n.set("cmi.exit","suspend")}else switch(n.version){case"1.2":e=n.set("cmi.core.exit","logout");break;case"2004":e=n.set("cmi.exit","normal")}if(e=n.save()){switch(n.version){case"1.2":e=s(c.LMSFinish(""));break;case"2004":e=s(c.Terminate(""))}e?n.connection.isActive=!1:o(u+"failed. \nError code: "+(l=a.getCode())+" \nError info: "+a.getInfo(l))}}else o(u+"failed: API is null.")}else o(u+"aborted: Connection already terminated.");return e},t.SCORM.data.get=function(e){var n=null,i=t.SCORM,r=t.UTILS.trace,o=i.debug,s="SCORM.data.get('"+e+"') ";if(i.connection.isActive){var a=i.API.getHandle(),u=0;if(a){switch(i.version){case"1.2":n=a.LMSGetValue(e);break;case"2004":n=a.GetValue(e)}if(u=o.getCode(),""!==n||0===u)switch(e){case"cmi.core.lesson_status":case"cmi.completion_status":i.data.completionStatus=n;break;case"cmi.core.exit":case"cmi.exit":i.data.exitStatus=n}else r(s+"failed. \nError code: "+u+"\nError info: "+o.getInfo(u))}else r(s+"failed: API is null.")}else r(s+"failed: API connection is inactive.");return r(s+" value: "+n),String(n)},t.SCORM.data.set=function(e,n){var i=!1,r=t.SCORM,o=t.UTILS.trace,s=t.UTILS.StringToBoolean,a=r.debug,u="SCORM.data.set('"+e+"') ";if(r.connection.isActive){var c=r.API.getHandle(),l=0;if(c){switch(r.version){case"1.2":i=s(c.LMSSetValue(e,n));break;case"2004":i=s(c.SetValue(e,n))}i?"cmi.core.lesson_status"!==e&&"cmi.completion_status"!==e||(r.data.completionStatus=n):o(u+"failed. \nError code: "+(l=a.getCode())+". \nError info: "+a.getInfo(l))}else o(u+"failed: API is null.")}else o(u+"failed: API connection is inactive.");return o(u+" value: "+n),i},t.SCORM.data.save=function(){var e=!1,n=t.SCORM,i=t.UTILS.trace,r=t.UTILS.StringToBoolean,o="SCORM.data.save failed";if(n.connection.isActive){var s=n.API.getHandle();if(s)switch(n.version){case"1.2":e=r(s.LMSCommit(""));break;case"2004":e=r(s.Commit(""))}else i(o+": API is null.")}else i(o+": API connection is inactive.");return e},t.SCORM.status=function(e,n){var i=!1,r=t.SCORM,o=t.UTILS.trace,s="SCORM.getStatus failed",a="";if(null!==e){switch(r.version){case"1.2":a="cmi.core.lesson_status";break;case"2004":a="cmi.completion_status"}switch(e){case"get":i=r.data.get(a);break;case"set":null!==n?i=r.data.set(a,n):(i=!1,o(s+": status was not specified."));break;default:i=!1,o(s+": no valid action was specified.")}}else o(s+": action was not specified.");return i},t.SCORM.debug.getCode=function(){var e=t.SCORM,n=e.API.getHandle(),i=t.UTILS.trace,r=0;if(n)switch(e.version){case"1.2":r=parseInt(n.LMSGetLastError(),10);break;case"2004":r=parseInt(n.GetLastError(),10)}else i("SCORM.debug.getCode failed: API is null.");return r},t.SCORM.debug.getInfo=function(e){var n=t.SCORM,i=n.API.getHandle(),r=t.UTILS.trace,o="";if(i)switch(n.version){case"1.2":o=i.LMSGetErrorString(e.toString());break;case"2004":o=i.GetErrorString(e.toString())}else r("SCORM.debug.getInfo failed: API is null.");return String(o)},t.SCORM.debug.getDiagnosticInfo=function(e){var n=t.SCORM,i=n.API.getHandle(),r=t.UTILS.trace,o="";if(i)switch(n.version){case"1.2":o=i.LMSGetDiagnostic(e);break;case"2004":o=i.GetDiagnostic(e)}else r("SCORM.debug.getDiagnosticInfo failed: API is null.");return String(o)},t.SCORM.init=t.SCORM.connection.initialize,t.SCORM.get=t.SCORM.data.get,t.SCORM.set=t.SCORM.data.set,t.SCORM.save=t.SCORM.data.save,t.SCORM.quit=t.SCORM.connection.terminate,t.UTILS.StringToBoolean=function(e){switch(typeof e){case"object":case"string":return/(true|1)/i.test(e);case"number":return!!e;case"boolean":return e;case"undefined":return null;default:return!1}},t.UTILS.trace=function(e){t.debug.isActive&&window.console&&window.console.log&&window.console.log(e)},e.exports=t},31806:function(){!function(e){if(void 0===e.FULLTILT||null===e.FULLTILT){var t,n,i,r,o,s,a,u,c,l,d=Math.PI,h=d/2,p=2*d,f=d/180,g=180/d,m={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},q=!(!e.screen||!e.screen.orientation||void 0===e.screen.orientation.angle||null===e.screen.orientation.angle),v=(q?e.screen.orientation.angle:e.orientation||0)*f,y=h,b=d,_=p/3,S=-h,w={version:"0.5.3",getDeviceOrientation:function(e){return new Promise((function(t,n){var i=new w.DeviceOrientation(e);i.start(),new E(m.orientation).then((function(){i._alphaAvailable=m.orientation.data.alpha&&null!==m.orientation.data.alpha,i._betaAvailable=m.orientation.data.beta&&null!==m.orientation.data.beta,i._gammaAvailable=m.orientation.data.gamma&&null!==m.orientation.data.gamma,t(i)})).catch((function(){i.stop(),n("DeviceOrientation is not supported")}))}))},getDeviceMotion:function(e){return new Promise((function(t,n){var i=new w.DeviceMotion(e);i.start(),new E(m.motion).then((function(){i._accelerationXAvailable=m.motion.data.acceleration&&m.motion.data.acceleration.x,i._accelerationYAvailable=m.motion.data.acceleration&&m.motion.data.acceleration.y,i._accelerationZAvailable=m.motion.data.acceleration&&m.motion.data.acceleration.z,i._accelerationIncludingGravityXAvailable=m.motion.data.accelerationIncludingGravity&&m.motion.data.accelerationIncludingGravity.x,i._accelerationIncludingGravityYAvailable=m.motion.data.accelerationIncludingGravity&&m.motion.data.accelerationIncludingGravity.y,i._accelerationIncludingGravityZAvailable=m.motion.data.accelerationIncludingGravity&&m.motion.data.accelerationIncludingGravity.z,i._rotationRateAlphaAvailable=m.motion.data.rotationRate&&m.motion.data.rotationRate.alpha,i._rotationRateBetaAvailable=m.motion.data.rotationRate&&m.motion.data.rotationRate.beta,i._rotationRateGammaAvailable=m.motion.data.rotationRate&&m.motion.data.rotationRate.gamma,t(i)})).catch((function(){i.stop(),n("DeviceMotion is not supported")}))}))},Quaternion:function(e,t,n,i){var r,o,s,a,u,c,l,d,h,p,g,m,q,v;this.set=function(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||1},this.copy=function(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w},this.setFromEuler=function(e){return a=((e=e||{}).alpha||0)*f,o=(e.beta||0)*f,s=(e.gamma||0)*f,l=a/2,u=o/2,c=s/2,d=Math.cos(u),h=Math.cos(c),p=Math.cos(l),g=Math.sin(u),m=Math.sin(c),q=Math.sin(l),this.set(g*h*p-d*m*q,d*m*p+g*h*q,d*h*q+g*m*p,d*h*p-g*m*q),this.normalize(),this},this.setFromRotationMatrix=function(e){return v=e.elements,this.set(.5*Math.sqrt(1+v[0]-v[4]-v[8])*x(v[7]-v[5]),.5*Math.sqrt(1-v[0]+v[4]-v[8])*x(v[2]-v[6]),.5*Math.sqrt(1-v[0]-v[4]+v[8])*x(v[3]-v[1]),.5*Math.sqrt(1+v[0]+v[4]+v[8])),this},this.multiply=function(e){return r=w.Quaternion.prototype.multiplyQuaternions(this,e),this.copy(r),this},this.rotateX=function(e){return r=w.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],e),this.copy(r),this},this.rotateY=function(e){return r=w.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],e),this.copy(r),this},this.rotateZ=function(e){return r=w.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],e),this.copy(r),this},this.normalize=function(){return w.Quaternion.prototype.normalize(this)},this.set(e,t,n,i)}};w.Quaternion.prototype={constructor:w.Quaternion,multiplyQuaternions:(o=new w.Quaternion,function(e,t){var n=e.x,i=e.y,r=e.z,s=e.w,a=t.x,u=t.y,c=t.z,l=t.w;return o.set(n*l+s*a+i*c-r*u,i*l+s*u+r*a-n*c,r*l+s*c+n*u-i*a,s*l-n*a-i*u-r*c),o}),normalize:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);return 0===t?(e.x=0,e.y=0,e.z=0,e.w=1):(t=1/t,e.x*=t,e.y*=t,e.z*=t,e.w*=t),e},rotateByAxisAngle:(i=new w.Quaternion,r=new w.Quaternion,function(e,o,s){return t=(s||0)/2,n=Math.sin(t),r.set((o[0]||0)*n,(o[1]||0)*n,(o[2]||0)*n,Math.cos(t)),i=w.Quaternion.prototype.multiplyQuaternions(e,r),w.Quaternion.prototype.normalize(i)})},w.RotationMatrix=function(e,t,n,i,r,o,s,a,u){var c,l,d,h,p,g,m,q,v,y,b,_,S,x;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},this.set=function(e,t,n,i,r,o,s,a,u){this.elements[0]=e||1,this.elements[1]=t||0,this.elements[2]=n||0,this.elements[3]=i||0,this.elements[4]=r||1,this.elements[5]=o||0,this.elements[6]=s||0,this.elements[7]=a||0,this.elements[8]=u||1},this.copy=function(e){this.elements[0]=e.elements[0],this.elements[1]=e.elements[1],this.elements[2]=e.elements[2],this.elements[3]=e.elements[3],this.elements[4]=e.elements[4],this.elements[5]=e.elements[5],this.elements[6]=e.elements[6],this.elements[7]=e.elements[7],this.elements[8]=e.elements[8]},this.setFromEuler=function(e){return h=((e=e||{}).alpha||0)*f,l=(e.beta||0)*f,d=(e.gamma||0)*f,p=Math.cos(l),g=Math.cos(d),m=Math.cos(h),q=Math.sin(l),v=Math.sin(d),y=Math.sin(h),this.set(m*g-y*q*v,-p*y,g*y*q+m*v,g*y+m*q*v,m*p,y*v-m*g*q,-p*v,q,p*g),this.normalize(),this},this.setFromQuaternion=function(e){return b=e.w*e.w,_=e.x*e.x,S=e.y*e.y,x=e.z*e.z,this.set(b+_-S-x,2*(e.x*e.y-e.w*e.z),2*(e.x*e.z+e.w*e.y),2*(e.x*e.y+e.w*e.z),b-_+S-x,2*(e.y*e.z-e.w*e.x),2*(e.x*e.z-e.w*e.y),2*(e.y*e.z+e.w*e.x),b-_-S+x),this},this.multiply=function(e){return c=w.RotationMatrix.prototype.multiplyMatrices(this,e),this.copy(c),this},this.rotateX=function(e){return c=w.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],e),this.copy(c),this},this.rotateY=function(e){return c=w.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],e),this.copy(c),this},this.rotateZ=function(e){return c=w.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],e),this.copy(c),this},this.normalize=function(){return w.RotationMatrix.prototype.normalize(this)},this.set(e,t,n,i,r,o,s,a,u)},w.RotationMatrix.prototype={constructor:w.RotationMatrix,multiplyMatrices:(u=new w.RotationMatrix,function(e,t){return s=e.elements,a=t.elements,u.set(s[0]*a[0]+s[1]*a[3]+s[2]*a[6],s[0]*a[1]+s[1]*a[4]+s[2]*a[7],s[0]*a[2]+s[1]*a[5]+s[2]*a[8],s[3]*a[0]+s[4]*a[3]+s[5]*a[6],s[3]*a[1]+s[4]*a[4]+s[5]*a[7],s[3]*a[2]+s[4]*a[5]+s[5]*a[8],s[6]*a[0]+s[7]*a[3]+s[8]*a[6],s[6]*a[1]+s[7]*a[4]+s[8]*a[7],s[6]*a[2]+s[7]*a[5]+s[8]*a[8]),u}),normalize:function(e){var t=e.elements,n=t[0]*t[4]*t[8]-t[0]*t[5]*t[7]-t[1]*t[3]*t[8]+t[1]*t[5]*t[6]+t[2]*t[3]*t[7]-t[2]*t[4]*t[6];return t[0]/=n,t[1]/=n,t[2]/=n,t[3]/=n,t[4]/=n,t[5]/=n,t[6]/=n,t[7]/=n,t[8]/=n,e.elements=t,e},rotateByAxisAngle:function(){var e,t,n=new w.RotationMatrix,i=new w.RotationMatrix,r=!1;return function(o,s,a){return i.identity(),r=!1,e=Math.sin(a),t=Math.cos(a),1===s[0]&&0===s[1]&&0===s[2]?(r=!0,i.elements[4]=t,i.elements[5]=-e,i.elements[7]=e,i.elements[8]=t):1===s[1]&&0===s[0]&&0===s[2]?(r=!0,i.elements[0]=t,i.elements[2]=e,i.elements[6]=-e,i.elements[8]=t):1===s[2]&&0===s[0]&&0===s[1]&&(r=!0,i.elements[0]=t,i.elements[1]=-e,i.elements[3]=e,i.elements[4]=t),r?(n=w.RotationMatrix.prototype.multiplyMatrices(o,i),n=w.RotationMatrix.prototype.normalize(n)):n=o,n}}()},w.Euler=function(e,t,n){var i,r,o,s;this.set=function(e,t,n){this.alpha=e||0,this.beta=t||0,this.gamma=n||0},this.copy=function(e){this.alpha=e.alpha,this.beta=e.beta,this.gamma=e.gamma},this.setFromRotationMatrix=function(e){(i=e.elements)[8]>0?(r=Math.atan2(-i[1],i[4]),o=Math.asin(i[7]),s=Math.atan2(-i[6],i[8])):i[8]<0?(r=Math.atan2(i[1],-i[4]),o=-Math.asin(i[7]),o+=o>=0?-d:d,s=Math.atan2(i[6],-i[8])):i[6]>0?(r=Math.atan2(-i[1],i[4]),o=Math.asin(i[7]),s=-h):i[6]<0?(r=Math.atan2(i[1],-i[4]),o=-Math.asin(i[7]),o+=o>=0?-d:d,s=-h):(r=Math.atan2(i[3],i[0]),o=i[7]>0?h:-h,s=0),r<0&&(r+=p),r*=g,o*=g,s*=g,this.set(r,o,s)},this.setFromQuaternion=function(){var e,t,n;return function(i){var r=i.w*i.w,o=i.x*i.x,s=i.y*i.y,a=i.z*i.z,u=r+o+s+a,c=i.w*i.x+i.y*i.z;if(c>.499999*u)e=2*Math.atan2(i.y,i.w),t=h,n=0;else if(c<-.499999*u)e=-2*Math.atan2(i.y,i.w),t=-h,n=0;else{var l=r-o+s-a,f=2*(i.w*i.z-i.x*i.y),m=r-o-s+a,q=2*(i.w*i.y-i.x*i.z);m>0?(e=Math.atan2(f,l),t=Math.asin(2*c/u),n=Math.atan2(q,m)):(e=Math.atan2(-f,-l),t=-Math.asin(2*c/u),t+=t<0?d:-d,n=Math.atan2(-q,-m))}e<0&&(e+=p),e*=g,t*=g,n*=g,this.set(e,t,n)}}(),this.rotateX=function(e){return w.Euler.prototype.rotateByAxisAngle(this,[1,0,0],e),this},this.rotateY=function(e){return w.Euler.prototype.rotateByAxisAngle(this,[0,1,0],e),this},this.rotateZ=function(e){return w.Euler.prototype.rotateByAxisAngle(this,[0,0,1],e),this},this.set(e,t,n)},w.Euler.prototype={constructor:w.Euler,rotateByAxisAngle:(c=new w.RotationMatrix,function(e,t,n){return c.setFromEuler(e),c=w.RotationMatrix.prototype.rotateByAxisAngle(c,t,n),e.setFromRotationMatrix(c),e})},w.DeviceOrientation=function(t){this.options=t||{};var n=0,i=0;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,"game"===this.options.type){var r=function(t){(null!==t.alpha&&(this.alphaOffsetDevice=new w.Euler(t.alpha,0,0),this.alphaOffsetDevice.rotateZ(-v),++i>=10)||++n>=200)&&e.removeEventListener("deviceorientation",r,!1)}.bind(this);e.addEventListener("deviceorientation",r,!1)}else if("world"===this.options.type){var o=function(t){(!0!==t.absolute&&void 0!==t.webkitCompassAccuracy&&null!==t.webkitCompassAccuracy&&+t.webkitCompassAccuracy>=0&&+t.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new w.Euler(t.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(v),this.alphaOffsetScreen=v,++i>=10)||++n>=200)&&e.removeEventListener("deviceorientation",o,!1)}.bind(this);e.addEventListener("deviceorientation",o,!1)}},w.DeviceOrientation.prototype={constructor:w.DeviceOrientation,start:function(t){t&&"[object Function]"==Object.prototype.toString.call(t)&&m.orientation.callbacks.push(t),q?e.screen.orientation.addEventListener("change",P,!1):e.addEventListener("orientationchange",P,!1),m.orientation.active||(e.addEventListener("deviceorientation",A,!1),m.orientation.active=!0)},stop:function(){m.orientation.active&&(e.removeEventListener("deviceorientation",A,!1),m.orientation.active=!1)},listen:function(e){this.start(e)},getFixedFrameQuaternion:function(){var e=new w.Euler,t=new w.RotationMatrix,n=new w.Quaternion;return function(){var i=m.orientation.data||{alpha:0,beta:0,gamma:0},r=i.alpha;return this.alphaOffsetDevice&&(t.setFromEuler(this.alphaOffsetDevice),t.rotateZ(-this.alphaOffsetScreen),e.setFromRotationMatrix(t),e.alpha<0&&(e.alpha+=360),e.alpha%=360,r-=e.alpha),e.set(r,i.beta,i.gamma),n.setFromEuler(e),n}}(),getScreenAdjustedQuaternion:function(){return(l=this.getFixedFrameQuaternion()).rotateZ(-v),l},getFixedFrameMatrix:function(){var e=new w.Euler,t=new w.RotationMatrix;return function(){var n=m.orientation.data||{alpha:0,beta:0,gamma:0},i=n.alpha;return this.alphaOffsetDevice&&(t.setFromEuler(this.alphaOffsetDevice),t.rotateZ(-this.alphaOffsetScreen),e.setFromRotationMatrix(t),e.alpha<0&&(e.alpha+=360),e.alpha%=360,i-=e.alpha),e.set(i,n.beta,n.gamma),t.setFromEuler(e),t}}(),getScreenAdjustedMatrix:function(){var e;return function(){return(e=this.getFixedFrameMatrix()).rotateZ(-v),e}}(),getFixedFrameEuler:function(){var e,t=new w.Euler;return function(){return e=this.getFixedFrameMatrix(),t.setFromRotationMatrix(e),t}}(),getScreenAdjustedEuler:function(){var e,t=new w.Euler;return function(){return e=this.getScreenAdjustedMatrix(),t.setFromRotationMatrix(e),t}}(),isAbsolute:function(){return!(!m.orientation.data||!0!==m.orientation.data.absolute)},getLastRawEventData:function(){return m.orientation.data||{}},_alphaAvailable:!1,_betaAvailable:!1,_gammaAvailable:!1,isAvailable:function(e){switch(e){case this.ALPHA:return this._alphaAvailable;case this.BETA:return this._betaAvailable;case this.GAMMA:return this._gammaAvailable}},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},w.DeviceMotion=function(e){this.options=e||{}},w.DeviceMotion.prototype={constructor:w.DeviceMotion,start:function(t){t&&"[object Function]"==Object.prototype.toString.call(t)&&m.motion.callbacks.push(t),q?e.screen.orientation.addEventListener("change",P,!1):e.addEventListener("orientationchange",P,!1),m.motion.active||(e.addEventListener("devicemotion",T,!1),m.motion.active=!0)},stop:function(){m.motion.active&&(e.removeEventListener("devicemotion",T,!1),m.motion.active=!1)},listen:function(e){this.start(e)},getScreenAdjustedAcceleration:function(){var e=m.motion.data&&m.motion.data.acceleration?m.motion.data.acceleration:{x:0,y:0,z:0},t={};switch(v){case y:t.x=-e.y,t.y=e.x;break;case b:t.x=-e.x,t.y=-e.y;break;case _:case S:t.x=e.y,t.y=-e.x;break;default:t.x=e.x,t.y=e.y}return t.z=e.z,t},getScreenAdjustedAccelerationIncludingGravity:function(){var e=m.motion.data&&m.motion.data.accelerationIncludingGravity?m.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},t={};switch(v){case y:t.x=-e.y,t.y=e.x;break;case b:t.x=-e.x,t.y=-e.y;break;case _:case S:t.x=e.y,t.y=-e.x;break;default:t.x=e.x,t.y=e.y}return t.z=e.z,t},getScreenAdjustedRotationRate:function(){var e=m.motion.data&&m.motion.data.rotationRate?m.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},t={};switch(v){case y:t.beta=-e.gamma,t.gamma=e.beta;break;case b:t.beta=-e.beta,t.gamma=-e.gamma;break;case _:case S:t.beta=e.gamma,t.gamma=-e.beta;break;default:t.beta=e.beta,t.gamma=e.gamma}return t.alpha=e.alpha,t},getLastRawEventData:function(){return m.motion.data||{}},_accelerationXAvailable:!1,_accelerationYAvailable:!1,_accelerationZAvailable:!1,_accelerationIncludingGravityXAvailable:!1,_accelerationIncludingGravityYAvailable:!1,_accelerationIncludingGravityZAvailable:!1,_rotationRateAlphaAvailable:!1,_rotationRateBetaAvailable:!1,_rotationRateGammaAvailable:!1,isAvailable:function(e){switch(e){case this.ACCELERATION_X:return this._accelerationXAvailable;case this.ACCELERATION_Y:return this._accelerationYAvailable;case this.ACCELERATION_Z:return this._accelerationZAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_X:return this._accelerationIncludingGravityXAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Y:return this._accelerationIncludingGravityYAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Z:return this._accelerationIncludingGravityZAvailable;case this.ROTATION_RATE_ALPHA:return this._rotationRateAlphaAvailable;case this.ROTATION_RATE_BETA:return this._rotationRateBetaAvailable;case this.ROTATION_RATE_GAMMA:return this._rotationRateGammaAvailable}},ACCELERATION_X:"accelerationX",ACCELERATION_Y:"accelerationY",ACCELERATION_Z:"accelerationZ",ACCELERATION_INCLUDING_GRAVITY_X:"accelerationIncludingGravityX",ACCELERATION_INCLUDING_GRAVITY_Y:"accelerationIncludingGravityY",ACCELERATION_INCLUDING_GRAVITY_Z:"accelerationIncludingGravityZ",ROTATION_RATE_ALPHA:"rotationRateAlpha",ROTATION_RATE_BETA:"rotationRateBeta",ROTATION_RATE_GAMMA:"rotationRateGamma"},e.FULLTILT=w}function x(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1}function E(e){return new Promise((function(t,n){var i=function(r){setTimeout((function(){e&&e.data?t():r>=20?n():i(++r)}),50)};i(0)}))}function P(){v=q?(e.screen.orientation.angle||0)*f:(e.orientation||0)*f}function A(e){for(var t in m.orientation.data=e,m.orientation.callbacks)m.orientation.callbacks[t].call(this)}function T(e){for(var t in m.motion.data=e,m.motion.callbacks)m.motion.callbacks[t].call(this)}}(window)},44394:function(e,t,n){window._=n(74125),window.iostap=n(14382),n(29074),window.Backbone=n(21391),window.written=n(33419),window.Big=n(69900),window.marked=n(30133),window.PhotoSwipe=n(75388),window.PhotoSwipeUI_Default=n(57855),window.sha1=n(88218),n(31806),window.GyroNorm=n(78451),window.moment=n(95093),window.IScroll=n(5508),window.eventjs=n(41951),window.Polyglot=n(63275),n(95008),window.qq=n(5970),window.pipwerks=n(46555),window.typogr=n(95383),n(43960),n(6984),window.wordfind=n(92659).wordfind},5508:function(e){!function(t,n,i){var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},o=function(){var e={},r=n.createElement("div").style,o=function(){for(var e=["t","webkitT","MozT","msT","OT"],t=0,n=e.length;t<n;t++)if(e[t]+"ransform"in r)return e[t].substr(0,e[t].length-1);return!1}();function s(e){return!1!==o&&(""===o?e:o+e.charAt(0).toUpperCase()+e.substr(1))}e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(e,t){for(var n in t)e[n]=t[n]},e.addEvent=function(e,t,n,i){e.addEventListener(t,n,!!i)},e.removeEvent=function(e,t,n,i){e.removeEventListener(t,n,!!i)},e.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},e.momentum=function(e,t,n,r,o,s){var a,u,c=e-t,l=i.abs(c)/n;return u=l/(s=void 0===s?6e-4:s),(a=e+l*l/(2*s)*(c<0?-1:1))<r?(a=o?r-o/2.5*(l/8):r,u=(c=i.abs(a-e))/l):a>0&&(a=o?o/2.5*(l/8):0,u=(c=i.abs(e)+a)/l),{destination:i.round(a),duration:u}};var a=s("transform");return e.extend(e,{hasTransform:!1!==a,hasPerspective:s("perspective")in r,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:s("transition")in r}),e.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),e.extend(e.style={},{transform:a,transitionTimingFunction:s("transitionTimingFunction"),transitionDuration:s("transitionDuration"),transitionDelay:s("transitionDelay"),transformOrigin:s("transformOrigin")}),e.hasClass=function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},e.addClass=function(t,n){if(!e.hasClass(t,n)){var i=t.className.split(" ");i.push(n),t.className=i.join(" ")}},e.removeClass=function(t,n){if(e.hasClass(t,n)){var i=new RegExp("(^|\\s)"+n+"(\\s|$)","g");t.className=t.className.replace(i," ")}},e.offset=function(e){for(var t=-e.offsetLeft,n=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},e.preventDefaultException=function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return i.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){return(e-=1)*e*(5*e+4)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){return 0===e?0:1==e?1:.4*i.pow(2,-10*e)*i.sin((e-.055)*(2*i.PI)/.22)+1}}}),e.tap=function(e,t){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)},e.click=function(e){var t,i=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||((t=n.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e.view,1,i.screenX,i.screenY,i.clientX,i.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),t._constructed=!0,i.dispatchEvent(t))},e}();function s(e,t){for(var i in this.wrapper="string"==typeof e?n.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0},t)this.options[i]=t[i];this.translateZ=this.options.HWCompositing&&o.hasPerspective?" translateZ(0)":"",this.options.useTransition=o.hasTransition&&this.options.useTransition,this.options.useTransform=o.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?o.ease[this.options.bounceEasing]||o.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function a(e,t,i){var r=n.createElement("div"),o=n.createElement("div");return!0===i&&(r.style.cssText="position:absolute;z-index:9999",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),o.className="iScrollIndicator","h"==e?(!0===i&&(r.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",o.style.height="100%"),r.className="iScrollHorizontalScrollbar"):(!0===i&&(r.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",o.style.width="100%"),r.className="iScrollVerticalScrollbar"),r.style.cssText+=";overflow:hidden",t||(r.style.pointerEvents="none"),r.appendChild(o),r}function u(e,i){for(var r in this.wrapper="string"==typeof i.el?n.querySelector(i.el):i.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0},i)this.options[r]=i[r];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(o.addEvent(this.indicator,"touchstart",this),o.addEvent(t,"touchend",this)),this.options.disablePointer||(o.addEvent(this.indicator,o.prefixPointerEvent("pointerdown"),this),o.addEvent(t,o.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(o.addEvent(this.indicator,"mousedown",this),o.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[o.style.transform]=this.scroller.translateZ,this.wrapperStyle[o.style.transitionDuration]=o.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}s.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if((1==o.eventType[e.type]||0===e.button)&&this.enabled&&(!this.initiated||o.eventType[e.type]===this.initiated)){!this.options.preventDefault||o.isBadAndroid||o.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,n=e.touches?e.touches[0]:e;this.initiated=o.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=o.getTime(),this.options.useTransition&&this.isInTransition?(this.options.snap||(this.isInTransition=!1,t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y))),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.options.snap||(this.isAnimating=!1),this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&o.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,n,r,s,a=e.touches?e.touches[0]:e,u=a.pageX-this.pointX,c=a.pageY-this.pointY,l=o.getTime();if(this.pointX=a.pageX,this.pointY=a.pageY,this.distX+=u,this.distY+=c,r=i.abs(this.distX),s=i.abs(this.distY),!(l-this.endTime>300&&r<10&&s<10)){if(this.directionLocked||this.options.freeScroll||(r>s+this.options.directionLockThreshold?this.directionLocked="h":s>=r+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);u=0}u=this.hasHorizontalScroll?u:0,c=this.hasVerticalScroll?c:0,t=this.x+u,n=this.y+c,(t>this.minScrollX||t<this.maxScrollX)&&(t=this.options.bounce?this.x+u/3:t>this.minScrollX?this.minScrollX:this.maxScrollX),(n>this.minScrollY||n<this.maxScrollY)&&(n=this.options.bounce?this.y+c/3:n>this.minScrollY?this.minScrollY:this.maxScrollY),this.directionX=u>0?-1:u<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,n),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&o.eventType[e.type]===this.initiated){this.options.preventDefault&&!o.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault(),e.changedTouches&&e.changedTouches[0];var t,n,r=o.getTime()-this.startTime,s=i.round(this.x),a=i.round(this.y),u=i.abs(s-this.startX),c=i.abs(a-this.startY),l=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=o.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,a),!this.moved)return this.options.tap&&o.tap(e,this.options.tap),void(this.options.click&&o.click(e));if(this._events.flick&&r<200&&u<100&&c<100)this._execEvent("flick");else{if(this.options.momentum&&r<300&&(t=this.hasHorizontalScroll?o.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},n=this.hasVerticalScroll?o.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},s=t.destination,a=n.destination,l=i.max(t.duration,n.duration),this.isInTransition=1),this.options.snap){var h=this._nearestSnap(s,a);this.currentPage=h,l=this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-h.x),1e3),i.min(i.abs(a-h.y),1e3)),300),s=h.x,a=h.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}if(s!=this.x||a!=this.y)return(s>this.minScrollX||s<this.maxScrollX||a>this.minScrollY||a<this.maxScrollY)&&(d=o.ease.quadratic),void this.scrollTo(s,a,l,d);this._execEvent("scrollEnd")}}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){e.refresh()}),this.options.resizePolling)},resetPosition:function(e){var t=this.x,n=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>this.minScrollX?t=this.minScrollX:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>this.minScrollY?n=this.minScrollY:this.y<this.maxScrollY&&(n=this.maxScrollY),(t!=this.x||n!=this.y)&&(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight,this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.minScrollX=0,this.minScrollY=0,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=o.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var n=this._events[e].indexOf(t);n>-1&&this._events[e].splice(n,1)}},_execEvent:function(e){if(this._events[e]){var t=0,n=this._events[e].length;if(n)for(;t<n;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,n,i){e=this.x+e,t=this.y+t,n=n||0,this.scrollTo(e,t,n,i)},scrollTo:function(e,t,n,i){i=i||o.ease.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&i.style?(this._transitionTimingFunction(i.style),this._transitionTime(n),this._translate(e,t)):this._animate(e,t,n,i.fn)},scrollToElement:function(e,t,n,r,s){if(e=e.nodeType?e:this.scroller.querySelector(e)){var a=o.offset(e);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top,!0===n&&(n=i.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===r&&(r=i.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),a.left-=n||0,a.top-=r||0,a.left=a.left>this.minScrollX?this.minScrollX:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>this.minScrollY?this.minScrollY:a.top<this.maxScrollY?this.maxScrollY:a.top,t=null==t||"auto"===t?i.max(i.abs(this.x-a.left),i.abs(this.y-a.top)):t,this.scrollTo(a.left,a.top,t,s)}},_transitionTime:function(e){if(e=e||0,this.scrollerStyle[o.style.transitionDuration]=e+"ms",!e&&o.isBadAndroid&&(this.scrollerStyle[o.style.transitionDuration]="0.001s"),this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[o.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[o.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=i.round(e),t=i.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(e){var n=e?o.removeEvent:o.addEvent,i=this.options.bindToWrapper?this.wrapper:t;n(t,"orientationchange",this),n(t,"resize",this),this.options.click&&n(this.wrapper,"click",this,!0),this.options.disableMouse||(n(this.wrapper,"mousedown",this),n(i,"mousemove",this),n(i,"mousecancel",this),n(i,"mouseup",this)),o.hasPointer&&!this.options.disablePointer&&(n(this.wrapper,o.prefixPointerEvent("pointerdown"),this),n(i,o.prefixPointerEvent("pointermove"),this),n(i,o.prefixPointerEvent("pointercancel"),this),n(i,o.prefixPointerEvent("pointerup"),this)),o.hasTouch&&!this.options.disableTouch&&(n(this.wrapper,"touchstart",this),n(i,"touchmove",this),n(i,"touchcancel",this),n(i,"touchend",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,n,i=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(e=+((i=i[o.style.transform].split(")")[0].split(", "))[12]||i[4]),n=+(i[13]||i[5])):(e=+i.left.replace(/[^-\d.]/g,""),n=+i.top.replace(/[^-\d.]/g,"")),{x:e,y:n}},_initIndicators:function(){var e,t=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,i=[],r=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:a("v",t,this.options.scrollbars),interactive:t,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),i.push(e)),this.options.scrollX&&(e={el:a("h",t,this.options.scrollbars),interactive:t,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),i.push(e))),this.options.indicators&&(i=i.concat(this.options.indicators));for(var o=i.length;o--;)this.indicators.push(new u(this,i[o]));function s(e){if(r.indicators)for(var t=r.indicators.length;t--;)e.call(r.indicators[t])}this.options.fadeScrollbars&&(this.on("scrollEnd",(function(){s((function(){this.fade()}))})),this.on("scrollCancel",(function(){s((function(){this.fade()}))})),this.on("scrollStart",(function(){s((function(){this.fade(1)}))})),this.on("beforeScrollStart",(function(){s((function(){this.fade(1,!0)}))}))),this.on("refresh",(function(){s((function(){this.refresh()}))})),this.on("destroy",(function(){s((function(){this.destroy()})),delete this.indicators}))},_initWheel:function(){o.addEvent(this.wrapper,"wheel",this),o.addEvent(this.wrapper,"mousewheel",this),o.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",(function(){o.removeEvent(this.wrapper,"wheel",this),o.removeEvent(this.wrapper,"mousewheel",this),o.removeEvent(this.wrapper,"DOMMouseScroll",this)}))},_wheel:function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var t,n,r,o,s=this;if(void 0===this.wheelTimeout&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout((function(){s._execEvent("scrollEnd"),s.wheelTimeout=void 0}),400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,n=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,n=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,n=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=n=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=n=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=n,n=0),this.options.snap)return r=this.currentPage.pageX,o=this.currentPage.pageY,t>0?r--:t<0&&r++,n>0?o--:n<0&&o++,void this.goToPage(r,o);r=this.x+i.round(this.hasHorizontalScroll?t:0),o=this.y+i.round(this.hasVerticalScroll?n:0),r>this.minScrollX?r=this.minScrollX:r<this.maxScrollX&&(r=this.maxScrollX),o>this.minScrollY?o=this.minScrollY:o<this.maxScrollY&&(o=this.maxScrollY),this.scrollTo(r,o,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",(function(){var e,t,n,r,o,s,a=0,u=0,c=0,l=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(n=i.round(l/2),r=i.round(d/2);c>-this.scrollerWidth;){for(this.pages[a]=[],e=0,o=0;o>-this.scrollerHeight;)this.pages[a][e]={x:i.max(c,this.maxScrollX),y:i.max(o,this.maxScrollY),width:l,height:d,cx:c-n,cy:o-r},o-=d,e++;c-=l,a++}else for(e=(s=this.options.snap).length,t=-1;a<e;a++)(0===a||s[a].offsetLeft<=s[a-1].offsetLeft)&&(u=0,t++),this.pages[u]||(this.pages[u]=[]),c=i.max(-s[a].offsetLeft,this.maxScrollX),o=i.max(-s[a].offsetTop,this.maxScrollY),n=c-i.round(s[a].offsetWidth/2),r=o-i.round(s[a].offsetHeight/2),this.pages[u][t]={x:c,y:o,width:s[a].offsetWidth,height:s[a].offsetHeight,cx:n,cy:r},c>this.maxScrollX&&u++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})),this.on("flick",(function(){var e=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300),t=i.abs(this.minScrollX/this.wrapperWidth),n=i.abs(this.minScrollY/this.wrapperHeight),r=i.abs(this.maxScrollX/this.wrapperWidth),o=i.abs(this.maxScrollY/this.wrapperHeight);this.goToPage(i.max(i.min(this.currentPage.pageX+this.directionX,r),t),i.max(i.min(this.currentPage.pageY+this.directionY,o),n),e)}))},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,r=this.pages.length,o=0;if(i.abs(e-this.absStartX)<this.snapThresholdX&&i.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>this.minScrollX?e=this.minScrollX:e<this.maxScrollX&&(e=this.maxScrollX),t>this.minScrollY?t=this.minScrollY:t<this.maxScrollY&&(t=this.maxScrollY);n<r;n++)if(e>=this.pages[n][0].cx){e=this.pages[n][0].x;break}for(r=this.pages[n].length;o<r;o++)if(t>=this.pages[0][o].cy){t=this.pages[0][o].y;break}return n==this.currentPage.pageX&&((n+=this.directionX)<0?n=0:n>=this.pages.length&&(n=this.pages.length-1),e=this.pages[n][0].x),o==this.currentPage.pageY&&((o+=this.directionY)<0?o=0:o>=this.pages[0].length&&(o=this.pages[0].length-1),t=this.pages[0][o].y),{x:e,y:t,pageX:n,pageY:o}},goToPage:function(e,t,n,r){r=r||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var o=this.pages[e][t].x,s=this.pages[e][t].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-this.x),1e3),i.min(i.abs(s-this.y),1e3)),300):n,this.currentPage={x:o,y:s,pageX:e,pageY:t},this.scrollTo(o,s,n,r)},next:function(e,t){var n=this.currentPage.pageX,i=this.currentPage.pageY;++n>=this.pages.length&&this.hasVerticalScroll&&(n=0,i++),this.goToPage(n,i,e,t)},prev:function(e,t){var n=this.currentPage.pageX,i=this.currentPage.pageY;--n<0&&this.hasVerticalScroll&&(n=0,i--),this.goToPage(n,i,e,t)},_initKeys:function(e){var n,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(n in this.options.keyBindings)"string"==typeof this.options.keyBindings[n]&&(this.options.keyBindings[n]=this.options.keyBindings[n].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(n in i)this.options.keyBindings[n]=this.options.keyBindings[n]||i[n];o.addEvent(t,"keydown",this),this.on("destroy",(function(){o.removeEvent(t,"keydown",this)}))},_key:function(e){if(this.enabled){var t,n=this.options.snap,r=n?this.currentPage.pageX:this.x,s=n?this.currentPage.pageY:this.y,a=o.getTime(),u=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(i.round(t.x),i.round(t.y)),this.isInTransition=!1),this.keyAcceleration=a-u<200?i.min(this.keyAcceleration+.25,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?r+=n?1:this.wrapperWidth:s+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?r-=n?1:this.wrapperWidth:s-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:r=n?this.pages.length-1:this.maxScrollX,s=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:r=0,s=0;break;case this.options.keyBindings.left:r+=n?-1:5+this.keyAcceleration|0;break;case this.options.keyBindings.up:s+=n?1:5+this.keyAcceleration|0;break;case this.options.keyBindings.right:r-=n?-1:5+this.keyAcceleration|0;break;case this.options.keyBindings.down:s-=n?1:5+this.keyAcceleration|0;break;default:return}n?this.goToPage(r,s):(r>this.minScrollX?(r=this.minScrollX,this.keyAcceleration=0):r<this.maxScrollX&&(r=this.maxScrollX,this.keyAcceleration=0),s>this.minScrollY?(s=this.minScrollY,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(r,s,0),this.keyTime=a)}},_animate:function(e,t,n,i){var s=this,a=this.x,u=this.y,c=o.getTime(),l=c+n;this.isAnimating=!0,function d(){var h,p,f,g=o.getTime();if(g>=l)return s.isAnimating=!1,s._translate(e,t),void(s.resetPosition(s.options.bounceTime)||s._execEvent("scrollEnd"));f=i(g=(g-c)/n),h=(e-a)*f+a,p=(t-u)*f+u,s._translate(h,p),s.isAnimating&&r(d)}()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},u.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(o.removeEvent(this.indicator,"touchstart",this),o.removeEvent(this.indicator,o.prefixPointerEvent("pointerdown"),this),o.removeEvent(this.indicator,"mousedown",this),o.removeEvent(t,"touchmove",this),o.removeEvent(t,o.prefixPointerEvent("pointermove"),this),o.removeEvent(t,"mousemove",this),o.removeEvent(t,"touchend",this),o.removeEvent(t,o.prefixPointerEvent("pointerup"),this),o.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var n=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=n.pageX,this.lastPointY=n.pageY,this.startTime=o.getTime(),this.options.disableTouch||o.addEvent(t,"touchmove",this),this.options.disablePointer||o.addEvent(t,o.prefixPointerEvent("pointermove"),this),this.options.disableMouse||o.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,n,i,r,s=e.touches?e.touches[0]:e;o.getTime(),this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=s.pageX-this.lastPointX,this.lastPointX=s.pageX,n=s.pageY-this.lastPointY,this.lastPointY=s.pageY,i=this.x+t,r=this.y+n,this._pos(i,r),e.preventDefault(),e.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),o.removeEvent(t,"touchmove",this),o.removeEvent(t,o.prefixPointerEvent("pointermove"),this),o.removeEvent(t,"mousemove",this),this.scroller.options.snap){var n=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),r=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-n.x),1e3),i.min(i.abs(this.scroller.y-n.y),1e3)),300);this.scroller.x==n.x&&this.scroller.y==n.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=n,this.scroller.scrollTo(n.x,n.y,r,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0,this.indicatorStyle[o.style.transitionDuration]=e+"ms",!e&&o.isBadAndroid&&(this.indicatorStyle[o.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[o.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(o.addClass(this.wrapper,"iScrollBothScrollbars"),o.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(o.removeClass(this.wrapper,"iScrollBothScrollbars"),o.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),this.wrapper.offsetHeight,this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[o.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?i.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?i.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=e?250:500,i=e?0:300;e=e?"1":"0",this.wrapperStyle[o.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),i)}}},s.utils=o,e.exports?e.exports=s:t.IScroll=s}(window,document,Math)},41951:function(e){if(void 0===t)var t={};var n,i;(function(e){"use strict";e.modifyEventListener=!1,e.modifySelectors=!1,e.configure=function(t){isFinite(t.modifyEventListener)&&(e.modifyEventListener=t.modifyEventListener),isFinite(t.modifySelectors)&&(e.modifySelectors=t.modifySelectors),!1===f&&e.modifyEventListener&&g(),!1===m&&e.modifySelectors&&q()},e.add=function(e,t,n,r){return i(e,t,n,r,"add")},e.remove=function(e,t,n,r){return i(e,t,n,r,"remove")},e.returnFalse=function(e){return!1},e.stop=function(e){e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.cancelBubbleCount=0)},e.prevent=function(e){e&&(e.preventDefault?e.preventDefault():e.preventManipulation?e.preventManipulation():e.returnValue=!1)},e.cancel=function(t){e.stop(t),e.prevent(t)},e.blur=function(){var e=document.activeElement;if(e){var t=document.activeElement.nodeName;"INPUT"!==t&&"TEXTAREA"!==t&&"true"!==e.contentEditable||e.blur&&e.blur()}},e.getEventSupport=function(e,t){if("string"==typeof e&&(t=e,e=window),(t="on"+t)in e)return!0;if(e.setAttribute||(e=document.createElement("div")),e.setAttribute&&e.removeAttribute){e.setAttribute(t,"");var n="function"==typeof e[t];return void 0!==e[t]&&(e[t]=null),e.removeAttribute(t),n}};var n=function(e){if(!e||"object"!=typeof e)return e;var t=new e.constructor;for(var i in e)e[i]&&"object"==typeof e[i]?t[i]=n(e[i]):t[i]=e[i];return t},i=function(s,a,l,f,g,m){if(f=f||{},"[object Object]"===String(s)){var q=s;if(s=q.target,delete q.target,!q.type||!q.listener){for(var v in q){var y=q[v];"function"!=typeof y&&(f[v]=y)}var b={};for(var _ in q){v=_.split(",");var S=q[_],w={};for(var x in f)w[x]=f[x];if("function"==typeof S)l=S;else{if("function"!=typeof S.listener)continue;for(var x in l=S.listener,S)"function"!=typeof S[x]&&(w[x]=S[x])}for(var E=0;E<v.length;E++)b[_]=t.add(s,v[E],l,w,g)}return b}for(var _ in a=q.type,delete q.type,l=q.listener,delete q.listener,q)f[_]=q[_]}if(s&&a&&l){if("string"==typeof s&&"ready"===a){if(!window.eventjs_stallOnReady){var P=(new Date).getTime(),A=f.timeout,T=f.interval||1e3/60,C=window.setInterval((function(){(new Date).getTime()-P>A&&window.clearInterval(C),document.querySelector(s)&&(window.clearInterval(C),setTimeout((function(){l()}),1))}),T);return}a="load",s=window}if("string"==typeof s){if(0===(s=document.querySelectorAll(s)).length)return o("Missing target on listener!",arguments);1===s.length&&(s=s[0])}var k,I={};if(s.length>0&&s!==window){for(var R=0,F=s.length;R<F;R++)(k=i(s[R],a,l,n(f),g))&&(I[R]=k);return r(I)}if("string"==typeof a&&(-1!==(a=a.toLowerCase()).indexOf(" ")?a=a.split(" "):-1!==a.indexOf(",")&&(a=a.split(","))),"string"!=typeof a){if("number"==typeof a.length)for(var D=0,U=a.length;D<U;D++)(k=i(s,a[D],l,n(f),g))&&(I[a[D]]=k);else for(var _ in a)(k="function"==typeof a[_]?i(s,_,a[_],n(f),g):i(s,_,a[_].listener,n(a[_]),g))&&(I[_]=k);return r(I)}if(0===a.indexOf("on")&&(a=a.substr(2)),"object"!=typeof s)return o("Target is not defined!",arguments);if("function"!=typeof l)return o("Listener is not a function!",arguments);var M=f.useCapture||!1,O=d(s)+"."+d(l)+"."+(M?1:0);if(e.Gesture&&e.Gesture._gestureHandlers[a]){if(O=a+O,"remove"===g){if(!c[O])return;c[O].remove(),delete c[O]}else if("add"===g){if(c[O])return c[O].add(),c[O];if(f.useCall&&!e.modifyEventListener){var L=l;l=function(e,t){for(var n in t)e[n]=t[n];return L.call(s,e)}}f.gesture=a,f.target=s,f.listener=l,f.fromOverwrite=m,c[O]=e.proxy[a](f)}return c[O]}var B,N=u(a);for(E=0;E<N.length;E++)if(B=(a=N[E])+"."+O,"remove"===g){if(!c[B])continue;s[p](a,l,M),delete c[B]}else if("add"===g){if(c[B])return c[B];s[h](a,l,M),c[B]={id:B,type:a,target:s,listener:l,remove:function(){for(var t=0;t<N.length;t++)e.remove(s,N[t],l,f)}}}return c[B]}},r=function(e){return{remove:function(){for(var t in e)e[t].remove()},add:function(){for(var t in e)e[t].add()}}},o=function(e,t){"undefined"!=typeof console&&void 0!==console.error&&console.error(e,t)},s={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},a={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2},u=(e.supports={},window.navigator.msPointerEnabled&&(e.supports.msPointer=!0),e.getEventSupport("touchstart")&&(e.supports.touch=!0),e.getEventSupport("mousedown")&&(e.supports.mouse=!0),function(t){var n=document.addEventListener?"":"on",i=a[t];if(isFinite(i)){var r=[];for(var o in e.supports)r.push(n+s[o][i]);return r}return[n+t]}),c={},l=0,d=function(e){return e===window?"#window":e===document?"#document":(e.uniqueID||(e.uniqueID="e"+l++),e.uniqueID)},h=document.addEventListener?"addEventListener":"attachEvent",p=document.removeEventListener?"removeEventListener":"detachEvent";e.createPointerEvent=function(t,n,i){var r=n.gesture,o=n.target,s=t.changedTouches||e.proxy.getCoords(t);if(s.length){var a=s[0];n.pointers=i?[]:s,n.pageX=a.pageX,n.pageY=a.pageY,n.x=n.pageX,n.y=n.pageY}var u=document.createEvent("Event");for(var c in u.initEvent(r,!0,!0),u.originalEvent=t,n)"target"!==c&&(u[c]=n[c]);var l=u.type;e.Gesture&&e.Gesture._gestureHandlers[l]&&n.oldListener.call(o,u,n,!1)};var f=!1,g=function(){if(window.HTMLElement){var t=function(t){var n=function(n){var r=n+"EventListener",o=t[r];t[r]=function(t,r,s){if(e.Gesture&&e.Gesture._gestureHandlers[t]){var a=s;"object"==typeof s?a.useCall=!0:a={useCall:!0,useCapture:s},i(this,t,r,a,n,!0)}else for(var c=u(t),l=0;l<c.length;l++)o.call(this,c[l],r,s)}};n("add"),n("remove")};navigator.userAgent.match(/Firefox/)?(t(HTMLDivElement.prototype),t(HTMLCanvasElement.prototype)):t(HTMLElement.prototype),t(document),t(window)}},m=!1,q=function(){var e=NodeList.prototype;e.removeEventListener=function(e,t,n){for(var i=0,r=this.length;i<r;i++)this[i].removeEventListener(e,t,n)},e.addEventListener=function(e,t,n){for(var i=0,r=this.length;i<r;i++)this[i].addEventListener(e,t,n)}}})(t),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";e.pointerSetup=function(e,n){e.target=e.target||window,e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||e.fingers||1,e.maxFingers=e.maxFingers||e.fingers||1/0,e.position=e.position||"relative",delete e.fingers,(n=n||{}).enabled=!0,n.gesture=e.gesture,n.target=e.target,n.env=e.env,t.modifyEventListener&&e.fromOverwrite&&(e.oldListener=e.listener,e.listener=t.createPointerEvent);var i=0,r=0===n.gesture.indexOf("pointer")&&t.modifyEventListener?"pointer":"mouse";return e.oldListener&&(n.oldListener=e.oldListener),n.listener=e.listener,n.proxy=function(t){n.defaultListener=e.listener,e.listener=t,t(e.event,n)},n.add=function(){!0!==n.enabled&&(e.onPointerDown&&t.add(e.target,r+"down",e.onPointerDown),e.onPointerMove&&t.add(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&t.add(e.doc,r+"up",e.onPointerUp),n.enabled=!0)},n.remove=function(){!1!==n.enabled&&(e.onPointerDown&&t.remove(e.target,r+"down",e.onPointerDown),e.onPointerMove&&t.remove(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&t.remove(e.doc,r+"up",e.onPointerUp),n.reset(),n.enabled=!1)},n.pause=function(n){!e.onPointerMove||n&&!n.move||t.remove(e.doc,r+"move",e.onPointerMove),!e.onPointerUp||n&&!n.up||t.remove(e.doc,r+"up",e.onPointerUp),i=e.fingers,e.fingers=0},n.resume=function(n){!e.onPointerMove||n&&!n.move||t.add(e.doc,r+"move",e.onPointerMove),!e.onPointerUp||n&&!n.up||t.add(e.doc,r+"up",e.onPointerUp),e.fingers=i},n.reset=function(){e.tracker={},e.fingers=0},n};var n=t.supports;t.isMouse=!!n.mouse,t.isMSPointer=!!n.touch,t.isTouch=!!n.msPointer,e.pointerStart=function(n,i,r){var o=(n.type||"mousedown").toUpperCase();0===o.indexOf("MOUSE")?(t.isMouse=!0,t.isTouch=!1,t.isMSPointer=!1):0===o.indexOf("TOUCH")?(t.isMouse=!1,t.isTouch=!0,t.isMSPointer=!1):0===o.indexOf("MSPOINTER")&&(t.isMouse=!1,t.isTouch=!1,t.isMSPointer=!0);var s=function(e,t){var n=r.bbox,i=u[t]={};switch(r.position){case"absolute":i.offsetX=0,i.offsetY=0;break;case"differenceFromLast":case"difference":i.offsetX=e.pageX,i.offsetY=e.pageY;break;case"move":i.offsetX=e.pageX-n.x1,i.offsetY=e.pageY-n.y1;break;default:i.offsetX=n.x1-n.scrollLeft,i.offsetY=n.y1-n.scrollTop}var o=e.pageX-i.offsetX,s=e.pageY-i.offsetY;i.rotation=0,i.scale=1,i.startTime=i.moveTime=(new Date).getTime(),i.move={x:o,y:s},i.start={x:o,y:s},r.fingers++};r.event=n,i.defaultListener&&(r.listener=i.defaultListener,delete i.defaultListener);for(var a=!r.fingers,u=r.tracker,c=n.changedTouches||e.getCoords(n),l=c.length,d=0;d<l;d++){var h=c[d],p=h.identifier||1/0;if(r.fingers){if(r.fingers>=r.maxFingers){var f=[];for(var p in r.tracker)f.push(p);return i.identifier=f.join(","),a}for(var g in u)if(u[g].up){delete u[g],s(h,p),r.cancel=!0;break}if(u[p])continue;s(h,p)}else u=r.tracker={},i.bbox=r.bbox=e.getBoundingBox(r.target),r.fingers=0,r.cancel=!1,s(h,p)}for(var p in f=[],r.tracker)f.push(p);return i.identifier=f.join(","),a},e.pointerEnd=function(e,t,n,i){for(var r=e.touches||[],o=r.length,s={},a=0;a<o;a++)s[(u=r[a].identifier)||1/0]=!0;for(var u in n.tracker){var c=n.tracker[u];s[u]||c.up||(i&&i({pageX:c.pageX,pageY:c.pageY,changedTouches:[{pageX:c.pageX,pageY:c.pageY,identifier:"Infinity"===u?1/0:u}]},"up"),c.up=!0,n.fingers--)}if(0!==n.fingers)return!1;var l=[];for(var u in n.gestureFingers=0,n.tracker)n.gestureFingers++,l.push(u);return t.identifier=l.join(","),!0},e.getCoords=function(t){return void 0!==t.pageX?e.getCoords=function(e){return Array({type:"mouse",x:e.pageX,y:e.pageY,pageX:e.pageX,pageY:e.pageY,identifier:e.pointerId||1/0})}:e.getCoords=function(e){var t=document.documentElement;return e=e||window.event,Array({type:"mouse",x:e.clientX+t.scrollLeft,y:e.clientY+t.scrollTop,pageX:e.clientX+t.scrollLeft,pageY:e.clientY+t.scrollTop,identifier:1/0})},e.getCoords(t)},e.getCoord=function(t){if("ontouchstart"in window){var n=0,i=0;e.getCoord=function(e){var t=e.changedTouches;return t&&t.length?{x:n=t[0].pageX,y:i=t[0].pageY}:{x:n,y:i}}}else void 0!==t.pageX&&void 0!==t.pageY?e.getCoord=function(e){return{x:e.pageX,y:e.pageY}}:e.getCoord=function(e){var t=document.documentElement;return{x:(e=e||window.event).clientX+t.scrollLeft,y:e.clientY+t.scrollTop}};return e.getCoord(t)};var i,r,o,s=function(e,t){var n=parseFloat(e.getPropertyValue(t),10);return isFinite(n)?n:0};return e.getBoundingBox=function(e){e!==window&&e!==document||(e=document.body);var t={},n=e.getBoundingClientRect();if(t.width=n.width,t.height=n.height,t.x1=n.left,t.y1=n.top,t.scaleX=n.width/e.offsetWidth||1,t.scaleY=n.height/e.offsetHeight||1,t.scrollLeft=0,t.scrollTop=0,!1==("border-box"===(c=window.getComputedStyle(e)).getPropertyValue("box-sizing"))){var i=s(c,"border-left-width"),r=s(c,"border-right-width"),o=s(c,"border-bottom-width"),a=s(c,"border-top-width");t.border=[i,r,a,o],t.x1+=i,t.y1+=a,t.width-=r+i,t.height-=o+a}t.x2=t.x1+t.width,t.y2=t.y1+t.height;for(var u="fixed"===(l=c.getPropertyValue("position"))?e:e.parentNode;null!==u&&u!==document.body&&void 0!==u.scrollTop;){var c,l;if("absolute"===(l=(c=window.getComputedStyle(u)).getPropertyValue("position")));else{if("fixed"===l){t.scrollTop-=u.parentNode.scrollTop,t.scrollLeft-=u.parentNode.scrollLeft;break}t.scrollLeft+=u.scrollLeft,t.scrollTop+=u.scrollTop}u=u.parentNode}return t.scrollBodyLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t.scrollBodyTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,t.scrollLeft-=t.scrollBodyLeft,t.scrollTop-=t.scrollBodyTop,t},o=-1!==(r=navigator.userAgent.toLowerCase()).indexOf("macintosh"),i=o&&-1!==r.indexOf("khtml")?{91:!0,93:!0}:o&&-1!==r.indexOf("firefox")?{224:!0}:{17:!0},(e.metaTrackerReset=function(){t.fnKey=e.fnKey=!1,t.metaKey=e.metaKey=!1,t.escKey=e.escKey=!1,t.ctrlKey=e.ctrlKey=!1,t.shiftKey=e.shiftKey=!1,t.altKey=e.altKey=!1})(),e.metaTracker=function(n){var r="keydown"===n.type;27===n.keyCode&&(t.escKey=e.escKey=r),i[n.keyCode]&&(t.metaKey=e.metaKey=r),t.ctrlKey=e.ctrlKey=n.ctrlKey,t.shiftKey=e.shiftKey=n.shiftKey,t.altKey=e.altKey=n.altKey},e}(t.proxy),void 0===t&&(t={}),t.MutationObserver=(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i=!n&&function(){var e=document.createElement("p"),t=!1,n=function(){t=!0};if(e.addEventListener)e.addEventListener("DOMAttrModified",n,!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",n)}return e.setAttribute("id","target"),t}(),function(e,r){n?new n((function(e){e.forEach((function(e){r.call(e.target,e.attributeName)}))})).observe(e,{subtree:!1,attributes:!0}):i?t.add(e,"DOMAttrModified",(function(t){r.call(e,t.attrName)})):"onpropertychange"in document.body&&t.add(e,"propertychange",(function(t){r.call(e,window.event.propertyName)}))}),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.click=function(n){n.gesture=n.gesture||"click",n.maxFingers=n.maxFingers||n.fingers||1,n.onPointerDown=function(r){e.pointerStart(r,i,n)&&t.add(n.target,"mouseup",n.onPointerUp)},n.onPointerUp=function(r){if(e.pointerEnd(r,i,n)){t.remove(n.target,"mouseup",n.onPointerUp);var o=(r.changedTouches||e.getCoords(r))[0],s=n.bbox,a=e.getBoundingBox(n.target),u=o.pageY-a.scrollBodyTop,c=o.pageX-a.scrollBodyLeft;if(c>s.x1&&u>s.y1&&c<s.x2&&u<s.y2&&s.scrollTop===a.scrollTop){for(var l in n.tracker)break;var d=n.tracker[l];i.x=d.start.x,i.y=d.start.y,n.listener(r,i)}}};var i=e.pointerSetup(n);return i.state="click",t.add(n.target,"mousedown",n.onPointerDown),i},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.click=e.click,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.dbltap=e.dblclick=function(n){var i,r,o,s,a;n.gesture=n.gesture||"dbltap",n.maxFingers=n.maxFingers||n.fingers||1,n.onPointerDown=function(c){var l=c.changedTouches||e.getCoords(c);i&&!r?(a=l[0],r=(new Date).getTime()-i):(s=l[0],i=(new Date).getTime(),r=0,clearTimeout(o),o=setTimeout((function(){i=0}),300)),e.pointerStart(c,u,n)&&(t.add(n.target,"mousemove",n.onPointerMove).listener(c),t.add(n.target,"mouseup",n.onPointerUp))},n.onPointerMove=function(u){if(i&&!r){var c=u.changedTouches||e.getCoords(u);a=c[0]}var l=n.bbox,d=a.pageX-l.x1,h=a.pageY-l.y1;d>0&&d<l.width&&h>0&&h<l.height&&Math.abs(a.pageX-s.pageX)<=25&&Math.abs(a.pageY-s.pageY)<=25||(t.remove(n.target,"mousemove",n.onPointerMove),clearTimeout(o),i=r=0)},n.onPointerUp=function(s){if(e.pointerEnd(s,u,n)&&(t.remove(n.target,"mousemove",n.onPointerMove),t.remove(n.target,"mouseup",n.onPointerUp)),i&&r){if(r<=300){for(var a in u.state=n.gesture,n.tracker)break;var c=n.tracker[a];u.x=c.start.x,u.y=c.start.y,n.listener(s,u)}clearTimeout(o),i=r=0}};var u=e.pointerSetup(n);return u.state="dblclick",t.add(n.target,"mousedown",n.onPointerDown),u},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.dbltap=e.dbltap,t.Gesture._gestureHandlers.dblclick=e.dblclick,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.dragElement=function(n,i){e.drag({event:i,target:n,position:"move",listener:function(e,i){n.style.left=i.x+"px",n.style.top=i.y+"px",t.prevent(e)}})},e.drag=function(n){n.gesture="drag",n.onPointerDown=function(r){e.pointerStart(r,i,n)&&(n.monitor||(t.add(n.doc,"mousemove",n.onPointerMove),t.add(n.doc,"mouseup",n.onPointerUp))),n.onPointerMove(r,"down")},n.onPointerMove=function(t,r){if(!n.tracker)return n.onPointerDown(t);n.bbox;for(var o=t.changedTouches||e.getCoords(t),s=o.length,a=0;a<s;a++){var u=o[a],c=u.identifier||1/0,l=n.tracker[c];l&&(l.pageX=u.pageX,l.pageY=u.pageY,i.state=r||"move",i.identifier=c,i.start=l.start,i.fingers=n.fingers,"differenceFromLast"===n.position?(i.x=l.pageX-l.offsetX,i.y=l.pageY-l.offsetY,l.offsetX=l.pageX,l.offsetY=l.pageY):(i.x=l.pageX-l.offsetX,i.y=l.pageY-l.offsetY),n.listener(t,i))}},n.onPointerUp=function(r){e.pointerEnd(r,i,n,n.onPointerMove)&&(n.monitor||(t.remove(n.doc,"mousemove",n.onPointerMove),t.remove(n.doc,"mouseup",n.onPointerUp)))};var i=e.pointerSetup(n);return n.event?n.onPointerDown(n.event):(t.add(n.target,"mousedown",n.onPointerDown),n.monitor&&(t.add(n.doc,"mousemove",n.onPointerMove),t.add(n.doc,"mouseup",n.onPointerUp))),i},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.drag=e.drag,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";var n=Math.PI/180,i=function(e,t){var n=0,i=0,r=0;for(var o in t){var s=t[o];s.up||(n+=s.move.x,i+=s.move.y,r++)}return e.x=n/=r,e.y=i/=r,e};return e.gesture=function(r){r.gesture=r.gesture||"gesture",r.minFingers=r.minFingers||r.fingers||2,r.onPointerDown=function(n){var s=r.fingers;if(e.pointerStart(n,o,r)&&(t.add(r.doc,"mousemove",r.onPointerMove),t.add(r.doc,"mouseup",r.onPointerUp)),r.fingers===r.minFingers&&s!==r.fingers){o.fingers=r.minFingers,o.scale=1,o.rotation=0,o.state="start";var a="";for(var u in r.tracker)a+=u;o.identifier=parseInt(a),i(o,r.tracker),r.listener(n,o)}},r.onPointerMove=function(t,s){for(var a=r.bbox,u=r.tracker,c=(h=t.changedTouches||e.getCoords(t)).length,l=0;l<c;l++){var d=u[g=(m=h[l]).identifier||1/0];d&&(d.move.x=m.pageX-a.x1,d.move.y=m.pageY-a.y1)}if(!(r.fingers<r.minFingers)){var h=[],p=0,f=0;for(var g in i(o,u),u){var m;if(!(m=u[g]).up){var q=m.start;if(!q.distance){var v=q.x-o.x,y=q.y-o.y;q.distance=Math.sqrt(v*v+y*y),q.angle=Math.atan2(v,y)/n}v=m.move.x-o.x,y=m.move.y-o.y,p+=Math.sqrt(v*v+y*y)/q.distance;var b=Math.atan2(v,y)/n,_=(q.angle-b+360)%360-180;m.DEG2=m.DEG1,m.DEG1=_>0?_:-_,void 0!==m.DEG2&&(_>0?m.rotation+=m.DEG1-m.DEG2:m.rotation-=m.DEG1-m.DEG2,f+=m.rotation),h.push(m.move)}}o.touches=h,o.fingers=r.fingers,o.scale=p/r.fingers,o.rotation=f/r.fingers,o.state="change",r.listener(t,o)}},r.onPointerUp=function(n){var i=r.fingers;e.pointerEnd(n,o,r)&&(t.remove(r.doc,"mousemove",r.onPointerMove),t.remove(r.doc,"mouseup",r.onPointerUp)),i===r.minFingers&&r.fingers<r.minFingers&&(o.fingers=r.fingers,o.state="end",r.listener(n,o))};var o=e.pointerSetup(r);return t.add(r.target,"mousedown",r.onPointerDown),o},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.gesture=e.gesture,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.pointerdown=e.pointermove=e.pointerup=function(n){if(n.gesture=n.gesture||"pointer",!n.target.isPointerEmitter){var i=!0;n.onPointerDown=function(e){i=!1,r.gesture="pointerdown",n.listener(e,r)},n.onPointerMove=function(e){r.gesture="pointermove",n.listener(e,r,i)},n.onPointerUp=function(e){i=!0,r.gesture="pointerup",n.listener(e,r,!0)};var r=e.pointerSetup(n);return t.add(n.target,"mousedown",n.onPointerDown),t.add(n.target,"mousemove",n.onPointerMove),t.add(n.doc,"mouseup",n.onPointerUp),n.target.isPointerEmitter=!0,r}},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.pointerdown=e.pointerdown,t.Gesture._gestureHandlers.pointermove=e.pointermove,t.Gesture._gestureHandlers.pointerup=e.pointerup,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.shake=function(e){var t={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:e.target,listener:e.listener,remove:function(){window.removeEventListener("devicemotion",o,!1)}},n=(new Date).getTime(),i={x:0,y:0,z:0},r={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},o=function(o){var s=.8,a=o.accelerationIncludingGravity;if(i.x=s*i.x+(1-s)*a.x,i.y=s*i.y+(1-s)*a.y,i.z=s*i.z+(1-s)*a.z,t.accelerationIncludingGravity=i,t.acceleration.x=a.x-i.x,t.acceleration.y=a.y-i.y,t.acceleration.z=a.z-i.z,"devicemotion"!==e.gesture)for(var u=(new Date).getTime(),c=0;c<3;c++){var l="xyz"[c],d=t.acceleration[l],h=r[l],p=Math.abs(d);if(!(u-n<1e3)&&p>4){var f=u*d/p,g=Math.abs(f+h.value);h.value&&g<200?(h.value=f,h.count++,3===h.count&&(e.listener(o,t),n=u,h.value=0,h.count=0)):(h.value=f,h.count=1)}}else e.listener(o,t)};if(window.addEventListener)return window.addEventListener("devicemotion",o,!1),t},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.shake=e.shake,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";var n=Math.PI/180;return e.swipe=function(i){i.snap=i.snap||90,i.threshold=i.threshold||1,i.gesture=i.gesture||"swipe",i.onPointerDown=function(n){e.pointerStart(n,r,i)&&(t.add(i.doc,"mousemove",i.onPointerMove).listener(n),t.add(i.doc,"mouseup",i.onPointerUp))},i.onPointerMove=function(t){for(var n=t.changedTouches||e.getCoords(t),r=n.length,o=0;o<r;o++){var s=n[o],a=s.identifier||1/0,u=i.tracker[a];u&&(u.move.x=s.pageX,u.move.y=s.pageY,u.moveTime=(new Date).getTime())}},i.onPointerUp=function(o){if(e.pointerEnd(o,r,i)){var s,a;t.remove(i.doc,"mousemove",i.onPointerMove),t.remove(i.doc,"mouseup",i.onPointerUp);var u={x:0,y:0},c=0,l=0,d=0;for(var h in i.tracker){var p=i.tracker[h],f=p.move.x-p.start.x,g=p.move.y-p.start.y;c+=p.move.x,l+=p.move.y,u.x+=p.start.x,u.y+=p.start.y,d++;var m=Math.sqrt(f*f+g*g),q=p.moveTime-p.startTime,v=Math.atan2(f,g)/n+180,y=q?m/q:0;if(void 0===a)a=v,s=y;else{if(!(Math.abs(v-a)<=20))return;a=(a+v)/2,s=(s+y)/2}}var b=i.gestureFingers;i.minFingers<=b&&i.maxFingers>=b&&s>i.threshold&&(u.x/=d,u.y/=d,r.start=u,r.x=c/d,r.y=l/d,r.angle=-(((a/i.snap+.5|0)*i.snap||360)-360),r.velocity=s,r.fingers=b,r.state="swipe",i.listener(o,r))}};var r=e.pointerSetup(i);return t.add(i.target,"mousedown",i.onPointerDown),r},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.swipe=e.swipe,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.longpress=function(t){return t.gesture="longpress",e.tap(t)},e.tap=function(n){var i,r;n.delay=n.delay||500,n.timeout=n.timeout||250,n.driftDeviance=n.driftDeviance||10,n.gesture=n.gesture||"tap",n.onPointerDown=function(s){if(e.pointerStart(s,o,n)){if(i=(new Date).getTime(),t.add(n.doc,"mousemove",n.onPointerMove).listener(s),t.add(n.doc,"mouseup",n.onPointerUp),"longpress"!==n.gesture)return;r=setTimeout((function(){if(!(s.cancelBubble&&++s.cancelBubbleCount>1)){var e=0;for(var t in n.tracker){var i=n.tracker[t];if(!0===i.end)return;if(n.cancel)return;e++}n.minFingers<=e&&n.maxFingers>=e&&(o.state="start",o.fingers=e,o.x=i.start.x,o.y=i.start.y,n.listener(s,o))}}),n.delay)}},n.onPointerMove=function(i){for(var r=n.bbox,o=i.changedTouches||e.getCoords(i),s=o.length,a=0;a<s;a++){var u=o[a],c=u.identifier||1/0,l=n.tracker[c];if(l){var d=u.pageX-r.x1,h=u.pageY-r.y1,p=d-l.start.x,f=h-l.start.y,g=Math.sqrt(p*p+f*f);if(!(d>0&&d<r.width&&h>0&&h<r.height&&g<=n.driftDeviance))return t.remove(n.doc,"mousemove",n.onPointerMove),void(n.cancel=!0)}}},n.onPointerUp=function(s){if(e.pointerEnd(s,o,n)){if(clearTimeout(r),t.remove(n.doc,"mousemove",n.onPointerMove),t.remove(n.doc,"mouseup",n.onPointerUp),s.cancelBubble&&++s.cancelBubbleCount>1)return;if("longpress"===n.gesture)return void("start"===o.state&&(o.state="end",n.listener(s,o)));if(n.cancel)return;if((new Date).getTime()-i>n.timeout)return;var a=n.gestureFingers;n.minFingers<=a&&n.maxFingers>=a&&(o.state="tap",o.fingers=n.gestureFingers,n.listener(s,o))}};var o=e.pointerSetup(n);return t.add(n.target,"mousedown",n.onPointerDown),o},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.tap=e.tap,t.Gesture._gestureHandlers.longpress=e.longpress,e}(t.proxy),void 0===t&&(t={}),void 0===t.proxy&&(t.proxy={}),t.proxy=function(e){"use strict";return e.wheelPreventElasticBounce=function(e){e&&("string"==typeof e&&(e=document.querySelector(e)),t.add(e,"wheel",(function(e,n){n.preventElasticBounce(),t.stop(e)})))},e.wheel=function(e){var n,i=e.timeout||150,r=0,o={gesture:"wheel",state:"start",wheelDelta:0,target:e.target,listener:e.listener,preventElasticBounce:function(e){var n=this.target,i=n.scrollTop;(i+n.offsetHeight===n.scrollHeight&&this.wheelDelta<=0||0===i&&this.wheelDelta>=0)&&t.cancel(e),t.stop(e)},add:function(){e.target[a](c,s,!1)},remove:function(){e.target[u](c,s,!1)}},s=function(t){t=t||window.event,o.state=r++?"change":"start",o.wheelDelta=t.detail?-20*t.detail:t.wheelDelta,e.listener(t,o),clearTimeout(n),n=setTimeout((function(){r=0,o.state="end",o.wheelDelta=0,e.listener(t,o)}),i)},a=document.addEventListener?"addEventListener":"attachEvent",u=document.removeEventListener?"removeEventListener":"detachEvent",c=t.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return e.target[a](c,s,!1),o},t.Gesture=t.Gesture||{},t.Gesture._gestureHandlers=t.Gesture._gestureHandlers||{},t.Gesture._gestureHandlers.wheel=e.wheel,e}(t.proxy),e.exports=t},63275:function(e){e.exports=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return r(t[s][1][e]||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){var i,r,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(i===setTimeout)return setTimeout(e,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!d){var e=u(p);d=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||d||u(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t,n){"use strict";var i=e("for-each"),r=e("warning"),o=e("has"),s=e("string.prototype.trim"),a=function(e){r(!1,e)},u=String.prototype.replace,c=String.prototype.split,l={arabic:function(e){return e<3?e:e%100>=3&&e%100<=10?3:e%100>=11?4:5},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},d={arabic:["ar"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru","lt"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function h(e){var t,n=(t={},i(d,(function(e,n){i(e,(function(e){t[e]=n}))})),t);return n[e]||n[c.call(e,/-/,1)[0]]||n.en}var p=/\$/g,f=/%\{(.*?)\}/g;function g(e,t,n){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var i=e,r="number"==typeof t?{smart_count:t}:t;if(null!=r.smart_count&&i){var a=c.call(i,"||||");i=s(a[function(e,t){return l[h(e)](t)}(n||"en",r.smart_count)]||a[0])}return u.call(i,f,(function(e,t){return o(r,t)&&null!=r[t]?u.call(r[t],p,"$$"):e}))}function m(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||a}m.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},m.prototype.extend=function(e,t){i(e,(function(e,n){var i=t?t+"."+n:n;"object"==typeof e?this.extend(e,i):this.phrases[i]=e}),this)},m.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:i(e,(function(e,n){var i=t?t+"."+n:n;"object"==typeof e?this.unset(e,i):delete this.phrases[i]}),this)},m.prototype.clear=function(){this.phrases={}},m.prototype.replace=function(e){this.clear(),this.extend(e)},m.prototype.t=function(e,t){var n,i,r=null==t?{}:t;return"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof r._?n=r._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),i=e),"string"==typeof n&&(i=g(n,r,this.currentLocale)),i},m.prototype.has=function(e){return o(this.phrases,e)},m.transformPhrase=g,t.exports=m},{"for-each":3,has:7,"string.prototype.trim":9,warning:26}],3:[function(e,t,n){var i=e("is-function");t.exports=function(e,t,n){if(!i(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===r.call(e)?function(e,t,n){for(var i=0,r=e.length;i<r;i++)o.call(e,i)&&t.call(n,e[i],i,e)}(e,t,n):"string"==typeof e?function(e,t,n){for(var i=0,r=e.length;i<r;i++)t.call(n,e.charAt(i),i,e)}(e,t,n):function(e,t,n){for(var i in e)o.call(e,i)&&t.call(n,e[i],i,e)}(e,t,n)};var r=Object.prototype.toString,o=Object.prototype.hasOwnProperty},{"is-function":4}],4:[function(e,t,n){t.exports=function(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var i=Object.prototype.toString},{}],5:[function(e,t,n){var i=Array.prototype.slice,r=Object.prototype.toString;t.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==r.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,o=i.call(arguments,1),s=Math.max(0,t.length-o.length),a=[],u=0;u<s;u++)a.push("$"+u);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var r=t.apply(this,o.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,o.concat(i.call(arguments)))})),t.prototype){var c=function(){};c.prototype=t.prototype,n.prototype=new c,c.prototype=null}return n}},{}],6:[function(e,t,n){var i=e("./implementation");t.exports=Function.prototype.bind||i},{"./implementation":5}],7:[function(e,t,n){var i=e("function-bind");t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":6}],8:[function(e,t,n){"use strict";var i=e("function-bind"),r=e("es-abstract/es5"),o=i.call(Function.call,String.prototype.replace),s=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var e=r.ToString(r.CheckObjectCoercible(this));return o(o(e,s,""),a,"")}},{"es-abstract/es5":14,"function-bind":23}],9:[function(e,t,n){"use strict";var i=e("function-bind"),r=e("define-properties"),o=e("./implementation"),s=e("./polyfill"),a=e("./shim"),u=i.call(Function.call,s());r(u,{getPolyfill:s,implementation:o,shim:a}),t.exports=u},{"./implementation":8,"./polyfill":24,"./shim":25,"define-properties":10,"function-bind":23}],10:[function(e,t,n){"use strict";var i=e("object-keys"),r=e("foreach"),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=Object.defineProperty&&function(){var e={};try{for(var t in Object.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),u=function(e,t,n,i){var r;(!(t in e)||"function"==typeof(r=i)&&"[object Function]"===s.call(r)&&i())&&(a?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},s=i(t);o&&(s=s.concat(Object.getOwnPropertySymbols(t))),r(s,(function(i){u(e,i,t[i],n[i])}))};c.supportsDescriptors=!!a,t.exports=c},{foreach:11,"object-keys":12}],11:[function(e,t,n){var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString;t.exports=function(e,t,n){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var s=0;s<o;s++)t.call(n,e[s],s,e);else for(var a in e)i.call(e,a)&&t.call(n,e[a],a,e)}},{}],12:[function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=Array.prototype.slice,s=e("./isArguments"),a=Object.prototype.propertyIsEnumerable,u=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},h={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),f=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===r.call(e),o=s(e),a=t&&"[object String]"===r.call(e),h=[];if(!t&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(a&&e.length>0&&!i.call(e,0))for(var g=0;g<e.length;++g)h.push(String(g));if(o&&e.length>0)for(var m=0;m<e.length;++m)h.push(String(m));else for(var q in e)f&&"prototype"===q||!i.call(e,q)||h.push(String(q));if(u)for(var v=function(e){if("undefined"==typeof window||!p)return d(e);try{return d(e)}catch(e){return!1}}(e),y=0;y<l.length;++y)v&&"constructor"===l[y]||!i.call(e,l[y])||h.push(l[y]);return h};f.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return s(e)?t(o.call(e)):t(e)}}}else Object.keys=f;return Object.keys||f},t.exports=f},{"./isArguments":13}],13:[function(e,t,n){"use strict";var i=Object.prototype.toString;t.exports=function(e){var t=i.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===i.call(e.callee)),n}},{}],14:[function(e,t,n){"use strict";var i=e("./helpers/isNaN"),r=e("./helpers/isFinite"),o=e("./helpers/sign"),s=e("./helpers/mod"),a=e("is-callable"),u={ToPrimitive:e("es-to-primitive/es5"),ToBoolean:function(e){return Boolean(e)},ToNumber:function(e){return Number(e)},ToInteger:function(e){var t=this.ToNumber(e);return i(t)?0:0!==t&&r(t)?o(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return 0|this.ToNumber(e)},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);if(i(t)||0===t||!r(t))return 0;var n=o(t)*Math.floor(Math.abs(t));return s(n,65536)},ToString:function(e){return String(e)},ToObject:function(e){return this.CheckObjectCoercible(e),Object(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},IsCallable:a,SameValue:function(e,t){return e===t?0!==e||1/e==1/t:i(e)&&i(t)},Type:function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}};t.exports=u},{"./helpers/isFinite":15,"./helpers/isNaN":16,"./helpers/mod":17,"./helpers/sign":18,"es-to-primitive/es5":19,"is-callable":21}],15:[function(e,t,n){var i=Number.isNaN||function(e){return e!=e};t.exports=Number.isFinite||function(e){return"number"==typeof e&&!i(e)&&e!==1/0&&e!==-1/0}},{}],16:[function(e,t,n){t.exports=Number.isNaN||function(e){return e!=e}},{}],17:[function(e,t,n){t.exports=function(e,t){var n=e%t;return Math.floor(n>=0?n:n+t)}},{}],18:[function(e,t,n){t.exports=function(e){return e>=0?1:-1}},{}],19:[function(e,t,n){"use strict";var i=Object.prototype.toString,r=e("./helpers/isPrimitive"),o=e("is-callable"),s=function(e,t){var n=t||("[object Date]"===i.call(e)?String:Number);if(n===String||n===Number){var s,a,u=n===String?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<u.length;++a)if(o(e[u[a]])&&(s=e[u[a]](),r(s)))return s;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(e,t){return r(e)?e:s(e,t)}},{"./helpers/isPrimitive":20,"is-callable":21}],20:[function(e,t,n){t.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},{}],21:[function(e,t,n){"use strict";var i=Function.prototype.toString,r=/^\s*class /,o=function(e){try{var t=i.call(e).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return r.test(t)}catch(e){return!1}},s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(a)return function(e){try{return!o(e)&&(i.call(e),!0)}catch(e){return!1}}(e);if(o(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},{}],22:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],23:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{"./implementation":22,dup:6}],24:[function(e,t,n){"use strict";var i=e("./implementation");t.exports=function(){return String.prototype.trim&&""==="".trim()?String.prototype.trim:i}},{"./implementation":8}],25:[function(e,t,n){"use strict";var i=e("define-properties"),r=e("./polyfill");t.exports=function(){var e=r();return i(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},{"./polyfill":24,"define-properties":10}],26:[function(e,t,n){(function(e){"use strict";var n=function(){};"production"!==e.env.NODE_ENV&&(n=function(e,t,n){var i=arguments.length;n=new Array(i>2?i-2:0);for(var r=2;r<i;r++)n[r-2]=arguments[r];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var o=0,s="Warning: "+t.replace(/%s/g,(function(){return n[o++]}));"undefined"!=typeof console&&console.error(s);try{throw new Error(s)}catch(e){}}}),t.exports=n}).call(this,e("_process"))},{_process:1}]},{},[2])(2)},95008:function(){window.removeMarkdown=function(e,t){(t=t||{}).stripListLeaders=!t.hasOwnProperty("stripListLeaders")||t.stripListLeaders,t.gfm=!t.hasOwnProperty("gfm")||t.gfm;var n=e;n=n.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm,"");try{t.stripListLeaders&&(n=n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),t.gfm&&(n=n.replace(/\n={2,}/g,"\n").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),n=n.replace(/<[^>]*>/g,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[.*?\][\[\(].*?[\]\)]/g,"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/>/g,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} #{0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(t){return console.error(t),e}return n}},5970:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){var qq=function(e){"use strict";return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return!!t&&(e===t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e))))},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null==e.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=t.opacity&&"string"!=typeof e.style.opacity&&void 0!==e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t,n){var i=new RegExp("(^| )"+t+"( |$)");return i.test(e.className)||!(!n||!i.test(e.parentNode.className))},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t,n){var i,r=[];return n&&e.querySelector?e.querySelector("."+t):e.querySelectorAll?e.querySelectorAll("."+t):(i=e.getElementsByTagName("*"),qq.each(i,(function(e,n){qq(n).hasClass(t)&&r.push(n)})),n?r[0]:r)},getFirstByClass:function(t){return qq(e).getByClass(t,!0)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var n;return e.hasAttribute?!!e.hasAttribute(t)&&null==/^false$/i.exec(e.getAttribute(t)):void 0!==(n=e[t])&&null==/^false$/i.exec(n)}}},e;!function(){"use strict";var e;qq.canvasToBlob=function(e,t,n){return qq.dataUriToBlob(e.toDataURL(t,n))},qq.dataUriToBlob=function(e){var t,n,i,r;return n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(n.length),i=new Uint8Array(t),qq.each(n,(function(e,t){i[e]=t.charCodeAt(0)})),function(e,t){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=n&&new n;return i?(i.append(e),i.getBlob(t)):new Blob([e],{type:t})}(t,r)},qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)||e&&window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e,i=n.indexOf("{}");return qq.each(t,(function(e,t){var r=n.substring(0,i),o=n.substring(i+2);if((i=(n=r+t+o).indexOf("{}",i+t.length))<0)return!1})),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e,t){var n=function(e){var n=e.toLowerCase();return t?"file"!==n:"file"===n};return!!(window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&n(e.type))||!!(e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&n(e.type))},qq.isBlob=function(e){if(window.Blob&&"[object Blob]"===Object.prototype.toString.call(e))return!0},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&void 0!==qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items.length>0&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(e,t,n){return(e.slice||e.mozSlice||e.webkitSlice).call(e,t,n)},qq.arrayBufferToHex=function(e){var t="",n=new Uint8Array(e);return qq.each(n,(function(e,n){var i=n.toString(16);i.length<2&&(i="0"+i),t+=i})),t},qq.readBlobToHex=function(e,t,n){var i=qq.sliceBlob(e,t,t+n),r=new FileReader,o=new qq.Promise;return r.onload=function(){o.success(qq.arrayBufferToHex(r.result))},r.onerror=o.failure,r.readAsArrayBuffer(i),o},qq.extend=function(e,t,n){return qq.each(t,(function(t,i){n&&qq.isObject(i)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],i,!0)):e[t]=i})),e},qq.override=function(e,t){var n={},i=t(n);return qq.each(i,(function(t,i){void 0!==e[t]&&(n[t]=e[t]),e[t]=i})),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;for(n<0&&(n+=i);n<i;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return qq.ie()&&-1!==navigator.userAgent.indexOf("rv:11")},qq.edge=function(){return navigator.userAgent.indexOf("Edge")>=0},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.edge()&&!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios6=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios8=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")},qq.ios800=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.iosChrome=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf("CriOS")},qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")},qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=(e=document.createElement("div"),function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}),qq.each=function(e,t){var n;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&!1!==t(e.key(n),e.getItem(e.key(n)));n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&!1!==t(n,e[n]);n++);else if(qq.isString(e))for(n=0;n<e.length&&!1!==t(n,e.charAt(n));n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t(n,e[n]))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var i=qq.extend([],n);return arguments.length&&(i=i.concat(Array.prototype.slice.call(arguments))),e.apply(t,i)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var i=[],r="&",o=function(e,n){var r=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==r&&"undefined"!==n&&i.push("object"==typeof e?qq.obj2url(e,r,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(r)+"="+encodeURIComponent(e()):encodeURIComponent(r)+"="+encodeURIComponent(e))};return!n&&t?(r=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",i.push(t),i.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&void 0!==e||null!=e&&"object"==typeof e?qq.each(e,(function(e,t){o(t,e)})):i.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?i.join(r):i.join(r).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,(function(e,i){e=n?n+"["+e+"]":e,qq.isObject(i)?qq.obj2FormData(i,t,e):qq.isFunction(i)?t.append(e,i()):t.append(e,i)})),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,i){(n=document.createElement("input")).setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}}),t},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;if(t>0)return e.substr(t,e.length-t)},qq.getFilename=function(e){return qq.isInput(e)?e.value.replace(/.*(\/|\\)/,""):qq.isFile(e)&&null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do{(t=e.shift())&&t()}while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}}(),function(){"use strict";void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return qq}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(),function(){"use strict";qq.Error=function(e){this.message="[Fine Uploader "+qq.version+"] "+e},qq.Error.prototype=new Error}(),qq.version="5.14.1",qq.supportedFeatures=function(){"use strict";function e(){return!!window.XMLHttpRequest&&void 0!==qq.createXhrInstance().withCredentials}function t(){return void 0!==window.XDomainRequest}var n,i,r,o,s,a,u,c,l,d,h,p,f,g,m;return n=function(){var e,t=!0;try{(e=document.createElement("input")).type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(e){t=!1}return t}(),i=(o=n&&qq.isXhrUploadSupported())&&!qq.androidStock(),r=o&&function(){var e=document.createElement("span");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!qq.android()&&!qq.ios()}(),s=r&&(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/),a=o&&qq.isFileChunkingSupported(),u=o&&a&&function(){try{return!!window.localStorage&&qq.isFunction(window.localStorage.setItem)}catch(e){return!1}}(),c=o&&(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/),l=n&&(void 0!==window.postMessage||o),h=e(),d=t(),p=!!e()||t(),f=void 0!==document.createElement("input").webkitdirectory,g=o&&void 0!==window.FileReader,m=!!o&&!qq.androidStock()&&!qq.iosChrome(),{ajaxUploading:o,blobUploading:i,canDetermineSize:o,chunking:a,deleteFileCors:p,deleteFileCorsXdr:d,deleteFileCorsXhr:h,dialogElement:!!window.HTMLDialogElement,fileDrop:r,folderDrop:s,folderSelection:f,imagePreviews:g,imageValidation:g,itemSizeValidation:o,pause:a,progressBar:m,resume:u,scaling:g&&i,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:n,uploadCors:l,uploadCustomHeaders:o,uploadNonMultipart:o,uploadViaPaste:c}}(),qq.isGenericPromise=function(e){"use strict";return!!(e&&e.then&&qq.isFunction(e.then))},qq.Promise=function(){"use strict";var e,t,n=[],i=[],r=[],o=0;qq.extend(this,{then:function(r,s){return 0===o?(r&&n.push(r),s&&i.push(s)):-1===o?s&&s.apply(null,t):r&&r.apply(null,e),this},done:function(n){return 0===o?r.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return o=1,e=arguments,n.length&&qq.each(n,(function(t,n){n.apply(null,e)})),r.length&&qq.each(r,(function(t,n){n.apply(null,e)})),this},failure:function(){return o=-1,t=arguments,i.length&&qq.each(i,(function(e,n){n.apply(null,t)})),r.length&&qq.each(r,(function(e,n){n.apply(null,t)})),this}})},qq.BlobProxy=function(e,t){"use strict";qq.extend(this,{referenceBlob:e,create:function(){return t(e)}})},qq.UploadButton=function(e){"use strict";function t(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,i),e.setAttribute("title",s.title),r.setMultiple(s.multiple,e),s.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),s.acceptFiles&&e.setAttribute("accept",s.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",s.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),!qq.ie7()&&qq(e).css({height:"100%"}),s.element.appendChild(e),o.attach(e,"change",(function(){s.onChange(e)})),o.attach(e,"mouseover",(function(){qq(s.element).addClass(s.hoverClass)})),o.attach(e,"mouseout",(function(){qq(s.element).removeClass(s.hoverClass)})),o.attach(e,"focus",(function(){qq(s.element).addClass(s.focusClass)})),o.attach(e,"blur",(function(){qq(s.element).removeClass(s.focusClass)})),e}var n,i,r=this,o=new qq.DisposeSupport,s={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(e){},title:null};qq.extend(s,e),i=qq.getUniqueId(),qq(s.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),qq.extend(this,{getInput:function(){return n},getButtonId:function(){return i},setMultiple:function(e,t){var n=t||this.getInput();s.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())||e?n.setAttribute("multiple",""):n.removeAttribute("multiple")},setAcceptFiles:function(e){e!==s.acceptFiles&&n.setAttribute("accept",e)},reset:function(){n.parentNode&&qq(n).remove(),qq(s.element).removeClass(s.focusClass),n=null,n=t()}}),n=t()},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){"use strict";var t=[],n={},i={},r={},o={};qq.extend(this,{addFile:function(s){var a=s.status||qq.status.SUBMITTING,u=t.push({name:s.name,originalName:s.name,uuid:s.uuid,size:null==s.size?-1:s.size,status:a})-1;return s.batchId&&(t[u].batchId=s.batchId,void 0===o[s.batchId]&&(o[s.batchId]=[]),o[s.batchId].push(u)),s.proxyGroupId&&(t[u].proxyGroupId=s.proxyGroupId,void 0===r[s.proxyGroupId]&&(r[s.proxyGroupId]=[]),r[s.proxyGroupId].push(u)),t[u].id=u,n[s.uuid]=u,void 0===i[a]&&(i[a]=[]),i[a].push(u),e.onStatusChange(u,null,a),u},retrieve:function(e){return qq.isObject(e)&&t.length?void 0!==e.id?function(e){if(qq.isArray(e)){var n=[];return qq.each(e,(function(e,i){n.push(t[i])})),n}return t[e]}(e.id):void 0!==e.uuid?function(e){if(qq.isArray(e)){var i=[];return qq.each(e,(function(e,r){i.push(t[n[r]])})),i}return t[n[e]]}(e.uuid):e.status?function(e){var n=[],r=[].concat(e);return qq.each(r,(function(e,r){var o=i[r];void 0!==o&&qq.each(o,(function(e,i){n.push(t[i])}))})),n}(e.status):void 0:qq.extend([],t,!0)},reset:function(){t=[],n={},i={},o={}},setStatus:function(n,r){var o=t[n].status,s=qq.indexOf(i[o],n);i[o].splice(s,1),t[n].status=r,void 0===i[r]&&(i[r]=[]),i[r].push(n),e.onStatusChange(n,o,r)},uuidChanged:function(e,i){var r=t[e].uuid;t[e].uuid=i,n[i]=e,delete n[r]},updateName:function(e,n){t[e].name=n},updateSize:function(e,n){t[e].size=n},setParentId:function(e,n){t[e].parentId=n},getIdsInProxyGroup:function(e){var n=t[e].proxyGroupId;return n?r[n]:[]},getIdsInBatch:function(e){var n=t[e].batchId;return o[n]}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={addBlobs:function(e,t,n){this.addFiles(e,t,n)},addInitialFiles:function(e){var t=this;qq.each(e,(function(e,n){t._addCannedFile(n)}))},addFiles:function(e,t,n){this._maybeHandleIos8SafariWorkaround();var i=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId,r=qq.bind((function(e){this._handleNewFile({blob:e,name:this._options.blobs.defaultName},i,l)}),this),o=qq.bind((function(e){this._handleNewFile(e,i,l)}),this),s=qq.bind((function(e){var t=qq.canvasToBlob(e);this._handleNewFile({blob:t,name:this._options.blobs.defaultName+".png"},i,l)}),this),a=qq.bind((function(e){var t=e.quality&&e.quality/100,n=qq.canvasToBlob(e.canvas,e.type,t);this._handleNewFile({blob:n,name:e.name},i,l)}),this),u=qq.bind((function(e){if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading){var t=Array.prototype.slice.call(e.files),n=this;qq.each(t,(function(e,t){n._handleNewFile(t,i,l)}))}else this._handleNewFile(e,i,l)}),this),c=this,l=[];this._currentBatchId=i,e&&(qq.isFileList(e)&&(e=Array.prototype.slice.call(e)),e=[].concat(e),qq.each(e,(function(e,t){qq.isFileOrInput(t)?u(t):qq.isBlob(t)?r(t):qq.isObject(t)?t.blob&&t.name?o(t):t.canvas&&t.name&&a(t):t.tagName&&"canvas"===t.tagName.toLowerCase()?s(t):c.log(t+" is not a valid file container!  Ignoring!","warn")})),this.log("Received "+l.length+" files."),this._prepareItemsForUpload(l,t,n))},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,(function(e,n){t.cancel(n)})),this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});return!(!qq.supportedFeatures.pause||!this._options.chunking.enabled||(t.status===qq.status.PAUSED?(this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e))),this._uploadFile(e),0):(this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error"),1)))},deleteFile:function(e){return this._onSubmitDelete(e)},doesExist:function(e){return this._handler.isValid(e)},drawThumbnail:function(e,t,n,i,r){var o,s,a=new qq.Promise;return this._imageGenerator?(o=this._thumbnailUrls[e],s={customResizeFunction:r,maxSize:n>0?n:null,scale:n>0},!i&&qq.supportedFeatures.imagePreviews&&(o=this.getFile(e)),null==o?a.failure({container:t,error:"File or URL not found."}):this._imageGenerator.generate(o,t,s).then((function(e){a.success(e)}),(function(e,t){a.failure({container:e,error:t||"Problem generating thumbnail"})}))):a.failure({container:t,error:"Missing image generator module"}),a},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},getEndpoint:function(e){return this._endpointStore.get(e)},getFile:function(e){return this._handler.getFile(e)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(e){return this._uploadData.retrieve({id:e}).name},getParentId:function(e){var t=this.getUploads({id:e}),n=null;return t&&void 0!==t.parentId&&(n=t.parentId),n},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._uploadData.retrieve({id:e}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var e=this._currentItemLimit;return e>0?e-this._netUploadedOrQueued:null},getUploads:function(e){return this._uploadData.retrieve(e)},getUuid:function(e){return this._uploadData.retrieve({id:e}).uuid},log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[Fine Uploader "+qq.version+"] "+e,t):qq.log("[Fine Uploader "+qq.version+"] "+e)},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e))return this._uploadData.setStatus(e,qq.status.PAUSED),!0;this.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}else this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error");return!1},removeFileRef:function(e){this._handler.expunge(e)},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,(function(e,t){t.reset()})),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset(),this._options.session.refreshOnReset&&this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._totalProgress&&this._totalProgress.reset()},retry:function(e){return this._manualRetry(e)},scaleImage:function(e,t){var n=this;return qq.Scaler.prototype.scaleImage(e,t,{log:qq.bind(n.log,n),getFile:qq.bind(n.getFile,n),uploadData:n._uploadData})},setCustomHeaders:function(e,t){this._customHeadersStore.set(e,t)},setDeleteFileCustomHeaders:function(e,t){this._deleteFileCustomHeadersStore.set(e,t)},setDeleteFileEndpoint:function(e,t){this._deleteFileEndpointStore.set(e,t)},setDeleteFileParams:function(e,t){this._deleteFileParamsStore.set(e,t)},setEndpoint:function(e,t){this._endpointStore.set(e,t)},setForm:function(e){this._updateFormSupportAndParams(e)},setItemLimit:function(e){this._currentItemLimit=e},setName:function(e,t){this._uploadData.updateName(e,t)},setParams:function(e,t){this._paramsStore.set(e,t)},setUuid:function(e,t){return this._uploadData.uuidChanged(e,t)},setStatus:function(e,t){if(!this.getUploads({id:e}))throw new qq.Error(e+" is not a valid file ID.");switch(t){case qq.status.DELETED:this._onDeleteComplete(e,null,!1);break;case qq.status.DELETE_FAILED:this._onDeleteComplete(e,null,!0);break;default:var n="Method setStatus called on '"+name+"' not implemented yet for "+t;throw this.log(n),new qq.Error(n)}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}},qq.basePrivateApi={_addCannedFile:function(e){var t=this._uploadData.addFile({uuid:e.uuid,name:e.name,size:e.size,status:qq.status.UPLOAD_SUCCESSFUL});return e.deleteFileEndpoint&&this.setDeleteFileEndpoint(e.deleteFileEndpoint,t),e.deleteFileParams&&this.setDeleteFileParams(e.deleteFileParams,t),e.thumbnailUrl&&(this._thumbnailUrls[t]=e.thumbnailUrl),this._netUploaded++,this._netUploadedOrQueued++,t},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,i){e._onDeleteComplete(t,n,i),e._options.callbacks.onDeleteComplete(t,n,i)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createStore:function(e,t){var n={},i=e,r={},o=t,s=function(e){return qq.isObject(e)?qq.extend({},e):e};return{set:function(e,t){null==t?(n={},i=s(e)):n[t]=s(e)},get:function(e){var t;return function(e,t){o&&qq.isObject(t)&&qq.extend(t,qq.isFunction(o)?o():o),r[e]&&qq.extend(t,r[e])}(e,t=null!=e&&n[e]?n[e]:s(i)),s(t)},addReadOnly:function(e,t){qq.isObject(n)&&(null===e?qq.isFunction(t)?o=t:(o=o||{},qq.extend(o,t)):(r[e]=r[e]||{},qq.extend(r[e],t)))},remove:function(e){return delete n[e]},reset:function(){n={},r={},i=e}}},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,i){e._onUploadStatusChange(t,n,i),e._options.callbacks.onStatusChange(t,n,i),e._maybeAllComplete(t,i),e._totalProgress&&setTimeout((function(){e._totalProgress.onStatusChange(t,n,i)}),0)}})},_createUploadButton:function(e){var t,n=this,i=e.accept||this._options.validation.acceptFiles,r=e.allowedExtensions||this._options.validation.allowedExtensions;return t=new qq.UploadButton({acceptFiles:i,element:e.element,focusClass:this._options.classes.buttonFocus,folders:e.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,multiple:!!qq.supportedFeatures.ajaxUploading&&!(n._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&n._isAllowedExtension(r,".mov"))&&(void 0===e.multiple?n._options.multiple:e.multiple),name:this._options.request.inputName,onChange:function(e){n._onInputChange(e)},title:null==e.title?this._options.text.fileInputTitle:e.title}),this._disposeSupport.addDisposer((function(){t.dispose()})),n._buttons.push(t),t},_createUploadHandler:function(e,t){var n=this,i={},r={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(n.log,n),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(e,t,r,o){r<0||o<0||(i[e]&&i[e].loaded===r&&i[e].total===o||(n._onProgress(e,t,r,o),n._options.callbacks.onProgress(e,t,r,o)),i[e]={loaded:r,total:o})},onComplete:function(e,t,r,o){delete i[e];var s,a=n.getUploads({id:e}).status;a!==qq.status.UPLOAD_SUCCESSFUL&&a!==qq.status.UPLOAD_FAILED&&((s=n._onComplete(e,t,r,o))instanceof qq.Promise?s.done((function(){n._options.callbacks.onComplete(e,t,r,o)})):n._options.callbacks.onComplete(e,t,r,o))},onCancel:function(e,t,i){var r=new qq.Promise;return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onFailure:r.failure,onSuccess:function(){i.then((function(){n._onCancel(e,t)})),r.success()},identifier:e}),r},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(e,t){n._onUpload(e,t),n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,i){n._onUploadChunk(e,i),n._options.callbacks.onUploadChunk(e,t,i)},onUploadChunkSuccess:function(e,t,i,r){n._options.callbacks.onUploadChunkSuccess.apply(n,arguments)},onResume:function(e,t,i){return n._options.callbacks.onResume(e,t,i)},onAutoRetry:function(e,t,i,r){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n.log("Server requested UUID change from '"+n.getUuid(e)+"' to '"+t+"'"),n.setUuid(e,t)},getName:qq.bind(n.getName,n),getUuid:qq.bind(n.getUuid,n),getSize:qq.bind(n.getSize,n),setSize:qq.bind(n._setSize,n),getDataByUuid:function(e){return n.getUploads({uuid:e})},isQueued:function(e){var t=n.getUploads({id:e}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:n._uploadData.getIdsInProxyGroup,getIdsInBatch:n._uploadData.getIdsInBatch};return qq.each(this._options.request,(function(e,t){r[e]=t})),r.customHeaders=this._customHeadersStore,e&&qq.each(e,(function(e,t){r[e]=t})),new qq.UploadHandlerController(r,t)},_fileOrBlobRejected:function(e){this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.REJECTED)},_formatSize:function(e){if(0===e)return e+this._options.text.sizeSymbols[0];var t=-1;do{e/=1e3,t++}while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,(function(t,n){var i=n.multiple,r=qq.extend({},e._options.validation,!0),o=qq.extend({},n);void 0===i&&(i=e._options.multiple),o.validation&&qq.extend(r,n.validation,!0),qq.extend(o,{multiple:i,validation:r},!0),e._initExtraButton(o)}))},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_getButtonId:function(e){var t,n,i=e;if(i instanceof qq.BlobProxy&&(i=i.referenceBlob),i&&!qq.isBlob(i)){if(qq.isFile(i))return i.qqButtonId;if("input"===i.tagName.toLowerCase()&&"file"===i.type.toLowerCase())return i.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=i.getElementsByTagName("input"),qq.each(t,(function(e,t){if("file"===t.getAttribute("type"))return n=t,!1})),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation},_getValidationDescriptor:function(e){return e.file instanceof qq.BlobProxy?{name:qq.getFilename(e.file.referenceBlob),size:e.file.referenceBlob.size}:{name:this.getUploads({id:e.id}).name,size:this.getUploads({id:e.id}).size}},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,(function(e,i){n.push(t._getValidationDescriptor(i))})),n},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,n=t?this._getButtonId(t):this._defaultButtonId,i=this._options;n&&n!==this._defaultButtonId&&(i=this._extraButtonSpecs[n]),i.multiple=!1,null===i.validation.acceptFiles?i.validation.acceptFiles=e:i.validation.acceptFiles+=","+e,qq.each(this._buttons,(function(e,t){if(t.getButtonId()===n)return t.setMultiple(i.multiple),t.setAcceptFiles(i.acceptFiles),!1}))}},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isGenericPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then((function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)}),(function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)}))):(!1!==n?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_handleNewFile:function(e,t,n){var i=this,r=qq.getUniqueId(),o=-1,s=qq.getFilename(e),a=e.blob||e,u=this._customNewFileHandler?this._customNewFileHandler:qq.bind(i._handleNewFileGeneric,i);!qq.isInput(a)&&a.size>=0&&(o=a.size),u(a,s,r,o,n,t,this._options.request.uuidName,{uploadData:i._uploadData,paramsStore:i._paramsStore,addFileToHandler:function(e,t){i._handler.add(e,t),i._netUploadedOrQueued++,i._trackButton(e)}})},_handleNewFileGeneric:function(e,t,n,i,r,o){var s=this._uploadData.addFile({uuid:n,name:t,size:i,batchId:o});this._handler.add(s,e),this._trackButton(s),this._netUploadedOrQueued++,r.push({id:s,file:e})},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],i=t;null==i&&(i=this._options.paste.defaultName),i+="."+n,this.addFiles({name:i,blob:e})},_handleDeleteSuccess:function(e){if(this.getUploads({id:e}).status!==qq.status.DELETED){var t=this.getName(e);this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+t+"' has succeeded.")}},_handleDeleteFailed:function(e,t){var n=this.getName(e);this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+n+"' has failed.","error"),t&&void 0!==t.withCredentials?this._options.callbacks.onError(e,n,"Delete request failed with response code "+t.status,t):this._options.callbacks.onError(e,n,"Delete request failed",t)},_initExtraButton:function(e){var t=this._createUploadButton({accept:e.validation.acceptFiles,allowedExtensions:e.validation.allowedExtensions,element:e.element,folders:e.folders,multiple:e.multiple,title:e.fileInputTitle});this._extraButtonSpecs[t.getButtonId()]=e},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return!(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled||this._options.cors.expected&&!qq.supportedFeatures.deleteFileCorsXhr&&(!qq.supportedFeatures.deleteFileCorsXdr||!this._options.cors.allowXdr))},_isAllowedExtension:function(e,t){var n=!1;return!e.length||(qq.each(e,(function(e,i){if(qq.isString(i)){var r=new RegExp("\\."+i+"$","i");if(null!=t.match(r))return n=!0,!1}})),n)},_itemError:function(e,t,n){function i(e,t){s=s.replace(e,t)}var r,o,s=this._options.messages[e],a=[],u=[].concat(t),c=u[0],l=this._getButtonId(n),d=this._getValidationBase(l);return qq.each(d.allowedExtensions,(function(e,t){qq.isString(t)&&a.push(t)})),r=a.join(", ").toLowerCase(),i("{file}",this._options.formatFileName(c)),i("{extensions}",r),i("{sizeLimit}",this._formatSize(d.sizeLimit)),i("{minSizeLimit}",this._formatSize(d.minSizeLimit)),null!==(o=s.match(/(\{\w+\})/g))&&qq.each(o,(function(e,t){i(t,u[e])})),this._options.callbacks.onError(null,c,s,void 0),s},_manualRetry:function(e,t){if(this._onBeforeManualRetry(e))return this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0},_maybeAllComplete:function(e,t){var n=this,i=this._getNotFinished();t===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(e):t===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(e),0===i&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout((function(){n._onAllComplete(n._succeededSinceLastAllComplete,n._failedSinceLastAllComplete)}),0)},_maybeHandleIos8SafariWorkaround:function(){var e=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari())throw setTimeout((function(){window.alert(e._options.messages.unsupportedBrowserIos8Safari)}),0),new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)},_maybeParseAndSendUploadError:function(e,t,n,i){if(!n.success)if(i&&200!==i.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+i.status,i);else{var r=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,r,i)}},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,i,r){var o=this;if(t.length>n)if(e||!this._options.validation.stopOnFirstInvalidFile)setTimeout((function(){var e=o._getValidationDescriptor(t[n]),s=o._getButtonId(t[n].file),a=o._getButton(s);o._handleCheckedCallback({name:"onValidate",callback:qq.bind(o._options.callbacks.onValidate,o,e,a),onSuccess:qq.bind(o._onValidateCallbackSuccess,o,t,n,i,r),onFailure:qq.bind(o._onValidateCallbackFailure,o,t,n,i,r),identifier:"Item '"+e.name+"', size: "+e.size})}),0);else if(!e)for(;n<t.length;n++)o._fileOrBlobRejected(t[n].id)},_onAllComplete:function(e,t){this._totalProgress&&this._totalProgress.onAllComplete(e,t,this._preventRetries),this._options.callbacks.onAllComplete(qq.extend([],e),qq.extend([],t)),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[]},_onAutoRetry:function(e,t,n,i,r){var o=this;if(o._preventRetries[e]=n[o._options.retry.preventRetryResponseProperty],o._shouldAutoRetry(e,t,n)){var s=1e3*o._options.retry.autoAttemptDelay;return o._maybeParseAndSendUploadError.apply(o,arguments),o._options.callbacks.onAutoRetry(e,t,o._autoRetries[e]),o._onBeforeAutoRetry(e,t),o._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),o._retryTimeouts[e]=setTimeout((function(){o.log("Starting retry for "+t+"..."),r?r(e):o._handler.retry(e)}),s),!0}},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(e){var t,n=this._currentItemLimit;return this._preventRetries[e]?(this.log("Retries are forbidden for id "+e,"warn"),!1):this._handler.isValid(e)?(t=this.getName(e),!1!==this._options.callbacks.onManualRetry(e,t)&&(n>0&&this._netUploadedOrQueued+1>n?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+t+"' (id: "+e+")..."),!0))):(this.log("'"+e+"' is not a valid file ID","error"),!1)},_onCancel:function(e,t){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[e]);var n=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&n>=0&&this._storedIds.splice(n,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_onComplete:function(e,t,n,i){return n.success?(n.thumbnailUrl&&(this._thumbnailUrls[e]=n.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED),!0===n[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[e]=!0)),this._maybeParseAndSendUploadError(e,t,n,i),!!n.success},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){this.getName(e),n?this._handleDeleteFailed(e,t):this._handleDeleteSuccess(e)},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else e.value.length>0&&this.addFiles(e);qq.each(this._buttons,(function(e,t){t.reset()}))},_onProgress:function(e,t,n,i){this._totalProgress&&this._totalProgress.onIndividualProgress(e,n,i)},_onSubmit:function(e,t){},_onSubmitCallbackSuccess:function(e,t){this._onSubmit.apply(this,arguments),this._uploadData.setStatus(e,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(e)):(this._storeForLater(e),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(e,t,n){var i,r=this.getUuid(e);return t&&(i=qq.bind(t,this,e,r,n)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:i||qq.bind(this._deleteHandler.sendDelete,this,e,r,n),identifier:e}),!0):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onSubmitted:function(e){},_onTotalProgress:function(e,t){this._options.callbacks.onTotalProgress(e,t)},_onUploadPrep:function(e){},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(e,t){},_onUploadStatusChange:function(e,t,n){n===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[e])},_onValidateBatchCallbackFailure:function(e){var t=this;qq.each(e,(function(e,n){t._fileOrBlobRejected(n.id)}))},_onValidateBatchCallbackSuccess:function(e,t,n,i,r){var o,s=this._currentItemLimit,a=this._netUploadedOrQueued;0===s||a<=s?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],r),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,i),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,i),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(t),o=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,a).replace(/\{itemLimit\}/g,s),this._batchError(o))},_onValidateCallbackFailure:function(e,t,n,i){var r=t+1;this._fileOrBlobRejected(e[t].id,e[t].file.name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,r,n,i)},_onValidateCallbackSuccess:function(e,t,n,i){var r=this,o=t+1,s=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],s).then((function(){r._upload(e[t].id,n,i),r._maybeProcessNextItemAfterOnValidateCallback(!0,e,o,n,i)}),(function(){r._maybeProcessNextItemAfterOnValidateCallback(!1,e,o,n,i)}))},_prepareItemsForUpload:function(e,t,n){if(0!==e.length){var i=this._getValidationDescriptors(e),r=this._getButtonId(e[0].file),o=this._getButton(r);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,i,o),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,i,e,t,n,o),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,e),identifier:"batch validation"})}else this._itemError("noFilesError")},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",(function(t){if(e.getInProgress())return(t=t||window.event).returnValue=e._options.messages.onLeave,e._options.messages.onLeave}))},_refreshSessionData:function(){var e=this,t=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(t,{cors:this._options.cors}),t.log=qq.bind(this.log,this),t.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(t)),setTimeout((function(){e._session.refresh().then((function(t,n){e._sessionRequestComplete(),e._options.callbacks.onSessionRequestComplete(t,!0,n)}),(function(t,n){e._options.callbacks.onSessionRequestComplete(t,!1,n)}))}),0))},_sessionRequestComplete:function(){},_setSize:function(e,t){this._uploadData.updateSize(e,t),this._totalProgress&&this._totalProgress.onNewSize(e)},_shouldAutoRetry:function(e,t,n){var i=this._uploadData.retrieve({id:e});return!!(!this._preventRetries[e]&&this._options.retry.enableAuto&&i.status!==qq.status.PAUSED&&(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts))&&(this._autoRetries[e]+=1,!0)},_storeForLater:function(e){this._storedIds.push(e)},_trackButton:function(e){var t;(t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)))&&(this._buttonIdsForFileIds[e]=t)},_updateFormSupportAndParams:function(e){this._options.form.element=e,this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(e,t,n){var i=this.getName(e);t&&this.setParams(t,e),n&&this.setEndpoint(n,e),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,e,i),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,e,i),onFailure:qq.bind(this._fileOrBlobRejected,this,e,i),identifier:e})},_uploadFile:function(e){this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED)},_uploadStoredFiles:function(){for(var e,t,n=this;this._storedIds.length;)e=this._storedIds.shift(),this._uploadFile(e);(t=this.getUploads({status:qq.status.SUBMITTING}).length)&&(qq.log("Still waiting for "+t+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout((function(){n._uploadStoredFiles()}),1e3))},_validateFileOrBlobData:function(e,t){var n=this,i=e.file instanceof qq.BlobProxy?e.file.referenceBlob:e.file,r=t.name,o=t.size,s=this._getButtonId(e.file),a=this._getValidationBase(s),u=new qq.Promise;return u.then((function(){}),(function(){n._fileOrBlobRejected(e.id,r)})),qq.isFileOrInput(i)&&!this._isAllowedExtension(a.allowedExtensions,r)?(this._itemError("typeError",r,i),u.failure()):this._options.validation.allowEmpty||0!==o?o>0&&a.sizeLimit&&o>a.sizeLimit?(this._itemError("sizeError",r,i),u.failure()):o>0&&o<a.minSizeLimit?(this._itemError("minSizeError",r,i),u.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(i)?new qq.ImageValidation(i,qq.bind(n.log,n)).validate(a.image).then(u.success,(function(e){n._itemError(e+"ImageError",r,i),u.failure()})):u.success(),u):(this._itemError("emptyError",r,i),u.failure())},_wrapCallbacks:function(){var e,t,n;for(n in e=this,t=function(t,n,i){var r;try{return n.apply(e,i)}catch(n){r=n.message||n.toString(),e.log("Caught exception in '"+t+"' callback - "+r,"error")}},this._options.callbacks)!function(){var i,r;i=n,r=e._options.callbacks[i],e._options.callbacks[i]=function(){return t(i,r,arguments)}}()}}}(),function(){"use strict";qq.FineUploaderBasic=function(e){var t=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",params:{},paramsInBody:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,n,i){},onAllComplete:function(e,t){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,i){},onResume:function(e,t,n){},onProgress:function(e,t,n,i){},onTotalProgress:function(e,t){},onError:function(e,t,n,i){},onAutoRetry:function(e,t,n){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,n){},onPasteReceived:function(e){},onStatusChange:function(e,t,n){},onSessionRequestComplete:function(e,t,n){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2e6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return e},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._initFormSupportAndParams(),this._customHeadersStore=this._createStore(this._options.request.customHeaders),this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders),this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params),this._endpointStore=this._createStore(this._options.request.endpoint),this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found","error")),this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this)),this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{},this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)),qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),(function(e){var n=t._uploadData.retrieve({id:e});return n&&n.size||0}))),this._currentItemLimit=this._options.validation.itemLimit},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(e){"use strict";function t(e){return p.cors.expected&&void 0===e.withCredentials}function n(e,t){var n=h[e].xhr;return n||(n=t||(p.cors.expected?function(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&void 0===(e=qq.createXhrInstance()).withCredentials&&((e=new XDomainRequest).onload=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onprogress=function(){}),e}():qq.createXhrInstance()),h[e].xhr=n),n}function i(e){var t=qq.indexOf(d,e),n=p.maxConnections;delete h[e],d.splice(t,1),d.length>=n&&t<n&&o(d[n-1])}function r(e,r){var o=n(e),s=p.method,a=!0===r;i(e),a?c(s+" request for "+e+" has failed","error"):t(o)||function(e){return qq.indexOf(p.successfulResponseCodes[p.method],e)>=0}(o.status)||(a=!0,c(s+" request for "+e+" has failed - response code "+o.status,"error")),p.onComplete(e,o,a)}function o(e,i){var r,o=n(e,i),d=p.method,f=function(e){var t,n=h[e].additionalParams,i=p.mandatedParams;return p.paramsStore.get&&(t=p.paramsStore.get(e)),n&&qq.each(n,(function(e,n){(t=t||{})[e]=n})),i&&qq.each(i,(function(e,n){(t=t||{})[e]=n})),t}(e),g=h[e].payload;return p.onSend(e),r=function(e,t,n){var i=p.endpointStore.get(e),r=h[e].addToPath;return null!=r&&(i+="/"+r),l&&t&&(i=qq.obj2url(t,i)),n&&(i=qq.obj2url(n,i)),i}(e,f,h[e].additionalQueryParams),t(o)?(o.onload=a(e),o.onerror=u(e)):o.onreadystatechange=s(e),function(e){var t=p.onProgress;t&&(n(e).upload.onprogress=function(n){n.lengthComputable&&t(e,n.loaded,n.total)})}(e),o.open(d,r,!0),p.cors.expected&&p.cors.sendCredentials&&!t(o)&&(o.withCredentials=!0),function(e){var i=n(e),r=p.customHeaders,o=h[e].additionalHeaders||{},s=p.method,a={};t(i)||(p.acceptHeader&&i.setRequestHeader("Accept",p.acceptHeader),p.allowXRequestedWithAndCacheControl&&(p.cors.expected&&qq.indexOf(["GET","POST","HEAD"],p.method)>=0&&!function(){var e=!1;return qq.each(e,(function(t,n){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0)return e=!0,!1})),e}()||(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Cache-Control","no-cache"))),!p.contentType||"POST"!==s&&"PUT"!==s||i.setRequestHeader("Content-Type",p.contentType),qq.extend(a,qq.isFunction(r)?r(e):r),qq.extend(a,o),qq.each(a,(function(e,t){i.setRequestHeader(e,t)})))}(e),c("Sending "+d+" request for "+e),g?o.send(g):l||!f?o.send():f&&p.contentType&&p.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?o.send(qq.obj2url(f,"")):f&&p.contentType&&p.contentType.toLowerCase().indexOf("application/json")>=0?o.send(JSON.stringify(f)):o.send(f),o}function s(e){return function(){4===n(e).readyState&&r(e)}}function a(e){return function(){r(e)}}function u(e){return function(){r(e,!0)}}var c,l,d=[],h={},p={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,n){},onProgress:null};if(qq.extend(p,e),c=p.log,qq.indexOf(p.validMethods,p.method)<0)throw new Error("'"+p.method+"' is not a supported method for this type of request!");l="GET"===p.method||"DELETE"===p.method,qq.extend(this,{initTransport:function(e){var t,n,i,r,s,a;return{withPath:function(e){return t=e,this},withParams:function(e){return n=e,this},withQueryParams:function(e){return a=e,this},withHeaders:function(e){return i=e,this},withPayload:function(e){return r=e,this},withCacheBuster:function(){return s=!0,this},send:function(u){return s&&qq.indexOf(["GET","DELETE"],p.method)>=0&&(n.qqtimestamp=(new Date).getTime()),function(e,t,n,i,r,s,a){if(h[e]={addToPath:n,additionalParams:i,additionalQueryParams:r,additionalHeaders:s,payload:a},d.push(e)<=p.maxConnections)return o(e,t)}(e,u,t,n,a,i,r)}}},canceled:function(e){i(e)}})},qq.UploadHandler=function(e){"use strict";var t=e.proxy,n={},i=t.onCancel,r=t.getName;qq.extend(this,{add:function(e,t){n[e]=t,n[e].temp={}},cancel:function(e){var t=this,o=new qq.Promise;i(e,r(e),o).then((function(){t.isValid(e)&&(n[e].canceled=!0,t.expunge(e)),o.success()}))},expunge:function(e){delete n[e]},getThirdPartyFileId:function(e){return n[e].key},isValid:function(e){return void 0!==n[e]},reset:function(){n={}},_getFileState:function(e){return n[e]},_setThirdPartyFileId:function(e,t){n[e].key=t},_wasCanceled:function(e){return!!n[e].canceled}})},qq.UploadHandlerController=function(e,t){"use strict";var n,i,r,o=this,s=!1,a=!1,u={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(e,t){},onProgress:function(e,t,n,i){},onComplete:function(e,t,n,i){},onCancel:function(e,t){},onUploadPrep:function(e){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,i){},onAutoRetry:function(e,t,n,i){},onResume:function(e,t,n){},onUuidChanged:function(e,t){},getName:function(e){},setSize:function(e,t){},isQueued:function(e){},getIdsInProxyGroup:function(e){},getIdsInBatch:function(e){}},c={done:function(e,t,n,i){var o=r._getChunkData(e,t);r._getFileState(e).attemptingResume=!1,delete r._getFileState(e).temp.chunkProgress[t],r._getFileState(e).loaded+=o.size,u.onUploadChunkSuccess(e,r._getChunkDataForCallback(o),n,i)},finalize:function(e){var t=u.getSize(e),n=u.getName(e);i("All chunks have been uploaded for "+e+" - finalizing...."),r.finalizeChunks(e).then((function(o,s){i("Finalize successful for "+e);var a=d.normalizeResponse(o,!0);u.onProgress(e,n,t,t),r._maybeDeletePersistedChunkData(e),d.cleanup(e,a,s)}),(function(t,r){var o=d.normalizeResponse(t,!1);i("Problem finalizing chunks for file ID "+e+" - "+o.error,"error"),o.reset&&c.reset(e),u.onAutoRetry(e,n,o,r)||d.cleanup(e,o,r)}))},handleFailure:function(e,t,n,o){var s=u.getName(t);i("Chunked upload request failed for "+t+", chunk "+e),r.clearCachedChunk(t,e);var h,p=d.normalizeResponse(n,!1);p.reset?c.reset(t):(h=qq.indexOf(r._getFileState(t).chunking.inProgress,e))>=0&&(r._getFileState(t).chunking.inProgress.splice(h,1),r._getFileState(t).chunking.remaining.unshift(e)),r._getFileState(t).temp.ignoreFailure||(a&&(r._getFileState(t).temp.ignoreFailure=!0,i(qq.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(r._getXhrs(t))),JSON.stringify(r._getFileState(t).chunking.inProgress))),qq.each(r._getXhrs(t),(function(e,n){i(qq.format("Attempting to abort file {}.{}. XHR readyState {}. ",t,e,n.readyState)),n.abort(),n._cancelled=!0})),r.moveInProgressToRemaining(t),l.free(t,!0)),u.onAutoRetry(t,s,p,o)||d.cleanup(t,p,o))},hasMoreParts:function(e){return!!r._getFileState(e).chunking.remaining.length},nextPart:function(e){var t=r._getFileState(e).chunking.remaining.shift();return t>=r._getTotalChunks(e)&&(t=null),t},reset:function(e){i("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+e,"error"),r._maybeDeletePersistedChunkData(e),r.reevaluateChunking(e),r._getFileState(e).loaded=0},sendNext:function(e){var t=u.getSize(e),n=u.getName(e),o=c.nextPart(e),s=r._getChunkData(e,o),h=r._getFileState(e).attemptingResume,p=r._getFileState(e).chunking.inProgress||[];null==r._getFileState(e).loaded&&(r._getFileState(e).loaded=0),h&&!1===u.onResume(e,n,s)&&(c.reset(e),o=c.nextPart(e),s=r._getChunkData(e,o),h=!1),null==o&&0===p.length?c.finalize(e):(i(qq.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",e,o,s.start+1,s.end,t)),u.onUploadChunk(e,n,r._getChunkDataForCallback(s)),p.push(o),r._getFileState(e).chunking.inProgress=p,a&&l.open(e,o),a&&l.available()&&r._getFileState(e).chunking.remaining.length&&c.sendNext(e),0===s.blob.size?(i(qq.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",o,e),"error"),c.handleFailure(o,e,"File is no longer available",null)):r.uploadChunk(e,o,h).then((function(t,n){i("Chunked upload request succeeded for "+e+", chunk "+o),r.clearCachedChunk(e,o);var s=r._getFileState(e).chunking.inProgress||[],a=d.normalizeResponse(t,!0),u=qq.indexOf(s,o);i(qq.format("Chunk {} for file {} uploaded successfully.",o,e)),c.done(e,o,a,n),u>=0&&s.splice(u,1),r._maybePersistChunkedState(e),c.hasMoreParts(e)||0!==s.length?c.hasMoreParts(e)?c.sendNext(e):i(qq.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",e,JSON.stringify(s))):c.finalize(e)}),(function(t,n){c.handleFailure(o,e,t,n)})).done((function(){r.clearXhr(e,o)})))}},l={_open:[],_openChunks:{},_waiting:[],available:function(){var e=u.maxConnections,t=0,n=0;return qq.each(l._openChunks,(function(e,i){t++,n+=i.length})),e-(l._open.length-t+n)},free:function(e,t){var n,o=!t,s=qq.indexOf(l._waiting,e),a=qq.indexOf(l._open,e);delete l._openChunks[e],d.getProxyOrBlob(e)instanceof qq.BlobProxy&&(i("Generated blob upload has ended for "+e+", disposing generated blob."),delete r._getFileState(e).file),s>=0?l._waiting.splice(s,1):o&&a>=0&&(l._open.splice(a,1),(n=l._waiting.shift())>=0&&(l._open.push(n),d.start(n)))},getWaitingOrConnected:function(){var e=[];return qq.each(l._openChunks,(function(t,n){n&&n.length&&e.push(parseInt(t))})),qq.each(l._open,(function(t,n){l._openChunks[n]||e.push(parseInt(n))})),e=e.concat(l._waiting)},isUsingConnection:function(e){return qq.indexOf(l._open,e)>=0},open:function(e,t){return null==t&&l._waiting.push(e),!!l.available()&&(null==t?(l._waiting.pop(),l._open.push(e)):function(){var n=l._openChunks[e]||[];n.push(t),l._openChunks[e]=n}(),!0)},reset:function(){l._waiting=[],l._open=[]}},d={cancel:function(e){i("Cancelling "+e),u.paramsStore.remove(e),l.free(e)},cleanup:function(e,t,n){var i=u.getName(e);u.onComplete(e,i,t,n),r._getFileState(e)&&r._clearXhrs&&r._clearXhrs(e),l.free(e)},getProxyOrBlob:function(e){return r.getProxy&&r.getProxy(e)||r.getFile&&r.getFile(e)},initHandler:function(){var e=t?qq[t]:qq.traditional,n=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";(r=new e[n+"UploadHandler"](u,{getDataByUuid:u.getDataByUuid,getName:u.getName,getSize:u.getSize,getUuid:u.getUuid,log:i,onCancel:u.onCancel,onProgress:u.onProgress,onUuidChanged:u.onUuidChanged}))._removeExpiredChunkingRecords&&r._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(e){return u.isQueued(e)},maybeDefer:function(e,t){return t&&!r.getFile(e)&&t instanceof qq.BlobProxy?(u.onUploadPrep(e),i("Attempting to generate a blob on-demand for "+e),t.create().then((function(t){i("Generated an on-demand blob for "+e),r.updateBlob(e,t),u.setSize(e,t.size),r.reevaluateChunking(e),d.maybeSendDeferredFiles(e)}),(function(t){var r={};t&&(r.error=t),i(qq.format("Failed to generate blob for ID {}.  Error message: {}.",e,t),"error"),u.onComplete(e,u.getName(e),qq.extend(r,n),null),d.maybeSendDeferredFiles(e),l.free(e)})),!1):d.maybeSendDeferredFiles(e)},maybeSendDeferredFiles:function(e){var t=u.getIdsInProxyGroup(e),n=!1;return t&&t.length?(i("Maybe ready to upload proxy group file "+e),qq.each(t,(function(t,i){if(d.isDeferredEligibleForUpload(i)&&r.getFile(i))n=i===e,d.now(i);else if(d.isDeferredEligibleForUpload(i))return!1}))):(n=!0,d.now(e)),n},maybeNewUuid:function(e,t){void 0!==t.newUuid&&u.onUuidChanged(e,t.newUuid)},normalizeResponse:function(e,t){var n=e;return qq.isObject(e)||(n={},qq.isString(e)&&!t&&(n.error=e)),n.success=t,n},now:function(e){var t=u.getName(e);if(!o.isValid(e))throw new qq.Error(e+" is not a valid file ID to upload!");u.onUpload(e,t),s&&r._shouldChunkThisFile(e)?c.sendNext(e):function(e,t){r._getFileState(e).loaded=0,i("Sending simple upload request for "+e),r.uploadFile(e).then((function(n,r){i("Simple upload request succeeded for "+e);var o=d.normalizeResponse(n,!0),s=u.getSize(e);u.onProgress(e,t,s,s),d.maybeNewUuid(e,o),d.cleanup(e,o,r)}),(function(n,r){i("Simple upload request failed for "+e);var o=d.normalizeResponse(n,!1);u.onAutoRetry(e,t,o,r)||d.cleanup(e,o,r)}))}(e,t)},start:function(e){var t=d.getProxyOrBlob(e);return t?d.maybeDefer(e,t):(d.now(e),!0)}};qq.extend(this,{add:function(e,t){r.add.apply(this,arguments)},upload:function(e){return!!l.open(e)&&d.start(e)},retry:function(e){return a&&(r._getFileState(e).temp.ignoreFailure=!1),l.isUsingConnection(e)?d.start(e):o.upload(e)},cancel:function(e){var t=r.cancel(e);qq.isGenericPromise(t)?t.then((function(){d.cancel(e)})):!1!==t&&d.cancel(e)},cancelAll:function(){var e,t=l.getWaitingOrConnected();if(t.length)for(e=t.length-1;e>=0;e--)o.cancel(t[e]);l.reset()},getFile:function(e){return r.getProxy&&r.getProxy(e)?r.getProxy(e).referenceBlob:r.getFile&&r.getFile(e)},isProxied:function(e){return!(!r.getProxy||!r.getProxy(e))},getInput:function(e){if(r.getInput)return r.getInput(e)},reset:function(){i("Resetting upload handler"),o.cancelAll(),l.reset(),r.reset()},expunge:function(e){if(o.isValid(e))return r.expunge(e)},isValid:function(e){return r.isValid(e)},getResumableFilesData:function(){return r.getResumableFilesData?r.getResumableFilesData():[]},getThirdPartyFileId:function(e){if(o.isValid(e))return r.getThirdPartyFileId(e)},pause:function(e){return!!(o.isResumable(e)&&r.pause&&o.isValid(e)&&r.pause(e))&&(l.free(e),r.moveInProgressToRemaining(e),!0)},isResumable:function(e){return!!r.isResumable&&r.isResumable(e)}}),qq.extend(u,e),i=u.log,s=u.chunking.enabled&&qq.supportedFeatures.chunking,a=s&&u.chunking.concurrent.enabled,n=function(){var e={};return e[u.preventRetryParam]=!0,e}(),d.initHandler()},qq.WindowReceiveMessage=function(e){"use strict";var t={};qq.extend({log:function(e,t){}},e),qq.extend(this,{receiveMessage:function(e,n){window.postMessage?t[e]=qq(window).attach("message",(function(e){n(e.data)})):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var n=t[e];n&&n()}}})},qq.FormUploadHandler=function(e){"use strict";function t(e){return e.split("_")[0]}function n(e,n){var i=e.id,o=t(i),s=h(o);a[s]=n,u[o]=qq(e).attach("load",(function(){r.getInput(o)&&(p("Received iframe load event for CORS upload request (iframe name "+i+")"),c[i]=setTimeout((function(){var e="No valid message received from loaded iframe for iframe name "+i;p(e,"error"),n({error:e})}),1e3))})),f.receiveMessage(i,(function(e){p("Received the following window message: '"+e+"'");var n,o=(t(i),r._parseJsonResponse(e)),s=o.uuid;s&&a[s]?(p("Handling response for iframe name "+i),clearTimeout(c[i]),delete c[i],r._detachLoadEvent(i),n=a[s],delete a[s],f.stopReceivingMessages(i),n(o)):s||p("'"+e+"' does not contain a UUID - ignoring.")}))}var i=e.options,r=this,o=e.proxy,s=qq.getUniqueId(),a={},u={},c={},l=i.isCors,d=i.inputName,h=o.getUuid,p=o.log,f=new qq.WindowReceiveMessage({log:p});qq.extend(this,new qq.UploadHandler(e)),qq.override(this,(function(e){return{add:function(t,n){e.add(t,{input:n}),n.setAttribute("name",d),n.parentNode&&qq(n).remove()},expunge:function(t){(function(e){delete u[e],l&&(clearTimeout(c[e]),delete c[e],f.stopReceivingMessages(e));var t=document.getElementById(r._getIframeName(e));t&&(t.setAttribute("src","javascript:false;"),qq(t).remove())})(t),e.expunge(t)},isValid:function(t){return e.isValid(t)&&void 0!==r._getFileState(t).input}}})),qq.extend(this,{getInput:function(e){return r._getFileState(e).input},_attachLoadEvent:function(e,t){var i;l?n(e,t):u[e.id]=qq(e).attach("load",(function(){if(p("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(e){p("Error when attempting to access iframe during handling of upload response ("+e.message+")","error"),i={success:!1}}t(i)}}))},_createIframe:function(e){return function(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}(r._getIframeName(e))},_detachLoadEvent:function(e){void 0!==u[e]&&(u[e](),delete u[e])},_getIframeName:function(e){return e+"_"+s},_initFormForUpload:function(e){var t=e.method,n=e.endpoint,i=e.params,r=e.paramsInBody,o=e.targetName,s=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),a=n;return r?qq.obj2Inputs(i,s):a=qq.obj2url(i,n),s.setAttribute("action",a),s.setAttribute("target",o),s.style.display="none",document.body.appendChild(s),s},_parseJsonResponse:function(e){var t={};try{t=qq.parseJson(e)}catch(e){p("Error when attempting to parse iframe upload response ("+e.message+")","error")}return t}})},qq.XhrUploadHandler=function(e){"use strict";function t(e){qq.each(n._getXhrs(e),(function(t,i){var r=n._getAjaxRequester(e,t);i.onreadystatechange=null,i.upload.onprogress=null,i.abort(),r&&r.canceled&&r.canceled(e)}))}var n=this,i=e.options.namespace,r=e.proxy,o=e.options.chunking,s=e.options.resume,a=o&&e.options.chunking.enabled&&qq.supportedFeatures.chunking,u=s&&e.options.resume.enabled&&a&&qq.supportedFeatures.resume,c=r.getName,l=r.getSize,d=r.getUuid,h=r.getEndpoint,p=r.getDataByUuid,f=r.onUuidChanged,g=r.onProgress,m=r.log;qq.extend(this,new qq.UploadHandler(e)),qq.override(this,(function(e){return{add:function(t,i){if(qq.isFile(i)||qq.isBlob(i))e.add(t,{file:i});else{if(!(i instanceof qq.BlobProxy))throw new Error("Passed obj is not a File, Blob, or proxy");e.add(t,{proxy:i})}n._initTempState(t),u&&n._maybePrepareForResume(t)},expunge:function(i){t(i),n._maybeDeletePersistedChunkData(i),n._clearXhrs(i),e.expunge(i)}}})),qq.extend(this,{clearCachedChunk:function(e,t){delete n._getFileState(e).temp.cachedChunks[t]},clearXhr:function(e,t){var i=n._getFileState(e).temp;i.xhrs&&delete i.xhrs[t],i.ajaxRequesters&&delete i.ajaxRequesters[t]},finalizeChunks:function(e,t){var i=n._getTotalChunks(e)-1,r=n._getXhr(e,i);return t?(new qq.Promise).success(t(r),r):(new qq.Promise).success({},r)},getFile:function(e){return n.isValid(e)&&n._getFileState(e).file},getProxy:function(e){return n.isValid(e)&&n._getFileState(e).proxy},getResumableFilesData:function(){var e=[];return n._iterateResumeRecords((function(t,i){n.moveInProgressToRemaining(null,i.chunking.inProgress,i.chunking.remaining);var r={name:i.name,remaining:i.chunking.remaining,size:i.size,uuid:i.uuid};i.key&&(r.key=i.key),e.push(r)})),e},isResumable:function(e){return!!o&&n.isValid(e)&&!n._getFileState(e).notResumable},moveInProgressToRemaining:function(e,t,i){var r=t||n._getFileState(e).chunking.inProgress,o=i||n._getFileState(e).chunking.remaining;r&&(m(qq.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(r))),r.reverse(),qq.each(r,(function(e,t){o.unshift(t)})),r.length=0)},pause:function(e){if(n.isValid(e))return m(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,c(e))),n._getFileState(e).paused=!0,t(e),!0},reevaluateChunking:function(e){if(o&&n.isValid(e)){var t,i,r=n._getFileState(e);if(delete r.chunking,r.chunking={},(t=n._getTotalChunks(e))>1||o.mandatory){for(r.chunking.enabled=!0,r.chunking.parts=t,r.chunking.remaining=[],i=0;i<t;i++)r.chunking.remaining.push(i);n._initTempState(e)}else r.chunking.enabled=!1}},updateBlob:function(e,t){n.isValid(e)&&(n._getFileState(e).file=t)},_clearXhrs:function(e){var t=n._getFileState(e).temp;qq.each(t.ajaxRequesters,(function(e){delete t.ajaxRequesters[e]})),qq.each(t.xhrs,(function(e){delete t.xhrs[e]}))},_createXhr:function(e,t){return n._registerXhr(e,t,qq.createXhrInstance())},_getAjaxRequester:function(e,t){var i=null==t?-1:t;return n._getFileState(e).temp.ajaxRequesters[i]},_getChunkData:function(e,t){var i=o.partSize,r=l(e),s=n.getFile(e),a=i*t,u=a+i>=r?r:a+i,c=n._getTotalChunks(e),d=this._getFileState(e).temp.cachedChunks,h=d[t]||qq.sliceBlob(s,a,u);return d[t]=h,{part:t,start:a,end:u,count:c,blob:h,size:u-a}},_getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}},_getLocalStorageId:function(e){var t=c(e),n=l(e),r=o.partSize,s=h(e);return qq.format("qq{}resume{}-{}-{}-{}-{}",i,"5.0",t,n,r,s)},_getMimeType:function(e){return n.getFile(e).type},_getPersistableData:function(e){return n._getFileState(e).chunking},_getTotalChunks:function(e){if(o){var t=l(e),n=o.partSize;return Math.ceil(t/n)}},_getXhr:function(e,t){var i=null==t?-1:t;return n._getFileState(e).temp.xhrs[i]},_getXhrs:function(e){return n._getFileState(e).temp.xhrs},_iterateResumeRecords:function(e){u&&qq.each(localStorage,(function(t,n){if(0===t.indexOf(qq.format("qq{}resume",i))){var r=JSON.parse(n);e(t,r)}}))},_initTempState:function(e){n._getFileState(e).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(e){n._getFileState(e).notResumable=!0},_maybeDeletePersistedChunkData:function(e){var t;return!!(u&&n.isResumable(e)&&(t=n._getLocalStorageId(e),t&&localStorage.getItem(t)))&&(localStorage.removeItem(t),!0)},_maybePrepareForResume:function(e){var t,i,r=n._getFileState(e);u&&void 0===r.key&&(t=n._getLocalStorageId(e),(i=localStorage.getItem(t))&&(i=JSON.parse(i),p(i.uuid)?n._markNotResumable(e):(m(qq.format("Identified file with ID {} and name of {} as resumable.",e,c(e))),f(e,i.uuid),r.key=i.key,r.chunking=i.chunking,r.loaded=i.loaded,r.attemptingResume=!0,n.moveInProgressToRemaining(e))))},_maybePersistChunkedState:function(e){var t,i,r=n._getFileState(e);if(u&&n.isResumable(e)){t=n._getLocalStorageId(e),i={name:c(e),size:l(e),uuid:d(e),key:r.key,chunking:r.chunking,loaded:r.loaded,lastUpdated:Date.now()};try{localStorage.setItem(t,JSON.stringify(i))}catch(t){m(qq.format("Unable to save resume data for '{}' due to error: '{}'.",e,t.toString()),"warn")}}},_registerProgressHandler:function(e,t,i){var r=n._getXhr(e,t),o=c(e),s={simple:function(t,n){var i=l(e);g(e,o,t===n?i:t>=i?i-1:t,i)},chunked:function(r,s){var a=n._getFileState(e).temp.chunkProgress,u=n._getFileState(e).loaded,c=r,d=s,h=l(e),p=c-(d-i),f=u;a[t]=p,qq.each(a,(function(e,t){f+=t})),g(e,o,f,h)}};r.upload.onprogress=function(e){e.lengthComputable&&s[null==i?"simple":"chunked"](e.loaded,e.total)}},_registerXhr:function(e,t,i,r){var o=null==t?-1:t,s=n._getFileState(e).temp;return s.xhrs=s.xhrs||{},s.ajaxRequesters=s.ajaxRequesters||{},s.xhrs[o]=i,r&&(s.ajaxRequesters[o]=r),i},_removeExpiredChunkingRecords:function(){var e=s.recordsExpireIn;n._iterateResumeRecords((function(t,n){var i=new Date(n.lastUpdated);i.setDate(i.getDate()+e),i.getTime()<=Date.now()&&(m("Removing expired resume record with key "+t),localStorage.removeItem(t))}))},_shouldChunkThisFile:function(e){var t=n._getFileState(e);return t.chunking||n.reevaluateChunking(e),t.chunking.enabled}})},qq.DeleteFileAjaxRequester=function(e){"use strict";var t,n={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(e){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,n){}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:n.method,endpointStore:n.endpointStore,paramsStore:n.paramsStore,mandatedParams:"POST"===n.method.toUpperCase()?{_method:"DELETE"}:{},maxConnections:n.maxConnections,customHeaders:function(e){return n.customHeaders.get(e)},log:n.log,onSend:n.onDelete,onComplete:n.onDeleteComplete,cors:n.cors})),qq.extend(this,{sendDelete:function(e,i,r){var o=r||{};n.log("Submitting delete file request for "+e),"DELETE"===n.method?t.initTransport(e).withPath(i).withParams(o).send():(o[n.uuidParamName]=i,t.initTransport(e).withParams(o).send())}})},function(){function e(e,n,i,r,o){var s,a=e.naturalWidth,u=e.naturalHeight,c=r.width,l=r.height,d=i.getContext("2d"),h=new qq.Promise;return d.save(),r.resize?function(e){var n=e.blob,i=e.image,r=e.imageHeight,o=e.imageWidth,s=e.orientation,a=new qq.Promise,u=e.resize,c=document.createElement("canvas"),l=c.getContext("2d"),d=e.canvas,h=e.targetHeight,p=e.targetWidth;return t(c,o,r,s),d.height=h,d.width=p,l.drawImage(i,0,0),u({blob:n,height:h,image:i,sourceCanvas:c,targetCanvas:d,width:p}).then((function(){d.qqImageRendered&&d.qqImageRendered(),a.success()}),a.failure),a}({blob:n,canvas:i,image:e,imageHeight:u,imageWidth:a,orientation:r.orientation,resize:r.resize,targetHeight:l,targetWidth:c}):(qq.supportedFeatures.unlimitedScaledImageSize||(s=function(e){var t=5241e3;if(!qq.ios())throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!");if(e.origHeight*e.origWidth>t)return{newHeight:Math.round(Math.sqrt(t*(e.origHeight/e.origWidth))),newWidth:Math.round(Math.sqrt(t*(e.origWidth/e.origHeight)))}}({origWidth:c,origHeight:l}),s&&(qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",c,l,s.newWidth,s.newHeight),"warn"),c=s.newWidth,l=s.newHeight)),t(i,c,l,r.orientation),qq.ios()?function(){(function(e){var t,n=e.naturalWidth,i=e.naturalHeight,r=document.createElement("canvas");return n*i>1048576&&(r.width=r.height=1,(t=r.getContext("2d")).drawImage(e,1-n,0),0===t.getImageData(0,0,1,1).data[3])})(e)&&(a/=2,u/=2);var t,n,i,r=1024,s=document.createElement("canvas"),h=o?function(e,t,n){var i,r,o,s=document.createElement("canvas"),a=0,u=n,c=n;for(s.width=1,s.height=n,(i=s.getContext("2d")).drawImage(e,0,0),r=i.getImageData(0,0,1,n).data;c>a;)0===r[4*(c-1)+3]?u=c:a=c,c=u+a>>1;return 0==(o=c/n)?1:o}(e,0,u):1,p=Math.ceil(r*c/a),f=Math.ceil(r*l/u/h),g=0,m=0;for(s.width=s.height=r,t=s.getContext("2d");g<u;){for(n=0,i=0;n<a;)t.clearRect(0,0,r,r),t.drawImage(e,-n,-g),d.drawImage(s,0,0,r,r,i,m,p,f),n+=r,i+=p;g+=r,m+=f}d.restore(),s=t=null}():d.drawImage(e,0,0,c,l),i.qqImageRendered&&i.qqImageRendered(),h.success(),h)}function t(e,t,n,i){switch(i){case 5:case 6:case 7:case 8:e.width=n,e.height=t;break;default:e.width=t,e.height=n}var r=e.getContext("2d");switch(i){case 2:r.translate(t,0),r.scale(-1,1);break;case 3:r.translate(t,n),r.rotate(Math.PI);break;case 4:r.translate(0,n),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-n);break;case 7:r.rotate(.5*Math.PI),r.translate(t,-n),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-t,0)}}function n(e,t){var n=this;window.Blob&&e instanceof Blob&&function(){var t=new Image,i=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!i)throw Error("No createObjectURL function found to create blob url");t.src=i.createObjectURL(e),n.blob=e,e=t}(),e.naturalWidth||e.naturalHeight||(e.onload=function(){var e=n.imageLoadListeners;e&&(n.imageLoadListeners=null,setTimeout((function(){for(var t=0,n=e.length;t<n;t++)e[t]()}),0))},e.onerror=t,this.imageLoadListeners=[]),this.srcImage=e}n.prototype.render=function(t,n){n=n||{};var i,r=this,o=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,a=n.width,u=n.height,c=n.maxWidth,l=n.maxHeight,d=!this.blob||"image/jpeg"===this.blob.type,h=t.tagName.toLowerCase();return this.imageLoadListeners?void this.imageLoadListeners.push((function(){r.render(t,n)})):(a&&!u?u=s*a/o|0:u&&!a?a=o*u/s|0:(a=o,u=s),c&&a>c&&(u=s*(a=c)/o|0),l&&u>l&&(a=o*(u=l)/s|0),i={width:a,height:u},qq.each(n,(function(e,t){i[e]=t})),"img"===h?function(){var n=t.src;(function(t,n,i,r){var o=document.createElement("canvas"),s=i.mime||"image/jpeg",a=new qq.Promise;return e(t,n,o,i,r).then((function(){a.success(o.toDataURL(s,i.quality||.8))})),a})(r.srcImage,r.blob,i,d).then((function(e){t.src=e,n===t.src&&t.onload()}))}():"canvas"===h&&e(this.srcImage,this.blob,t,i,d),void("function"==typeof this.onrender&&this.onrender(t)))},qq.MegaPixImage=n}(),qq.ImageGenerator=function(e){"use strict";function t(e){return"img"===e.tagName.toLowerCase()}function n(e){return"canvas"===e.tagName.toLowerCase()}function i(e){var t=e.split("/"),n=t[t.length-1].split("?")[0],i=qq.getExtension(n);switch(i=i&&i.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function r(e){var t,n,i,r=document.createElement("a");return r.href=e,t=r.protocol,i=r.port,n=r.hostname,t.toLowerCase()!==window.location.protocol.toLowerCase()||n.toLowerCase()!==window.location.hostname.toLowerCase()||i!==window.location.port&&!qq.ie()}function o(i,r){var o=t(i)||n(i);return t(i)?function(t,n){t.onload=function(){t.onload=null,t.onerror=null,n.success(t)},t.onerror=function(){t.onload=null,t.onerror=null,e("Problem drawing thumbnail!","error"),n.failure(t,"Problem drawing thumbnail!")}}(i,r):n(i)?function(e,t){e.qqImageRendered=function(){t.success(e)}}(i,r):(r.failure(i),e(qq.format("Element container of type {} is not supported!",i.tagName),"error")),o}function s(e,t,n,s,a){var u=new Image,c=new qq.Promise;o(u,c),r(e)&&(u.crossOrigin="anonymous"),u.src=e,c.then((function(){o(t,n),new qq.MegaPixImage(u).render(t,{maxWidth:s,maxHeight:s,mime:i(e),resize:a})}),n.failure)}function a(e,t,n,i){o(t,n),qq(t).css({maxWidth:i+"px",maxHeight:i+"px"}),t.src=e}function u(e,i,u){var c=new qq.Promise,l=u.scale,d=l?u.maxSize:null;return l&&t(i)?function(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}()?r(e)&&void 0===(new Image).crossOrigin?a(e,i,c,d):s(e,i,c,d):a(e,i,c,d):n(i)?s(e,i,c,d):o(i,c)&&(i.src=e),c}qq.extend(this,{generate:function(t,n,i){return qq.isString(t)?(e("Attempting to update thumbnail based on server response."),u(t,n,i||{})):(e("Attempting to draw client-side image preview."),function(t,n,i){var r=new qq.Promise,s=new qq.Identify(t,e),a=i.maxSize,u=null==i.orient||i.orient,c=function(){n.onerror=null,n.onload=null,e("Could not render preview, file may be too large!","error"),r.failure(n,"Browser cannot render image!")};return s.isPreviewable().then((function(s){var l={parse:function(){return(new qq.Promise).success()}},d=u?new qq.Exif(t,e):l,h=new qq.MegaPixImage(t,c);o(n,r)&&d.parse().then((function(e){var t=e&&e.Orientation;h.render(n,{maxWidth:a,maxHeight:a,orientation:t,mime:s,resize:i.customResizeFunction})}),(function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t)),h.render(n,{maxWidth:a,maxHeight:a,mime:s,resize:i.customResizeFunction})}))}),(function(){e("Not previewable"),r.failure(n,"Not previewable")})),r}(t,n,i||{}))}}),this._testing={},this._testing.isImg=t,this._testing.isCanvas=n,this._testing.isCrossOrigin=r,this._testing.determineMimeOfFileName=i},qq.Exif=function(e,t){"use strict";function n(e){for(var t=0,n=0;e.length>0;)t+=parseInt(e.substring(0,2),16)*Math.pow(2,n),e=e.substring(2,e.length),n+=8;return t}function i(t,n){var r=t,o=n;return void 0===r&&(r=2,o=new qq.Promise),qq.readBlobToHex(e,r,4).then((function(e){var t,n=/^ffe([0-9])/.exec(e);n?"1"!==n[1]?(t=parseInt(e.slice(4,8),16),i(r+t+2,o)):o.success(r):o.failure("No EXIF header to be found!")})),o}function r(){var t=new qq.Promise;return qq.readBlobToHex(e,0,6).then((function(e){0!==e.indexOf("ffd8")?t.failure("Not a valid JPEG!"):i().then((function(e){t.success(e)}),(function(e){t.failure(e)}))})),t}function o(t,i){var r=new qq.Promise;return qq.readBlobToHex(e,t+18,2).then((function(e){return i?r.success(n(e)):void r.success(parseInt(e,16))})),r}function s(t,n){var i=t+20,r=12*n;return qq.readBlobToHex(e,i,r)}function a(e,t){var i=qq.extend([],u),r={};return qq.each(t,(function(t,o){var s,a,u,l=o.slice(0,4),d=e?n(l):parseInt(l,16),h=i.indexOf(d);if(h>=0&&(a=c[d].name,u=c[d].bytes,s=o.slice(16,16+2*u),r[a]=e?n(s):parseInt(s,16),i.splice(h,1)),0===i.length)return!1})),r}var u=[274],c={274:{name:"Orientation",bytes:2}};qq.extend(this,{parse:function(){var n=new qq.Promise,i=function(e){t(qq.format("EXIF header parse failed: '{}' ",e)),n.failure(e)};return r().then((function(r){t(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===e.name?"blob":e.name)),function(t){var n=new qq.Promise;return qq.readBlobToHex(e,t+10,2).then((function(e){n.success("4949"===e)})),n}(r).then((function(e){t(qq.format("EXIF Byte order is {} endian",e?"little":"big")),o(r,e).then((function(o){t(qq.format("Found {} APP1 directory entries",o)),s(r,o).then((function(i){var r=function(e){for(var t=[],n=0;n+24<=e.length;)t.push(e.slice(n,n+24)),n+=24;return t}(i),o=a(e,r);t("Successfully parsed some EXIF tags"),n.success(o)}),i)}),i)}),i)}),i),n}}),this._testing={},this._testing.parseLittleEndian=n},qq.Identify=function(e,t){"use strict";qq.extend(this,{isPreviewable:function(){var n=this,i=new qq.Promise,r=!1,o=void 0===e.name?"blob":e.name;return t(qq.format("Attempting to determine if {} can be rendered in this browser",o)),t("First pass: check type attribute of blob object."),this.isPreviewableSync()?(t("Second pass: check for magic bytes in file header."),qq.readBlobToHex(e,0,4).then((function(e){qq.each(n.PREVIEWABLE_MIME_TYPES,(function(t,n){if(function(e,t){var n=!1,i=[].concat(e);return qq.each(i,(function(e,i){if(0===t.indexOf(i))return n=!0,!1})),n}(n,e))return("image/tiff"!==t||qq.supportedFeatures.tiffPreviews)&&(r=!0,i.success(t)),!1})),t(qq.format("'{}' is {} able to be rendered in this browser",o,r?"":"NOT")),r||i.failure()}),(function(){t("Error reading file w/ name '"+o+"'.  Not able to be rendered in this browser."),i.failure()}))):i.failure(),i},isPreviewableSync:function(){var n=e.type,i=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),n)>=0,r=!1,o=void 0===e.name?"blob":e.name;return i&&(r="image/tiff"!==n||qq.supportedFeatures.tiffPreviews),!r&&t(o+" is not previewable in this browser per the blob's type attr"),r}})},qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]},qq.ImageValidation=function(e,t){"use strict";function n(){var n=new qq.Promise;return new qq.Identify(e,t).isPreviewable().then((function(){var i=new Image,r=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;r?(i.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error"),n.failure()},i.onload=function(){n.success({width:this.width,height:this.height})},i.src=r.createObjectURL(e)):(t("No createObjectURL function available to generate image URL!","error"),n.failure())}),n.failure),n}this.validate=function(e){var i=new qq.Promise;return t("Attempting to validate image."),function(e){var t=!1;return qq.each(e,(function(e,n){if(n>0)return t=!0,!1})),t}(e)?n().then((function(t){var n=function(e,t){var n;return qq.each(e,(function(e,i){if(i>0){var r=/(max|min)(Width|Height)/.exec(e),o=r[2].charAt(0).toLowerCase()+r[2].slice(1),s=t[o];switch(r[1]){case"min":if(s<i)return n=e,!1;break;case"max":if(s>i)return n=e,!1}}})),n}(e,t);n?i.failure(n):i.success()}),i.success):i.success(),i}},qq.Session=function(e){"use strict";function t(e,t,i,r){var o=!1;t=t&&function(e){return!!qq.isArray(e)||void n.log("Session response is not an array.","error")}(e),t&&qq.each(e,(function(e,t){if(null==t.uuid)o=!0,n.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",e),"error");else if(null==t.name)o=!0,n.log(qq.format("Session response item {} did not include a valid name - ignoring.",e),"error");else try{return n.addFileRecord(t),!0}catch(e){o=!0,n.log(e.message,"error")}return!1})),r[t&&!o?"success":"failure"](e,i)}var n={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(e){},log:function(e,t){}};qq.extend(n,e,!0),this.refresh=function(){var e=new qq.Promise,i=qq.extend({},n),r=new qq.SessionAjaxRequester(qq.extend(i,{onComplete:function(n,i,r){t(n,i,r,e)}}));return r.queryServer(),e}},qq.SessionAjaxRequester=function(e){"use strict";var t,n={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(e,t,n){},log:function(e,t){}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return n.endpoint}},customHeaders:n.customHeaders,log:n.log,onComplete:function(e,t,i){var r=null;if(null!=t.responseText)try{r=qq.parseJson(t.responseText)}catch(e){n.log("Problem parsing session response: "+e.message,"error"),i=!0}n.onComplete(r,!i,t)},cors:n.cors})),qq.extend(this,{queryServer:function(){var e=qq.extend({},n.params);n.log("Session query request."),t.initTransport("sessionRefresh").withParams(e).withCacheBuster().send()}})},qq.Scaler=function(e,t){"use strict";var n=e.customResizer,i=e.sendOriginal,r=e.orient,o=e.defaultType,s=e.defaultQuality/100,a=e.failureText,u=e.includeExif,c=this._getSortedSizes(e.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&c.length>0,getFileRecords:function(e,l,d){var h=this,p=[],f=d.blob?d.blob:d;return new qq.Identify(f,t).isPreviewableSync()?(qq.each(c,(function(e,i){var c=h._determineOutputType({defaultType:o,requestedType:i.type,refType:f.type});p.push({uuid:qq.getUniqueId(),name:h._getName(l,{name:i.name,type:c,refType:f.type}),blob:new qq.BlobProxy(f,qq.bind(h._generateScaledImage,h,{customResizeFunction:n,maxSize:i.maxSize,orient:r,type:c,quality:s,failedText:a,includeExif:u,log:t}))})})),p.push({uuid:e,name:l,size:f.size,blob:i?f:null})):p.push({uuid:e,name:l,size:f.size,blob:f}),p},handleNewFile:function(e,t,n,i,r,o,s,a){var u=(e.qqButtonId||e.blob&&e.blob.qqButtonId,[]),c=null,l=a.addFileToHandler,d=a.uploadData,h=a.paramsStore,p=qq.getUniqueId();qq.each(this.getFileRecords(n,t,e),(function(e,t){var n,i=t.size;t.blob instanceof qq.BlobProxy&&(i=-1),n=d.addFile({uuid:t.uuid,name:t.name,size:i,batchId:o,proxyGroupId:p}),t.blob instanceof qq.BlobProxy?u.push(n):c=n,t.blob?(l(n,t.blob),r.push({id:n,file:t.blob})):d.setStatus(n,qq.status.REJECTED)})),null!==c&&(qq.each(u,(function(e,t){var n={qqparentuuid:d.retrieve({id:c}).uuid,qqparentsize:d.retrieve({id:c}).size};n[s]=d.retrieve({id:t}).uuid,d.setParentId(t,c),h.addReadOnly(t,n)})),u.length&&function(){var e={};e[s]=d.retrieve({id:c}).uuid,h.addReadOnly(c,e)}())}})},qq.extend(qq.Scaler.prototype,{scaleImage:function(e,t,n){"use strict";if(!qq.supportedFeatures.scaling)throw new qq.Error("Scaling is not supported in this browser!");var i=new qq.Promise,r=n.log,o=n.getFile(e),s=n.uploadData.retrieve({id:e}),a=s&&s.name,u=s&&s.uuid,c={customResizer:t.customResizer,sendOriginal:!1,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},l=new qq.Scaler(c,r);return qq.Scaler&&qq.supportedFeatures.imagePreviews&&o?qq.bind((function(){var t=l.getFileRecords(u,a,o)[0];t&&t.blob instanceof qq.BlobProxy?t.blob.create().then(i.success,i.failure):(r(e+" is not a scalable image!","error"),i.failure())}),this)():(i.failure(),r("Could not generate requested scaled image for "+e+".  Scaling is either not possible in this browser, or the file could not be located.","error")),i},_determineOutputType:function(e){"use strict";var t=e.requestedType,n=e.defaultType,i=e.refType;return n||t?t&&qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0?"image/tiff"===t?qq.supportedFeatures.tiffPreviews?t:n:t:n:"image/jpeg"!==i?"image/png":i},_getName:function(e,t){"use strict";var n=e.lastIndexOf("."),i=t.type||"image/png",r=t.refType,o="",s=qq.getExtension(e),a="";return t.name&&t.name.trim().length&&(a=" ("+t.name+")"),n>=0?(o=e.substr(0,n),r!==i&&(s=i.split("/")[1]),o+=a+"."+s):o=e+a,o},_getSortedSizes:function(e){"use strict";return(e=qq.extend([],e)).sort((function(e,t){return e.maxSize>t.maxSize?1:e.maxSize<t.maxSize?-1:0}))},_generateScaledImage:function(e,t){"use strict";var n=this,i=e.customResizeFunction,r=e.log,o=e.maxSize,s=e.orient,a=e.type,u=e.quality,c=e.failedText,l=e.includeExif&&"image/jpeg"===t.type&&"image/jpeg"===a,d=new qq.Promise,h=new qq.ImageGenerator(r),p=document.createElement("canvas");return r("Attempting to generate scaled version for "+t.name),h.generate(t,p,{maxSize:o,orient:s,customResizeFunction:i}).then((function(){var e=p.toDataURL(a,u),i=function(){r("Success generating scaled version for "+t.name);var n=qq.dataUriToBlob(e);d.success(n)};l?n._insertExifHeader(t,e,r).then((function(t){e=t,i()}),(function(){r("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error"),i()})):i()}),(function(){r("Failed attempt to generate scaled version for "+t.name,"error"),d.failure(c)})),d},_insertExifHeader:function(e,t,n){"use strict";var i=new FileReader,r=new qq.Promise,o="";return i.onload=function(){o=i.result,r.success(qq.ExifRestorer.restore(o,t))},i.onerror=function(){n("Problem reading "+e.name+" during attempt to transfer EXIF data to scaled version.","error"),r.failure()},i.readAsDataURL(e),r},_dataUriToBlob:function(e){"use strict";var t,n,i,r;return t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),qq.each(t,(function(e,t){r[e]=t.charCodeAt(0)})),this._createBlob(i,n)},_createBlob:function(e,t){"use strict";var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=n&&new n;return i?(i.append(e),i.getBlob(t)):new Blob([e],{type:t})}}),qq.ExifRestorer=(e={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){var t,n,i,r,o,s="",a="",u="",c=0;do{i=(t=e[c++])>>2,r=(3&t)<<4|(n=e[c++])>>4,o=(15&n)<<2|(a=e[c++])>>6,u=63&a,isNaN(n)?o=u=64:isNaN(a)&&(u=64),s=s+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(u),t=n=a="",i=r=o=u=""}while(c<e.length);return s},restore:function(e,t){var n="data:image/jpeg;base64,";if(!e.match(n))return t;var i=this.decode64(e.replace(n,"")),r=this.slice2Segments(i),o=this.exifManipulation(t,r);return n+this.encode64(o)},exifManipulation:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255==(t=e[n])[0]&225==t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),s=i.slice(r);return o.concat(t).concat(s)},slice2Segments:function(e){for(var t=0,n=[];!(255==e[t]&218==e[t+1]);){if(255==e[t]&216==e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);n.push(r),t=i}if(t>e.length)break}return n},decode64:function(e){var t,n,i,r,o="",s="",a=0,u=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(i=this.KEY_STR.indexOf(e.charAt(a++)))>>4,n=(15&i)<<4|(r=this.KEY_STR.indexOf(e.charAt(a++)))>>2,o=(3&r)<<6|(s=this.KEY_STR.indexOf(e.charAt(a++))),u.push(t),64!=r&&u.push(n),64!=s&&u.push(o),t=n=o="",i=r=s=""}while(a<e.length);return u}},e),qq.TotalProgress=function(e,t){"use strict";var n={},i=0,r=0,o=-1,s=-1,a=function(t,n){t===o&&n===s||e(t,n),o=t,s=n},u=function(e){l(e,-1,-1),delete n[e]},c=function(e){var i=t(e);i>0&&(l(e,0,i),n[e]={loaded:0,total:i})},l=function(e,t,o){var s=n[e]?n[e].loaded:0,u=n[e]?n[e].total:0;-1===t&&-1===o?(i-=s,r-=u):(t&&(i+=t-s),o&&(r+=o-u)),a(i,r)};qq.extend(this,{onAllComplete:function(e,t,n){(0===t.length||function(e,t){var n=!0;return qq.each(e,(function(e,i){if(qq.indexOf(t,i)>=0)return n=!1,!1})),n}(t,n))&&(a(r,r),this.reset())},onStatusChange:function(e,t,n){n===qq.status.CANCELED||n===qq.status.REJECTED?u(e):n===qq.status.SUBMITTING&&c(e)},onIndividualProgress:function(e,t,i){l(e,t,i),n[e]={loaded:t,total:i}},onNewSize:function(e){c(e)},reset:function(){n={},i=0,r=0}})},qq.PasteSupport=function(e){"use strict";var t,n;t={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}},qq.extend(t,e),n=qq(t.targetElement).attach("paste",(function(e){var n=e.clipboardData;n&&qq.each(n.items,(function(e,n){if(function(e){return e.type&&0===e.type.indexOf("image/")}(n)){var i=n.getAsFile();t.callbacks.pasteReceived(i)}}))})),qq.extend(this,{reset:function(){n&&n()}})},qq.FormSupport=function(e,t,n){"use strict";function i(e,t){return!(e.checkValidity&&!e.checkValidity())||(n("Form did not pass validation checks - will not upload.","error"),void t())}var r=this,o=e.interceptSubmit,s=e.element,a=e.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:a,attachedToForm:!1,getFormInputsAsObject:function(){return null==s?null:r._form2Obj(s)}}),s=function(e){return e&&(qq.isString(e)&&(e=document.getElementById(e)),e&&(n("Attaching to form element."),function(e){e.getAttribute("action")&&(r.newEndpoint=e.getAttribute("action"))}(e),o&&function(e){var n=e.submit;qq(e).attach("submit",(function(r){(r=r||window.event).preventDefault?r.preventDefault():r.returnValue=!1,i(e,n)&&t()})),e.submit=function(){i(e,n)&&t()}}(e))),e}(s),this.attachedToForm=!!s},qq.extend(qq.FormSupport.prototype,{_form2Obj:function(e){"use strict";var t={},n=function(e){return!(!function(e){return qq.indexOf(["checkbox","radio"],e.toLowerCase())>=0}(e.type)||e.checked)||e.disabled&&"hidden"!==e.type.toLowerCase()};return qq.each(e.elements,(function(e,i){if(!qq.isInput(i,!0)&&"textarea"!==i.tagName.toLowerCase()||!function(e){return qq.indexOf(["button","image","reset","submit"],e.toLowerCase())<0}(i.type)||n(i)){if("select"===i.tagName.toLowerCase()&&!n(i)){var r=function(e){var t=null;return qq.each(qq(e).children(),(function(e,n){if("option"===n.tagName.toLowerCase()&&n.selected)return t=n.value,!1})),t}(i);null!==r&&(t[i.name]=r)}}else t[i.name]=i.value})),t}}),qq.CryptoJS=function(e,t){var n={},i=n.lib={},r=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else if(n.length>65535)for(o=0;o<r;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,s=this.blockSize,a=r/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*u,r);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(i,l);var d=i.splice(0,u);n.sigBytes-=c}return new o.init(d,c)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),n.algo={});return n}(Math),function(){var e=qq.CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(e){var n=e.length,i=this._map,r=i.charAt(64);if(r){var o=e.indexOf(r);-1!=o&&(n=o)}for(var s=[],a=0,u=0;u<n;u++)if(u%4){var c=i.indexOf(e.charAt(u-1))<<u%4*2,l=i.indexOf(e.charAt(u))>>>6-u%4*2;s[a>>>2]|=(c|l)<<24-a%4*8,a++}return t.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){var e=qq.CryptoJS,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,u=s.words,c=0;c<i;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(),function(){var e=qq.CryptoJS,t=e.lib,n=t.WordArray,i=t.Hasher,r=e.algo,o=[],s=r.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],s=n[2],a=n[3],u=n[4],c=0;c<80;c++){if(c<16)o[c]=0|e[t+c];else{var l=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=l<<1|l>>>31}var d=(i<<5|i>>>27)+u+o[c];d+=c<20?1518500249+(r&s|~r&a):c<40?1859775393+(r^s^a):c<60?(r&s|r&a|s&a)-1894007588:(r^s^a)-899497514,u=a,a=s,s=r<<30|r>>>2,r=i,i=d}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(s),e.HmacSHA1=i._createHmacHelper(s)}(),function(e){var t=qq.CryptoJS,n=t.lib,i=n.WordArray,r=n.Hasher,o=t.algo,s=[],a=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)t(i)&&(r<8&&(s[r]=n(e.pow(i,.5))),a[r]=n(e.pow(i,1/3)),r++),i++}();var u=[],c=o.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],c=n[4],l=n[5],d=n[6],h=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var f=u[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=u[p-2],q=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[p]=g+u[p-7]+q+u[p-16]}var v=i&r^i&o^r&o,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=h+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&d)+a[p]+u[p];h=d,d=l,l=c,c=s+b|0,s=o,o=r,r=i,i=b+(y+v)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(c),t.HmacSHA256=r._createHmacHelper(c)}(Math),function(){if("function"==typeof ArrayBuffer){var e=qq.CryptoJS.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,i=[],r=0;r<n;r++)i[r>>>2]|=e[r]<<24-r%4*8;t.call(this,i,n)}else t.apply(this,arguments)};n.prototype=e}}(),qq.s3=qq.s3||{},qq.s3.util=qq.s3.util||function(){"use strict";return{ALGORITHM_PARAM_NAME:"x-amz-algorithm",AWS_PARAM_PREFIX:"x-amz-meta-",CREDENTIAL_PARAM_NAME:"x-amz-credential",DATE_PARAM_NAME:"x-amz-date",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",V4_ALGORITHM_PARAM_VALUE:"AWS4-HMAC-SHA256",V4_SIGNATURE_PARAM_NAME:"x-amz-signature",CASE_SENSITIVE_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNSIGNABLE_REST_HEADER_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5"],UNPREFIXED_PARAM_NAMES:["Cache-Control","Content-Disposition","Content-Encoding","Content-MD5","x-amz-server-side-encryption-customer-algorithm","x-amz-server-side-encryption-customer-key","x-amz-server-side-encryption-customer-key-MD5"],getBucket:function(e){var t;return qq.each([/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],(function(n,i){var r=i.exec(e);if(r)return t=r[1],!1})),t},_getPrefixedParamName:function(e){return qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,e)>=0?e:qq.s3.util.AWS_PARAM_PREFIX+e},getPolicy:function(e){var t={},n=[],i=e.bucket,r=e.date,o=e.clockDrift,s=e.key,a=e.accessKey,u=e.acl,c=e.type,l=e.expectedStatus,d=e.sessionToken,h=e.params,p=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),f=e.minFileSize,g=e.maxFileSize,m=e.reducedRedundancy,q=e.region,v=e.serverSideEncryption,y=e.signatureVersion;return t.expiration=qq.s3.util.getPolicyExpirationDate(r,o),n.push({acl:u}),n.push({bucket:i}),c&&n.push({"Content-Type":c}),l&&n.push({success_action_status:l.toString()}),p&&n.push({success_action_redirect:p}),m&&(n.push({}),n[n.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),d&&(n.push({}),n[n.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=d),v&&(n.push({}),n[n.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),2===y?n.push({key:s}):4===y&&(n.push({}),n[n.length-1][qq.s3.util.ALGORITHM_PARAM_NAME]=qq.s3.util.V4_ALGORITHM_PARAM_VALUE,n.push({}),n[n.length-1].key=s,n.push({}),n[n.length-1][qq.s3.util.CREDENTIAL_PARAM_NAME]=qq.s3.util.getV4CredentialsString({date:r,key:a,region:q}),n.push({}),n[n.length-1][qq.s3.util.DATE_PARAM_NAME]=qq.s3.util.getV4PolicyDate(r,o)),qq.each(h,(function(e,t){var i=qq.s3.util._getPrefixedParamName(e),r={};qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,i)>=0?r[i]=t:r[i]=encodeURIComponent(t),n.push(r)})),t.conditions=n,qq.s3.util.enforceSizeLimits(t,f,g),t},refreshPolicyCredentials:function(e,t){var n=!1;qq.each(e.conditions,(function(e,i){qq.each(i,(function(e,r){e===qq.s3.util.SESSION_TOKEN_PARAM_NAME&&(i[e]=t,n=!0)}))})),n||(e.conditions.push({}),e.conditions[e.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=t)},generateAwsParams:function(e,t){var n,i={},r=e.params,o=new qq.Promise,s=e.sessionToken,a=e.clockDrift,u=e.type,c=e.key,l=e.accessKey,d=e.acl,h=e.expectedStatus,p=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),f=e.reducedRedundancy,g=e.region,m=e.serverSideEncryption,q=e.signatureVersion,v=new Date,y=e.log;return e.date=v,n=qq.s3.util.getPolicy(e),i.key=c,u&&(i["Content-Type"]=u),h&&(i.success_action_status=h),p&&(i.success_action_redirect=p),f&&(i[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),m&&(i[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),s&&(i[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=s),i.acl=d,qq.each(r,(function(e,t){var n=qq.s3.util._getPrefixedParamName(e);qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,n)>=0?i[n]=t:i[n]=encodeURIComponent(t)})),2===q?i.AWSAccessKeyId=l:4===q&&(i[qq.s3.util.ALGORITHM_PARAM_NAME]=qq.s3.util.V4_ALGORITHM_PARAM_VALUE,i[qq.s3.util.CREDENTIAL_PARAM_NAME]=qq.s3.util.getV4CredentialsString({date:v,key:l,region:g}),i[qq.s3.util.DATE_PARAM_NAME]=qq.s3.util.getV4PolicyDate(v,a)),t(n).then((function(t,n,r){i.policy=t.policy,2===e.signatureVersion?(i.signature=t.signature,n&&(i.AWSAccessKeyId=n)):4===e.signatureVersion&&(i[qq.s3.util.V4_SIGNATURE_PARAM_NAME]=t.signature),r&&(i[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=r),o.success(i)}),(function(e){y("Policy signing failed.  "+(e=e||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server."),"error"),o.failure(e)})),o},enforceSizeLimits:function(e,t,n){var i=t<0?0:t,r=n<=0?9007199254740992:n;(t>0||n>0)&&e.conditions.push(["content-length-range",i.toString(),r.toString()])},getPolicyExpirationDate:function(e,t){var n=new Date(e.getTime()+t);return qq.s3.util.getPolicyDate(n,5)},getCredentialsDate:function(e){return e.getUTCFullYear()+""+("0"+(e.getUTCMonth()+1)).slice(-2)+("0"+e.getUTCDate()).slice(-2)},getPolicyDate:function(e,t){var n,i,r=t||0;return e.setMinutes(e.getMinutes()+(r||0)),Date.prototype.toISOString?e.toISOString():(n=function(e){return 1===(i=String(e)).length&&(i="0"+i),i},e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z")},parseIframeResponse:function(e){var t=(e.contentDocument||e.contentWindow.document).location.search,n=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(t);if(n)return{bucket:n[1],key:n[2],etag:n[3].replace(/%22/g,"")}},getSuccessRedirectAbsoluteUrl:function(e){if(e){var t,n=document.createElement("div");return qq.ie7()?(n.innerHTML="<a href='"+e+"'></a>",(t=n.firstChild).href):((t=document.createElement("a")).href=e,t.href=t.href,t.href)}},getV4CredentialsString:function(e){return e.key+"/"+qq.s3.util.getCredentialsDate(e.date)+"/"+e.region+"/s3/aws4_request"},getV4PolicyDate:function(e,t){var n=new Date(e.getTime()+t);return qq.s3.util.getCredentialsDate(n)+"T"+("0"+n.getUTCHours()).slice(-2)+("0"+n.getUTCMinutes()).slice(-2)+("0"+n.getUTCSeconds()).slice(-2)+"Z"},encodeQueryStringParam:function(e){var t=encodeURIComponent(e);return(t=(t=t.replace(/[!'()]/g,escape)).replace(/\*/g,"%2A")).replace(/%20/g,"+")},uriEscape:function(e){var t=encodeURIComponent(e);return(t=t.replace(/[^A-Za-z0-9_.~\-%]+/g,escape)).replace(/[*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},uriEscapePath:function(e){var t=[];return qq.each(e.split("/"),(function(e,n){t.push(qq.s3.util.uriEscape(n))})),t.join("/")}}}(),function(){"use strict";qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(e,t){this._uploadSuccessParamsStore.set(e,t)},setUploadSuccessEndpoint:function(e,t){this._uploadSuccessEndpointStore.set(e,t)}},qq.nonTraditionalBasePrivateApi={_onComplete:function(e,t,n,i){var r,o,s=!!n.success,a=this,u=arguments,c=this._uploadSuccessEndpointStore.get(e),l=this._options.uploadSuccess.customHeaders,d=this._options.uploadSuccess.method,h=this._options.cors,p=new qq.Promise,f=this._uploadSuccessParamsStore.get(e),g=this._paramsStore.get(e),m=function(t){delete a._failedSuccessRequestCallbacks[e],qq.extend(n,t),qq.FineUploaderBasic.prototype._onComplete.apply(a,u),p.success(t)},q=function(o){var s=r;qq.extend(n,o),n&&n.reset&&(s=null),s?a._failedSuccessRequestCallbacks[e]=s:delete a._failedSuccessRequestCallbacks[e],a._onAutoRetry(e,t,n,i,s)||(qq.FineUploaderBasic.prototype._onComplete.apply(a,u),p.failure(o))};return s&&c?(o=new qq.UploadSuccessAjaxRequester({endpoint:c,method:d,customHeaders:l,cors:h,log:qq.bind(this.log,this)}),qq.extend(f,a._getEndpointSpecificParams(e,n,i),!0),g&&qq.extend(f,g,!0),(r=qq.bind((function(){o.sendSuccessRequest(e,f).then(m,q)}),a))(),p):qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(e){var t=this._failedSuccessRequestCallbacks[e];return qq.FineUploaderBasic.prototype._manualRetry.call(this,e,t)}}}(),function(){"use strict";qq.s3.FineUploaderBasic=function(e){var t={request:{accessKey:null,clockDrift:0},objectProperties:{acl:"private",bucket:qq.bind((function(e){return qq.s3.util.getBucket(this.getEndpoint(e))}),this),host:qq.bind((function(e){return/(?:http|https):\/\/(.+)(?:\/.+)?/.exec(this._endpointStore.get(e))[1]}),this),key:"uuid",reducedRedundancy:!1,region:"us-east-1",serverSideEncryption:!1},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{customHeaders:{},endpoint:null,version:2},uploadSuccess:{endpoint:null,method:"POST",params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:!0},callbacks:{onCredentialsExpired:function(){}}};qq.extend(t,e,!0),this.setCredentials(t.credentials,!0)||(this._currentCredentials.accessKey=t.request.accessKey),this._aclStore=this._createStore(t.objectProperties.acl),qq.FineUploaderBasic.call(this,t),this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params),this._uploadSuccessEndpointStore=this._createStore(this._options.uploadSuccess.endpoint),this._failedSuccessRequestCallbacks={},this._cannedKeys={},this._cannedBuckets={},this._buckets={},this._hosts={}},qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,{getBucket:function(e){return null==this._cannedBuckets[e]?this._buckets[e]:this._cannedBuckets[e]},getKey:function(e){return null==this._cannedKeys[e]?this._handler.getThirdPartyFileId(e):this._cannedKeys[e]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this),this._failedSuccessRequestCallbacks=[],this._buckets={},this._hosts={}},setCredentials:function(e,t){if(e&&e.secretKey){if(!e.accessKey)throw new qq.Error("Invalid credentials: no accessKey");if(!e.expiration)throw new qq.Error("Invalid credentials: no expiration");return this._currentCredentials=qq.extend({},e),qq.isString(e.expiration)&&(this._currentCredentials.expiration=new Date(e.expiration)),!0}if(!t)throw new qq.Error("Invalid credentials parameter!");this._currentCredentials={}},setAcl:function(e,t){this._aclStore.set(e,t)},_createUploadHandler:function(){var e=this,t={aclStore:this._aclStore,getBucket:qq.bind(this._determineBucket,this),getHost:qq.bind(this._determineHost,this),getKeyName:qq.bind(this._determineKeyName,this),iframeSupport:this._options.iframeSupport,objectProperties:this._options.objectProperties,signature:this._options.signature,clockDrift:this._options.request.clockDrift,validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};return qq.override(this._endpointStore,(function(e){return{get:function(t){var n=e.get(t);return n.indexOf("http")<0?"http://"+n:n}}})),qq.override(this._paramsStore,(function(e){return{get:function(t){var n=e.get(t),i={};return qq.each(n,(function(e,t){var n=e;qq.indexOf(qq.s3.util.CASE_SENSITIVE_PARAM_NAMES,n)<0&&(n=n.toLowerCase()),i[n]=qq.isFunction(t)?t():t})),i}}})),t.signature.credentialsProvider={get:function(){return e._currentCredentials},onExpired:function(){var t=new qq.Promise,n=e._options.callbacks.onCredentialsExpired();return qq.isGenericPromise(n)?n.then((function(n){try{e.setCredentials(n),t.success()}catch(n){e.log("Invalid credentials returned from onCredentialsExpired callback! ("+n.message+")","error"),t.failure("onCredentialsExpired did not return valid credentials.")}}),(function(n){e.log("onCredentialsExpired callback indicated failure! ("+n+")","error"),t.failure("onCredentialsExpired callback failed.")})):(e.log("onCredentialsExpired callback did not return a promise!","error"),t.failure("Unexpected return value for onCredentialsExpired.")),t}},qq.FineUploaderBasic.prototype._createUploadHandler.call(this,t,"s3")},_determineObjectPropertyValue:function(e,t){var n=this._options.objectProperties[t],i=new qq.Promise,r=this;return qq.isFunction(n)?(n=n(e),qq.isGenericPromise(n)?i=n:i.success(n)):qq.isString(n)&&i.success(n),i.then((function(n){r["_"+t+"s"][e]=n}),(function(n){qq.log("Problem determining "+t+" for ID "+e+" ("+n+")","error")})),i},_determineBucket:function(e){return this._determineObjectPropertyValue(e,"bucket")},_determineHost:function(e){return this._determineObjectPropertyValue(e,"host")},_determineKeyName:function(e,t){var n=new qq.Promise,i=this._options.objectProperties.key,r=qq.getExtension(t),o=n.failure,s=function(e,t){var i=e;void 0!==t&&(i+="."+t),n.success(i)};switch(i){case"uuid":s(this.getUuid(e),r);break;case"filename":s(t);break;default:qq.isFunction(i)?this._handleKeynameFunction(i,e,s,o):(this.log(i+" is not a valid value for the s3.keyname option!","error"),o())}return n},_handleKeynameFunction:function(e,t,n,i){var r=this,o=function(e){n(e)},s=function(e){r.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",t,e||"null"),"error"),i(e)},a=e.call(this,t);qq.isGenericPromise(a)?a.then(o,s):null==a?s():o(a)},_getEndpointSpecificParams:function(e,t,n){var i={key:this.getKey(e),uuid:this.getUuid(e),name:this.getName(e),bucket:this.getBucket(e)};return n&&n.getResponseHeader("ETag")?i.etag=n.getResponseHeader("ETag"):t.etag&&(i.etag=t.etag),i},_onSubmitDelete:function(e,t){var n={key:this.getKey(e),bucket:this.getBucket(e)};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,t,n)},_addCannedFile:function(e){var t;if(null==e.s3Key)throw new qq.Error("Did not find s3Key property in server session response.  This is required!");return t=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments),this._cannedKeys[t]=e.s3Key,this._cannedBuckets[t]=e.s3Bucket,t}})}(),window.Uint8ClampedArray||(window.Uint8ClampedArray=function(){}),qq.s3.RequestSigner=function(e){"use strict";function t(e,t,n){var i,r,s,u=new qq.Promise,d="POST",h=[],p="",f=new Date,g=function(e){var n,o=[];return qq.each(e.headers,(function(e){h.push(e)})),h.sort(),qq.each(h,(function(t,i){qq.indexOf(qq.s3.util.UNSIGNABLE_REST_HEADER_NAMES,i)<0?p+=i.toLowerCase()+":"+e.headers[i].trim()+"\n":"Content-MD5"===i?n=e.headers[i]:o.unshift(t)})),qq.each(o,(function(e,t){h.splice(t,1)})),r={bucket:e.bucket,contentMd5:n,contentType:e.contentType,date:f,drift:a.signatureSpec.drift,endOfUrl:i,hashedContent:e.hashedContent,headerNames:h,headersStr:p,method:d},s=2===t?c.getStringToSign(r):l.getStringToSign(r),{date:f,endOfUrl:i,signedHeaders:4===t?l.getSignedHeaders(r.headerNames):null,toSign:4===t?s.hashed:s,toSignRaw:4===t?s.raw:s}};switch(n.type){case o.REQUEST_TYPE.MULTIPART_ABORT:d="DELETE",i=qq.format("uploadId={}",n.uploadId);break;case o.REQUEST_TYPE.MULTIPART_INITIATE:i="uploads";break;case o.REQUEST_TYPE.MULTIPART_COMPLETE:i=qq.format("uploadId={}",n.uploadId);break;case o.REQUEST_TYPE.MULTIPART_UPLOAD:d="PUT",i=qq.format("partNumber={}&uploadId={}",n.partNum,n.uploadId)}return i=n.key+"?"+i,4===t?l.getEncodedHashedPayload(n.content).then((function(e){n.headers["x-amz-content-sha256"]=e,n.headers.Host=n.host,n.headers["x-amz-date"]=qq.s3.util.getV4PolicyDate(f,a.signatureSpec.drift),n.hashedContent=e,u.success(g(n))}),(function(e){u.failure(e)})):u.success(g(n)),u}function n(e,t,n,i,r){var o;t.signatureConstructor?(r&&((o=t.signatureConstructor.getHeaders())[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=r,t.signatureConstructor.withHeaders(o)),t.signatureConstructor.getToSign(e).then((function(e){!function(e,t,n){4===a.signatureSpec.version?l.signApiRequest(e,t,n):c.signApiRequest(e,t,n)}(t.signatureConstructor,e.stringToSign,n)}),(function(e){n.failure(e)}))):(r&&qq.s3.util.refreshPolicyCredentials(t,r),function(e,t,n,i){4===a.signatureSpec.version?l.signPolicy(e,t,n,i):c.signPolicy(e,t,n,i)}(t,n,i,r))}var i,r,o=this,s={},a={expectingPolicy:!1,method:"POST",signatureSpec:{drift:0,credentialsProvider:{},endpoint:null,customHeaders:{},version:2},maxConnections:3,endpointStore:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(e,t){}},u=function(e,t,n){var i=e.getHeaders();4===a.signatureSpec.version?i.Authorization=qq.s3.util.V4_ALGORITHM_PARAM_VALUE+" Credential="+a.signatureSpec.credentialsProvider.get().accessKey+"/"+qq.s3.util.getCredentialsDate(e.getRequestDate())+"/"+a.signatureSpec.region+"/s3/aws4_request,SignedHeaders="+e.getSignedHeaders()+",Signature="+t:i.Authorization="AWS "+a.signatureSpec.credentialsProvider.get().accessKey+":"+t,n.success(i,e.getEndOfUrl())},c={getStringToSign:function(e){return qq.format("{}\n{}\n{}\n\n{}/{}/{}",e.method,e.contentMd5||"",e.contentType||"",e.headersStr||"\n",e.bucket,e.endOfUrl)},signApiRequest:function(e,t,n){var i=qq.CryptoJS.enc.Utf8.parse(t),o=qq.CryptoJS.HmacSHA1(i,r.get().secretKey),s=qq.CryptoJS.enc.Base64.stringify(o);u(e,s,n)},signPolicy:function(e,t,n,i){var o=JSON.stringify(e),s=qq.CryptoJS.enc.Utf8.parse(o),a=qq.CryptoJS.enc.Base64.stringify(s),u=qq.CryptoJS.HmacSHA1(a,r.get().secretKey),c=qq.CryptoJS.enc.Base64.stringify(u);t.success({policy:a,signature:c},n,i)}},l={getCanonicalQueryString:function(e){var t,n,i,r=e.indexOf("?"),o="";return r>=0&&(t={},i=e.substr(r+1).split("&"),qq.each(i,(function(e,n){var i=n.split("="),r=i[1];null==r&&(r=""),t[encodeURIComponent(i[0])]=encodeURIComponent(r)})),(n=Object.keys(t).sort()).forEach((function(e,i){o+=e+"="+t[e],i<n.length-1&&(o+="&")}))),o},getCanonicalRequest:function(e){return qq.format("{}\n{}\n{}\n{}\n{}\n{}",e.method,l.getCanonicalUri(e.endOfUrl),l.getCanonicalQueryString(e.endOfUrl),e.headersStr||"\n",l.getSignedHeaders(e.headerNames),e.hashedContent)},getCanonicalUri:function(e){var t=e,n=e.indexOf("?");return n>0&&(t=e.substr(0,n)),"/"+t},getEncodedHashedPayload:function(e){var t,n=new qq.Promise;return qq.isBlob(e)?((t=new FileReader).onloadend=function(e){if(e.target.readyState===FileReader.DONE)if(e.target.error)n.failure(e.target.error);else{var t=qq.CryptoJS.lib.WordArray.create(e.target.result);n.success(qq.CryptoJS.SHA256(t).toString())}},t.readAsArrayBuffer(e)):(e=e||"",n.success(qq.CryptoJS.SHA256(e).toString())),n},getScope:function(e,t){return qq.s3.util.getCredentialsDate(e)+"/"+t+"/s3/aws4_request"},getStringToSign:function(e){var t=l.getCanonicalRequest(e),n=qq.s3.util.getV4PolicyDate(e.date,e.drift),i=qq.CryptoJS.SHA256(t).toString(),r=l.getScope(e.date,a.signatureSpec.region),o="AWS4-HMAC-SHA256\n{}\n{}\n{}";return{hashed:qq.format(o,n,r,i),raw:qq.format(o,n,r,t)}},getSignedHeaders:function(e){var t="";return e.forEach((function(n,i){t+=n.toLowerCase(),i<e.length-1&&(t+=";")})),t},signApiRequest:function(e,t,n){var i,o,s,a,c=r.get().secretKey,l=/.+\n.+\n(\d+)\/(.+)\/s3\/.+\n(.+)/.exec(t);i=qq.CryptoJS.HmacSHA256(l[1],"AWS4"+c),o=qq.CryptoJS.HmacSHA256(l[2],i),s=qq.CryptoJS.HmacSHA256("s3",o),a=qq.CryptoJS.HmacSHA256("aws4_request",s),u(e,qq.CryptoJS.HmacSHA256(t,a),n)},signPolicy:function(e,t,n,i){var o,s,a,u,c,l=JSON.stringify(e),d=qq.CryptoJS.enc.Utf8.parse(l),h=qq.CryptoJS.enc.Base64.stringify(d),p=r.get().secretKey,f=function(){var t=null;return qq.each(e.conditions,(function(e,n){var i=n["x-amz-credential"];if(i)return t=i,!1})),t}();o=/.+\/(.+)\/(.+)\/s3\/aws4_request/.exec(f),s=qq.CryptoJS.HmacSHA256(o[1],"AWS4"+p),a=qq.CryptoJS.HmacSHA256(o[2],s),u=qq.CryptoJS.HmacSHA256("s3",a),c=qq.CryptoJS.HmacSHA256("aws4_request",u),t.success({policy:h,signature:qq.CryptoJS.HmacSHA256(h,c).toString()},n,i)}};qq.extend(a,e,!0),r=a.signatureSpec.credentialsProvider,i=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:a.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return a.signatureSpec.endpoint}},paramsStore:a.paramsStore,maxConnections:a.maxConnections,customHeaders:a.signatureSpec.customHeaders,log:a.log,onComplete:function(e,t,n){var i,r,o=t.responseText,c=s[e],l=c.promise,d=c.signatureConstructor;if(delete s[e],o)try{r=qq.parseJson(o)}catch(e){a.log("Error attempting to parse signature response: "+e,"error")}r&&r.error?(n=!0,i=r.error):r&&r.invalid?(n=!0,i="Invalid policy document or request headers!"):r?a.expectingPolicy&&!r.policy?(n=!0,i="Response does not include the base64 encoded policy!"):r.signature||(n=!0,i="Response does not include the signature!"):(n=!0,i="Received an empty or invalid response from the server!"),n?(i&&a.log(i,"error"),l.failure(i)):d?u(d,r.signature,l):l.success(r)},cors:a.cors})),qq.extend(this,{getSignature:function(e,t){var o,u=t,c=t.signatureConstructor,l=new qq.Promise;return 4===a.signatureSpec.version&&(o={v4:!0}),r.get().secretKey&&qq.CryptoJS?r.get().expiration.getTime()>Date.now()?n(e,t,l):r.onExpired().then((function(){n(e,t,l,r.get().accessKey,r.get().sessionToken)}),(function(e){a.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error"),l.failure("Unable to sign request - expired credentials.")})):(a.log("Submitting S3 signature request for "+e),c?c.getToSign(e).then((function(t){u={headers:t.stringToSignRaw},i.initTransport(e).withParams(u).withQueryParams(o).send()}),(function(e){a.log("Failed to construct signature. ","error"),l.failure("Failed to construct signature.")})):i.initTransport(e).withParams(u).withQueryParams(o).send(),s[e]={promise:l,signatureConstructor:c}),l},constructStringToSign:function(e,n,i,o){var s,u,c,l,d,h={};return{withHeaders:function(e){return h=e,this},withUploadId:function(e){return s=e,this},withContent:function(e){return u=e,this},withContentType:function(e){return c=e,this},withPartNum:function(e){return l=e,this},getToSign:function(p){var f=r.get().sessionToken,g=new qq.Promise,m=new Date(Date.now()+a.signatureSpec.drift);return h["x-amz-date"]=m.toUTCString(),f&&(h[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=f),t(0,a.signatureSpec.version,{bucket:n,content:u,contentType:c,headers:h,host:i,key:o,partNum:l,type:e,uploadId:s}).then((function(e){d=e,g.success({headers:(c&&(h["Content-Type"]=c),delete h.Host,h),date:d.date,endOfUrl:d.endOfUrl,signedHeaders:d.signedHeaders,stringToSign:d.toSign,stringToSignRaw:d.toSignRaw})}),(function(e){g.failure(e)})),g},getHeaders:function(){return qq.extend({},h)},getEndOfUrl:function(){return d&&d.endOfUrl},getRequestDate:function(){return d&&d.date},getSignedHeaders:function(){return d&&d.signedHeaders}}}})},qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"},qq.UploadSuccessAjaxRequester=function(e){"use strict";var t,n=[],i={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(e,t){}};qq.extend(i,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:i.method,endpointStore:{get:function(){return i.endpoint}},paramsStore:i.paramsStore,maxConnections:i.maxConnections,customHeaders:i.customHeaders,log:i.log,onComplete:function(e,t,r){var o,s=n[e],a=t.responseText,u={success:!0},c={success:!1};delete n[e],i.log(qq.format("Received the following response body to an upload success request for id {}: {}",e,a));try{o=qq.parseJson(a),r||o&&(o.error||!1===o.success)?(i.log("Upload success request was rejected by the server.","error"),s.failure(qq.extend(o,c))):(i.log("Upload success was acknowledged by the server."),s.success(qq.extend(o,u)))}catch(t){r?(i.log(qq.format("Your server indicated failure in its upload success request response for id {}!",e),"error"),s.failure(c)):(i.log("Upload success was acknowledged by the server."),s.success(u))}},cors:i.cors})),qq.extend(this,{sendSuccessRequest:function(e,r){var o=new qq.Promise;return i.log("Submitting upload success request/notification for "+e),t.initTransport(e).withParams(r).send(),n[e]=o,o}})},qq.s3.InitiateMultipartAjaxRequester=function(e){"use strict";var t,n,i={},r={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:!1,serverSideEncryption:!1,maxConnections:3,getContentType:function(e){},getBucket:function(e){},getHost:function(e){},getKey:function(e){},getName:function(e){},log:function(e,t){}};qq.extend(r,e),n=new qq.s3.RequestSigner({endpointStore:r.endpointStore,signatureSpec:r.signatureSpec,cors:r.cors,log:r.log}),t=qq.extend(this,new qq.AjaxRequester({method:r.method,contentType:null,endpointStore:r.endpointStore,maxConnections:r.maxConnections,allowXRequestedWithAndCacheControl:!1,log:r.log,onComplete:function(e,t,n){var o,s,a,u,c,l=i[e],d=(new DOMParser).parseFromString(t.responseText,"application/xml");delete i[e],n?(c=t.status,(s=d.getElementsByTagName("Message")).length>0&&(u=s[0].textContent)):(o=d.getElementsByTagName("UploadId")).length>0?a=o[0].textContent:u="Upload ID missing from request",void 0===a?(u?r.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",e,u),"error"):r.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",e,c),"error"),l.failure("Problem initiating upload request.",t)):(r.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",e,a)),l.success(a,t))},successfulResponseCodes:{POST:[200]}})),qq.extend(this,{send:function(e){var o=new qq.Promise;return function(e){var t,i=r.getBucket(e),o=r.getHost(e),s={},a=new qq.Promise,u=r.getKey(e);return s["x-amz-acl"]=r.aclStore.get(e),r.reducedRedundancy&&(s[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE),r.serverSideEncryption&&(s[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE),s[qq.s3.util.AWS_PARAM_PREFIX+r.filenameParam]=encodeURIComponent(r.getName(e)),qq.each(r.paramsStore.get(e),(function(e,t){qq.indexOf(qq.s3.util.UNPREFIXED_PARAM_NAMES,e)>=0?s[e]=t:s[qq.s3.util.AWS_PARAM_PREFIX+e]=encodeURIComponent(t)})),t=n.constructStringToSign(n.REQUEST_TYPE.MULTIPART_INITIATE,i,o,u).withContentType(r.getContentType(e)).withHeaders(s),n.getSignature(e,{signatureConstructor:t}).then(a.success,a.failure),a}(e).then((function(n,s){r.log("Submitting S3 initiate multipart upload request for "+e),i[e]=o,t.initTransport(e).withPath(s).withHeaders(n).send()}),o.failure),o}})},qq.s3.CompleteMultipartAjaxRequester=function(e){"use strict";function t(e,t,n){var r=new qq.Promise,s=o.getBucket(e),a=o.getHost(e),u=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_COMPLETE,s,a,o.getKey(e)).withUploadId(t).withContent(n).withContentType("application/xml; charset=UTF-8");return i.getSignature(e,{signatureConstructor:u}).then(r.success,r.failure),r}var n,i,r={},o={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(e){},getHost:function(e){},getKey:function(e){},log:function(e,t){}};qq.extend(o,e),i=new qq.s3.RequestSigner({endpointStore:o.endpointStore,signatureSpec:o.signatureSpec,cors:o.cors,log:o.log}),n=qq.extend(this,new qq.AjaxRequester({method:o.method,contentType:"application/xml; charset=UTF-8",endpointStore:o.endpointStore,maxConnections:o.maxConnections,allowXRequestedWithAndCacheControl:!1,log:o.log,onComplete:function(e,t,n){var i=r[e],s=new DOMParser,a=o.getBucket(e),u=(o.getKey(e),s.parseFromString(t.responseText,"application/xml")),c=u.getElementsByTagName("Bucket"),l=u.getElementsByTagName("Key");delete r[e],o.log(qq.format("Complete response status {}, body = {}",t.status,t.responseText)),n?o.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",e,t.status),"error"):c.length&&l.length?c[0].textContent!==a&&(n=!0,o.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",e),"error")):(n=!0,o.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",e),"error")),n?i.failure("Problem combining the file parts!",t):i.success({},t)},successfulResponseCodes:{POST:[200]}})),qq.extend(this,{send:function(e,i,s){var a=new qq.Promise,u=function(e){var t=document.implementation.createDocument(null,"CompleteMultipartUpload",null);return e.sort((function(e,t){return e.part-t.part})),qq.each(e,(function(e,n){var i=n.part,r=n.etag,o=t.createElement("Part"),s=t.createElement("PartNumber"),a=t.createTextNode(i),u=t.createTextNode(r),c=t.createElement("ETag");c.appendChild(u),s.appendChild(a),o.appendChild(s),o.appendChild(c),qq(t).children()[0].appendChild(o)})),(new XMLSerializer).serializeToString(t)}(s);return t(e,i,u).then((function(t,i){o.log("Submitting S3 complete multipart upload request for "+e),r[e]=a,delete t["Content-Type"],n.initTransport(e).withPath(i).withHeaders(t).withPayload(u).send()}),a.failure),a}})},qq.s3.AbortMultipartAjaxRequester=function(e){"use strict";var t,n,i={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(e){},getHost:function(e){},getKey:function(e){},log:function(e,t){}};qq.extend(i,e),n=new qq.s3.RequestSigner({endpointStore:i.endpointStore,signatureSpec:i.signatureSpec,cors:i.cors,log:i.log}),t=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:i.method,contentType:null,endpointStore:i.endpointStore,maxConnections:i.maxConnections,allowXRequestedWithAndCacheControl:!1,log:i.log,onComplete:function(e,t,n){var r,o=(new DOMParser).parseFromString(t.responseText,"application/xml"),s=o.getElementsByTagName("Error");i.log(qq.format("Abort response status {}, body = {}",t.status,t.responseText)),n?i.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",e,t.status),"error"):s.length?(n=!0,r=o.getElementsByTagName("Message")[0].textContent,i.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",e,r),"error")):i.log(qq.format("Abort MPU request succeeded for file ID {}.",e))},successfulResponseCodes:{DELETE:[204]}})),qq.extend(this,{send:function(e,r){(function(e,t){var r=new qq.Promise,o=i.getBucket(e),s=i.getHost(e),a=n.constructStringToSign(n.REQUEST_TYPE.MULTIPART_ABORT,o,s,i.getKey(e)).withUploadId(t);return n.getSignature(e,{signatureConstructor:a}).then(r.success,r.failure),r})(e,r).then((function(n,r){i.log("Submitting S3 Abort multipart upload request for "+e),t.initTransport(e).withPath(r).withHeaders(n).send()}))}})},qq.s3.XhrUploadHandler=function(e,t){"use strict";var n=t.getName,i=t.log,r=e.clockDrift,o=e.getBucket,s=e.getHost,a=e.getKeyName,u=e.filenameParam,c=e.paramsStore,l=e.endpointStore,d=e.aclStore,h=e.objectProperties.reducedRedundancy,p=e.objectProperties.region,f=e.objectProperties.serverSideEncryption,g=e.validation,m=qq.extend({region:p,drift:r},e.signature),q=this,v=e.signature.credentialsProvider,y={combine:function(e){var t=q._getPersistableData(e).uploadId,n=q._getPersistableData(e).etags,i=new qq.Promise;return b.completeMultipart.send(e,t,n).then(i.success,(function(t,n){i.failure(S.done(e,n).response,n)})),i},done:function(e,t,n){var i;S.response.parse(e,t).success&&(i=t.getResponseHeader("ETag"),q._getPersistableData(e).etags||(q._getPersistableData(e).etags=[]),q._getPersistableData(e).etags.push({part:n+1,etag:i}))},initHeaders:function(e,t,n){var i=S.bucket.getName(e),r=S.host.getName(e),o=S.key.urlSafe(e),s=new qq.Promise,a=b.restSignature.constructStringToSign(b.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,i,r,o).withPartNum(t+1).withContent(n).withUploadId(q._getPersistableData(e).uploadId);return b.restSignature.getSignature(e+"."+t,{signatureConstructor:a}).then(s.success,s.failure),s},put:function(t,n){var r=q._createXhr(t,n),o=q._getChunkData(t,n),s=e.endpointStore.get(t),a=new qq.Promise;return y.initHeaders(t,n,o.blob).then((function(e,u){if(r._cancelled)i(qq.format("Upload of item {}.{} cancelled. Upload will not start after successful signature request.",t,n)),a.failure({error:"Chunk upload cancelled"});else{var c=s+"/"+u;q._registerProgressHandler(t,n,o.size),S.track(t,r,n).then(a.success,a.failure),r.open("PUT",c,!0),qq.each(e,(function(e,t){r.setRequestHeader(e,t)})),r.send(o.blob)}}),(function(){a.failure({error:"Problem signing the chunk!"},r)})),a},send:function(e,t){var n=new qq.Promise;return y.setup(e).then((function(){y.put(e,t).then(n.success,n.failure)}),(function(e,t){n.failure({error:e},t)})),n},setup:function(e){var t=new qq.Promise,n=q._getPersistableData(e).uploadId,i=new qq.Promise;return n?n instanceof qq.Promise?n.then((function(e){t.success(e)})):t.success(n):(q._getPersistableData(e).uploadId=i,b.initiateMultipart.send(e).then((function(n){q._getPersistableData(e).uploadId=n,i.success(n),t.success(n)}),(function(n,r){q._getPersistableData(e).uploadId=null,t.failure(n,r),i.failure(n,r)}))),t}},b={abortMultipart:new qq.s3.AbortMultipartAjaxRequester({endpointStore:l,signatureSpec:m,cors:e.cors,log:i,getBucket:function(e){return S.bucket.getName(e)},getHost:function(e){return S.host.getName(e)},getKey:function(e){return S.key.urlSafe(e)}}),completeMultipart:new qq.s3.CompleteMultipartAjaxRequester({endpointStore:l,signatureSpec:m,cors:e.cors,log:i,getBucket:function(e){return S.bucket.getName(e)},getHost:function(e){return S.host.getName(e)},getKey:function(e){return S.key.urlSafe(e)}}),initiateMultipart:new qq.s3.InitiateMultipartAjaxRequester({filenameParam:u,endpointStore:l,paramsStore:c,signatureSpec:m,aclStore:d,reducedRedundancy:h,serverSideEncryption:f,cors:e.cors,log:i,getContentType:function(e){return q._getMimeType(e)},getBucket:function(e){return S.bucket.getName(e)},getHost:function(e){return S.host.getName(e)},getKey:function(e){return S.key.urlSafe(e)},getName:function(e){return n(e)}}),policySignature:new qq.s3.RequestSigner({expectingPolicy:!0,signatureSpec:m,cors:e.cors,log:i}),restSignature:new qq.s3.RequestSigner({endpointStore:l,signatureSpec:m,cors:e.cors,log:i})},_={initParams:function(e){var t=c.get(e);return t[u]=n(e),qq.s3.util.generateAwsParams({endpoint:l.get(e),clockDrift:r,params:t,type:q._getMimeType(e),bucket:S.bucket.getName(e),key:q.getThirdPartyFileId(e),accessKey:v.get().accessKey,sessionToken:v.get().sessionToken,acl:d.get(e),expectedStatus:200,minFileSize:g.minSizeLimit,maxFileSize:g.maxSizeLimit,reducedRedundancy:h,region:p,serverSideEncryption:f,signatureVersion:m.version,log:i},qq.bind(b.policySignature.getSignature,this,e))},send:function(e){var t=new qq.Promise,n=q._createXhr(e),r=q.getFile(e);return q._registerProgressHandler(e),S.track(e,n).then(t.success,t.failure),_.setup(e,n,r).then((function(t){i("Sending upload request for "+e),n.send(t)}),t.failure),t},setup:function(e,t,n){var i=new FormData,r=l.get(e),o=new qq.Promise;return _.initParams(e).then((function(e){t.open("POST",r,!0),qq.obj2FormData(e,i),i.append("file",n),o.success(i)}),(function(e){o.failure({error:e})})),o}},S={bucket:{promise:function(e){var t=new qq.Promise,n=q._getFileState(e).bucket;return n?t.success(n):o(e).then((function(n){q._getFileState(e).bucket=n,t.success(n)}),t.failure),t},getName:function(e){return q._getFileState(e).bucket}},host:{promise:function(e){var t=new qq.Promise,n=q._getFileState(e).host;return n?t.success(n):s(e).then((function(n){q._getFileState(e).host=n,t.success(n)}),t.failure),t},getName:function(e){return q._getFileState(e).host}},done:function(e,t){var n=S.response.parse(e,t),r=!0!==n.success;return r&&S.response.shouldReset(n.code)&&(i("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),n.reset=!0),{success:!r,response:n}},key:{promise:function(e){var t=new qq.Promise,i=q.getThirdPartyFileId(e);return null==i?(q._setThirdPartyFileId(e,t),a(e,n(e)).then((function(n){q._setThirdPartyFileId(e,n),t.success(n)}),(function(n){q._setThirdPartyFileId(e,null),t.failure(n)}))):qq.isGenericPromise(i)?i.then(t.success,t.failure):t.success(i),t},urlSafe:function(e){var t=q.getThirdPartyFileId(e);return qq.s3.util.uriEscapePath(t)}},response:{parse:function(e,t){var n,r={};try{i(qq.format("Received response status {} with body: {}",t.status,t.responseText)),200===t.status?r.success=!0:(n=S.response.parseError(t.responseText))&&(r.error=n.message,r.code=n.code)}catch(e){i("Error when attempting to parse xhr response text ("+e.message+")","error")}return r},parseError:function(e){var t,n,i=(new DOMParser).parseFromString(e,"application/xml"),r={};if(i.getElementsByTagName("Error").length)return t=i.getElementsByTagName("Code"),(n=i.getElementsByTagName("Message")).length&&(r.message=n[0].textContent),t.length&&(r.code=t[0].textContent),r},shouldReset:function(e){return"EntityTooSmall"===e||"InvalidPart"===e||"InvalidPartOrder"===e||"NoSuchUpload"===e}},start:function(e,t){var n=new qq.Promise;return S.key.promise(e).then((function(){S.bucket.promise(e).then((function(){S.host.promise(e).then((function(){null==t?_.send(e).then(n.success,n.failure):y.send(e,t).then(n.success,n.failure)}))}))}),(function(e){n.failure({error:e})})),n},track:function(e,t,n){var i=new qq.Promise;return t.onreadystatechange=function(){var r;4===t.readyState&&(null==n?(r=S.done(e,t),i[r.success?"success":"failure"](r.response,t)):(y.done(e,t,n),r=S.done(e,t),i[r.success?"success":"failure"](r.response,t)))},i}};qq.extend(this,{uploadChunk:S.start,uploadFile:S.start}),qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"s3"},e),proxy:qq.extend({getEndpoint:e.endpointStore.get},t)})),qq.override(this,(function(e){return{expunge:function(t){var n=q._getPersistableData(t)&&q._getPersistableData(t).uploadId,i=q._maybeDeletePersistedChunkData(t);void 0!==n&&i&&b.abortMultipart.send(t,n),e.expunge(t)},finalizeChunks:function(e){return y.combine(e)},_getLocalStorageId:function(t){return e._getLocalStorageId(t)+"-"+S.bucket.getName(t)}}}))},qq.s3.FormUploadHandler=function(e,t){"use strict";function n(t,n){var i,r=(e.endpointStore.get(t),a._getFileState(t).bucket);try{if((n.contentDocument||n.contentWindow.document).body.innerHTML,(i=qq.s3.util.parseIframeResponse(n)).bucket===r&&i.key===qq.s3.util.encodeQueryStringParam(a.getThirdPartyFileId(t)))return!0;h("Response from AWS included an unexpected bucket or key name.","error")}catch(e){h("Error when attempting to parse form upload response ("+e.message+")","error")}return!1}function i(e){var t=m.get(e);return t[g]=l(e),qq.s3.util.generateAwsParams({endpoint:q.get(e),clockDrift:u,params:t,bucket:a._getFileState(e).bucket,key:a.getThirdPartyFileId(e),accessKey:E.get().accessKey,sessionToken:E.get().sessionToken,acl:v.get(e),minFileSize:S.minSizeLimit,maxFileSize:S.maxSizeLimit,successRedirectUrl:x,reducedRedundancy:y,region:b,serverSideEncryption:_,signatureVersion:w.version,log:h},qq.bind(P.getSignature,this,e))}function r(t,n){var r=new qq.Promise,o=e.endpointStore.get(t);return l(t),i(t).then((function(e){var t=a._initFormForUpload({method:"POST",endpoint:o,params:e,paramsInBody:!0,targetName:n.name});r.success(t)}),(function(e){r.failure(e),s(t,n)})),r}function o(e){var t=a._createIframe(e),i=a.getInput(e),o=new qq.Promise;return r(e,t).then((function(r){r.appendChild(i),a._attachLoadEvent(t,(function(i){h("iframe loaded"),i?!1===i.success&&(h("Amazon likely rejected the upload request","error"),o.failure(i)):((i={}).success=n(e,t),!1===i.success?(h("A success response was received by Amazon, but it was invalid in some way.","error"),o.failure(i)):(qq.extend(i,qq.s3.util.parseIframeResponse(t)),o.success(i))),s(e,t)})),h("Sending upload request for "+e),r.submit(),qq(r).remove()}),o.failure),o}function s(e,t){a._detachLoadEvent(e),t&&qq(t).remove()}var a=this,u=e.clockDrift,c=t.onUuidChanged,l=t.getName,d=t.getUuid,h=t.log,p=e.getBucket,f=e.getKeyName,g=e.filenameParam,m=e.paramsStore,q=e.endpointStore,v=e.aclStore,y=e.objectProperties.reducedRedundancy,b=e.objectProperties.region,_=e.objectProperties.serverSideEncryption,S=e.validation,w=e.signature,x=e.iframeSupport.localBlankPagePath,E=e.signature.credentialsProvider,P=new qq.s3.RequestSigner({signatureSpec:w,cors:e.cors,log:h});if(void 0===x)throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");qq.extend(this,new qq.FormUploadHandler({options:{isCors:!1,inputName:"file"},proxy:{onCancel:e.onCancel,onUuidChanged:c,getName:l,getUuid:d,log:h}})),qq.extend(this,{uploadFile:function(e){var t=l(e),n=new qq.Promise;return a.getThirdPartyFileId(e)?a._getFileState(e).bucket?o(e).then(n.success,n.failure):p(e).then((function(t){a._getFileState(e).bucket=t,o(e).then(n.success,n.failure)})):f(e,t).then((function(t){p(e).then((function(i){a._getFileState(e).bucket=i,a._setThirdPartyFileId(e,t),o(e).then(n.success,n.failure)}),(function(e){n.failure({error:e})}))}),(function(e){n.failure({error:e})})),n}})}}(window)},95383:function(e,t,n){var i;!function(){var r=function(e){return new _(e)};r.version="0.6.5",e.exports?e.exports=r:void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i);var o=function(e,t){return new RegExp(e,t)},s=/<(\/)?(pre|code|kbd|script|math|title)[^>]*>/i,a=r.amp=function(e){var t=/(\s|&nbsp;)(&|&amp;|&\#38;)(\s|&nbsp;)/g;if(e||"string"==typeof e)return e.replace(/(<[^<]*>)?([^<]*)(<\/[^<]*>)?/g,(function(e,n,i,r){return r=r||"",(n=n||"").match(s)?n+i+r:n+(i=i.replace(t,'$1<span class="amp">&amp;</span>$3'))+r}))},u=r.ord=function(e){if(e||"string"==typeof e){var t,n=g(e),i=[],r=!1,o=/(\d+)(st|nd|rd|th)/g;return n.forEach((function(e){"tag"===e.type?(i.push(e.txt),t=s.exec(e.txt),r=!(!t||void 0!==t[1])):r?i.push(e.txt):i.push(e.txt.replace(o,'$1<span class="ord">$2</span>'))})),i.join("")}},c=r.initQuotes=function(e){var t=o("(?:(?:<(?:p|h[1-6]|li|dt|dd)[^>]*>|^)\\s*(?:<(?:a|em|span|strong|i|b)[^>]*>\\s*)*)(?:(\"|&ldquo;|&#8220;)|('|&lsquo;|&#8216;))","i");if(e||"string"==typeof e)return e.replace(t,(function(e,t,n){var i=t?"dquo":"quo",r=t||n;return[e.slice(0,e.lastIndexOf(r)),'<span class="',i,'">',r,"</span>"].join("")}))},l=r.widont=function(e){var t="a|em|span|strong|i|b",n="(?:<(?:"+t+")[^>]*?>)*?[^\\s<>]+(?:</(?:"+t+")[^>]*?>)*?",i=o("(\\s+"+n+"\\s+"+n+")(?:\\s+)([^<>\\s]+(?:\\s*</(?:a|em|span|strong|i|b)[^>]*?>\\s*\\.*)*?(?:\\s*?</(?:p|h[1-6]|li|dt|dd)>|$))","gi");return e.replace(i,"$1&nbsp;$2")},d=r.caps=function(e){var t,n=g(e),i=[],r=!1,a=o("((\\b[A-Z\\d]*[A-Z]\\d*[A-Z][A-Z\\d']*\\b)|(\\b[A-Z]+\\.\\s?(?:[A-Z]+\\.\\s?)+)(?:\\s|\\b|$))","g");return n.forEach((function(e){"tag"===e.type?(i.push(e.txt),t=s.exec(e.txt),r=!(!t||void 0!==t[1])):r?i.push(e.txt):i.push(e.txt.replace(a,(function(e,t,n,i){var r,o;return n?'<span class="caps">%s</span>'.replace("%s",n):(" "===i.slice(-1)?(r=i.slice(0,-1),o=" "):(r=i,o=""),'<span class="caps">%s1</span>%s2'.replace("%s1",r).replace("%s2",o))})))})),i.join("")};r.typogrify=function(e){var t=e;return e.jquery&&e.html&&(t=e.html()),t=a(t),t=l(t),t=f(t),t=d(t),t=c(t),u(t)};var h,p,f=r.smartypants=function(e){var t,n,i=g(e),r=[],o=[],a="",u="",c=!1,l="";return i.forEach((function(e){if("tag"===e.type)r.push(e.txt),null!==(u=s.exec(e.txt))&&(a=u[2].toLowerCase(),u[1]?(o.length>0&&a===o[o.length-1]&&o.pop(),0===o.length&&(c=!1)):(o.push(a),c=!0));else{if(n=e.txt,t=n.slice(-1),!c)switch(n=m(n),n=q(n),n=v(n),n=y(n)){case"'":n=/\S/.test(l)?"&#8217;":"&#8216;";break;case'"':n=/\S/.test(l)?"&#8221;":"&#8220;";break;default:n=b(n)}l=t,r.push(n)}})),r.join("")},g=r.tokenize=function(e){for(var t,n=[],i=0,r=/([^<]*)(<[^>]*>)/gi;null!==(t=r.exec(e));){var o=t[1],s=t[2];o&&n.push({type:"text",txt:o}),n.push({type:"tag",txt:s}),i=r.lastIndex}return r.lastIndex<=e.length&&("."==e.slice(-1)&&".."!=e.slice(-2)?(n.push({type:"text",txt:e.slice(i,e.length-1)}),n.push({type:"text",txt:e.slice(-1)})):n.push({type:"text",txt:e.slice(i)})),n},m=r.smartEscapes=function(e){return e.replace(/\\"/g,"&#34;").replace(/\\'/g,"&#39;").replace(/\\-/g,"&#45;").replace(/\\\./g,"&#46;").replace(/\\\\/g,"&#92;").replace(/\\`/g,"&#96;")},q=r.smartDashes=function(e){return e.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;")},v=r.smartEllipses=function(e){return e.replace(/\.\.\./g,"&#8230;").replace(/\. \. \./g,"&#8230;")},y=r.smartBackticks=function(e){return e.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;")},b=r.smartQuotes=function(e){var t="(?=%s\\B)".replace("%s","[!\"#\\$\\%\\'()*+,-.\\/:;<=>?\\@\\[\\\\]\\^_`{|}~]"),n="[^\\ \\t\\r\\n\\[\\{\\(\\-]",i="&#8211;|&#8212;",r=o("(\\s|&nbsp;|--|&[mn]dash;|"+i+"|&#x201[34];)'(?=\\w)","g"),s=o("("+n+")'(?!\\s | s\\b | \\d)","g"),a=o("("+n+")'(?!\\s | s\\b)","g"),u=o("(\\s|&nbsp;|--|&[mn]dash;|"+i+'|&#x201[34];)"(?=\\w)',"g"),c=o('"(?=\\s)',"g"),l=o("("+n+')"',"g");return e.replace(o("^'%s".replace("%s",t),"g"),"&#8217;").replace(o('^"%s'.replace("%s",t),"g"),"&#8221;").replace(/"'(?=\w)/g,"&#8220;&#8216;").replace(/'"(?=\w)/g,"&#8216;&#8220;").replace(/\b'(?=\d{2}s)/g,"&#8217;").replace(r,"$1&#8216;").replace(s,"$1&#8217;").replace(a,"$1&#8217;$2").replace("'","&#8217;").replace(u,"$1&#8220;").replace(c,"&#8221;").replace(l,"$1&#8221;").replace('"',"&#8220;")},_=function(e){this._wrapped=e},S=function(e,t){_.prototype[e]=function(){return e=t.call(r,this._wrapped),this._chain?r(e).chain():e;var e}};for(h in r)r.hasOwnProperty(h)&&(p=r[h])&&p.constructor&&p.call&&p.apply&&S(h,r[h]);_.prototype.chain=function(){return this._chain=!0,this},_.prototype.value=function(){return this._wrapped}}()},92659:function(e,t){(function(){"use strict";var e,n,i,r,o,s,a,u,c,l;(null!==t?t:window).wordfind=(i={horizontal:function(e,t,n,i,r){return i>=e+r},horizontalBack:function(e,t,n,i,r){return e+1>=r},vertical:function(e,t,n,i,r){return n>=t+r},verticalUp:function(e,t,n,i,r){return t+1>=r},diagonal:function(e,t,n,i,r){return i>=e+r&&n>=t+r},diagonalBack:function(e,t,n,i,r){return e+1>=r&&n>=t+r},diagonalUp:function(e,t,n,i,r){return i>=e+r&&t+1>=r},diagonalUpBack:function(e,t,n,i,r){return e+1>=r&&t+1>=r}},r={horizontal:function(e,t,n){return{x:0,y:t+1}},horizontalBack:function(e,t,n){return{x:n-1,y:t}},vertical:function(e,t,n){return{x:0,y:t+100}},verticalUp:function(e,t,n){return{x:0,y:n-1}},diagonal:function(e,t,n){return{x:0,y:t+1}},diagonalBack:function(e,t,n){return{x:n-1,y:e>=n-1?t+1:t}},diagonalUp:function(e,t,n){return{x:0,y:t<n-1?n-1:t+1}},diagonalUpBack:function(e,t,n){return{x:n-1,y:e>=n-1?t+1:t}}},o=function(e,t){var n,i,r,o=[];for(n=0;n<t.height;n++)for(o.push([]),i=0;i<t.width;i++)o[n].push("");for(n=0,r=e.length;n<r;n++)if(!s(o,t,e[n]))return null;return o},s=function(e,t,i){var r=a(e,t,i);if(0===r.length)return!1;var o=r[Math.floor(Math.random()*r.length)];return l(e,i,o.x,o.y,n[o.orientation]),!0},a=function(e,t,o){for(var s=[],a=t.height,l=t.width,d=o.length,h=0,p=0,f=t.orientations.length;p<f;p++)for(var g=t.orientations[p],m=i[g],q=n[g],v=r[g],y=0,b=0;b<a;)if(m(y,b,a,l,d)){var _=u(o,e,y,b,q);(_>=h||!t.preferOverlap&&_>-1)&&(h=_,s.push({x:y,y:b,orientation:g,overlap:_})),++y>=l&&(y=0,b++)}else{var S=v(y,b,d);y=S.x,b=S.y}return t.preferOverlap?c(s,h):s},u=function(e,t,n,i,r){for(var o=0,s=0,a=e.length;s<a;s++){var u=r(n,i,s),c=t[u.y][u.x];if(c===e[s])o++;else if(""!==c)return-1}return o},c=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++)e[i].overlap>=t&&n.push(e[i]);return n},l=function(e,t,n,i,r){for(var o=0,s=t.length;o<s;o++){var a=r(n,i,o);e[a.y][a.x]=t[o]}},{validOrientations:e=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],orientations:n={horizontal:function(e,t,n){return{x:e+n,y:t}},horizontalBack:function(e,t,n){return{x:e-n,y:t}},vertical:function(e,t,n){return{x:e,y:t+n}},verticalUp:function(e,t,n){return{x:e,y:t-n}},diagonal:function(e,t,n){return{x:e+n,y:t+n}},diagonalBack:function(e,t,n){return{x:e-n,y:t+n}},diagonalUp:function(e,t,n){return{x:e+n,y:t-n}},diagonalUpBack:function(e,t,n){return{x:e-n,y:t-n}}},newPuzzle:function(t,n){var i,r,s=0,a=n||{};i=t.slice(0).sort((function(e,t){return e.length<t.length?1:0}));for(var u={height:a.height||i[0].length,width:a.width||i[0].length,orientations:a.orientations||e,fillBlanks:void 0===a.fillBlanks||a.fillBlanks,maxAttempts:a.maxAttempts||3,preferOverlap:void 0===a.preferOverlap||a.preferOverlap};!r;){for(;!r&&s++<u.maxAttempts;)r=o(i,u);r||(u.height++,u.width++,s=0)}return u.fillBlanks&&this.fillBlanks(r,u),r},fillBlanks:function(e){for(var t=e.reduce((function(e,t){return e.concat(t)}),[]).filter((function(e,t,n){return n.indexOf(e)===t})).join(""),n=0,i=e.length;n<i;n++)for(var r=0,o=e[n].length;r<o;r++)if(!e[n][r]){var s=Math.floor(Math.random()*t.length);e[n][r]=t[s]}},solve:function(t,n){for(var i={height:t.length,width:t[0].length,orientations:e,preferOverlap:!0},r=[],o=[],s=0,u=n.length;s<u;s++){var c=n[s],l=a(t,i,c);l.length>0&&l[0].overlap===c.length?(l[0].word=c,r.push(l[0])):o.push(c)}return{found:r,notFound:o}},print:function(e){for(var t="",n=0,i=e.length;n<i;n++){for(var r=e[n],o=0,s=r.length;o<s;o++)t+=(""===r[o]?" ":r[o])+" ";t+="\n"}return console.log(t),t}})}).call(this)}},function(e){e.O(0,[158],(function(){return e(e.s=44394)})),e.O()}]);