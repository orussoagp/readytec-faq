"use strict";(self.webpackChunkthomas=self.webpackChunkthomas||[]).push([["28"],{55140:function(e,t,n){n(84537),n(19690)},19690:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(26691)._(n(72316)),a=!1;i.default.Events.listenTo(i.default.Events,"scorm:hide-slide-view",()=>{window.Application.actions().Sound.stopAll()}),i.default.Events.listenTo(i.default.Events,"scorm:narration-started",e=>{if(!a){var t=document.querySelector("#play-audio-popup");if(!t)return;document.querySelector("#play-audio-popup .btn-yes").addEventListener("click",()=>{a=!0,t.classList.remove("active"),i.default.Events.trigger("event:narration-started",e)}),t.classList.add("active");return}var n=e||{},o=n.audio_file,s=n.progress_on_completion,r=window.Application.actions().Sound;r.stopAll(),o&&r.play(o,{onProgress:e=>{i.default.Events.trigger("subscribe:narration-progressing",{progress:e})},onComplete:()=>{i.default.Events.trigger("event:narration-completed",{progress_on_completion:s})}})}),i.default.Events.listenTo(i.default.Events,"scorm:current-audio-src-changed",e=>{var t=(e||{}).currentSrc,n=window.Application.actions().Sound;n.stopAll(),t&&n.play(t,{onProgress:e=>{i.default.Events.trigger("subscribe:narration-progressing",{progress:e})},onComplete:()=>{i.default.Events.trigger("event:narration-completed",{})}})})},74566:function(e){var t={};t.UTILS={},t.debug={isActive:!0},t.SCORM={version:null,handleCompletionStatus:!0,handleExitMode:!0,API:{handle:null,isFound:!1},connection:{isActive:!1},data:{completionStatus:null,exitStatus:null},debug:{}},t.SCORM.isAvailable=function(){return!0},t.SCORM.API.find=function(e){for(var n=null,i=0,a="SCORM.API.find",o=t.UTILS.trace,s=t.SCORM;!e.API&&!e.API_1484_11&&e.parent&&e.parent!=e&&i<=500;)i++,e=e.parent;if(s.version)switch(s.version){case"2004":e.API_1484_11?n=e.API_1484_11:o(a+": SCORM version 2004 was specified by user, but API_1484_11 cannot be found.");break;case"1.2":e.API?n=e.API:o(a+": SCORM version 1.2 was specified by user, but API cannot be found.")}else e.API_1484_11?(s.version="2004",n=e.API_1484_11):e.API&&(s.version="1.2",n=e.API);return n?(o(a+": API found. Version: "+s.version),o("API: "+n)):o(a+": Error finding API. \nFind attempts: "+i+". \nFind attempt limit: 500"),n},t.SCORM.API.get=function(){var e=null,n=window,i=t.SCORM,a=i.API.find,o=t.UTILS.trace;return(e=a(n))||!n.parent||n.parent==n||(e=a(n.parent)),!e&&n.top&&n.top.opener&&(e=a(n.top.opener)),!e&&n.top&&n.top.opener&&n.top.opener.document&&(e=a(n.top.opener.document)),e?i.API.isFound=!0:o("API.get failed: Can't find the API!"),e},t.SCORM.API.getHandle=function(){var e=t.SCORM.API;return e.handle||e.isFound||(e.handle=e.get()),e.handle},t.SCORM.connection.initialize=function(e){e=e||{};var n=!1,i=t.SCORM,a=i.data.completionStatus,o=t.UTILS.trace,s=t.UTILS.StringToBoolean,r=i.debug,c="SCORM.connection.initialize ";if(e.preventLogoutOnExit&&(i.handleExitMode=!1),o("connection.initialize called."),i.connection.isActive)o(c+"aborted: Connection already active.");else{var l=i.API.getHandle(),d=0;if(l){switch(i.version){case"1.2":n=s(l.LMSInitialize(""));break;case"2004":n=s(l.Initialize(""))}if(n){if(null!==(d=r.getCode())&&0===d){if(i.connection.isActive=!0,i.handleCompletionStatus&&(a=i.status("get"))){switch(a){case"not attempted":case"unknown":i.status("set","incomplete")}i.save()}}else n=!1,o(c+"failed. \nError code: "+d+" \nError info: "+r.getInfo(d))}else o(null!==(d=r.getCode())&&0!==d?c+"failed. \nError code: "+d+" \nError info: "+r.getInfo(d):c+"failed: No response from server.")}else o(c+"failed: API is null.")}return n},t.SCORM.connection.terminate=function(){var e=!1,n=t.SCORM,i=n.data.exitStatus,a=n.data.completionStatus,o=t.UTILS.trace,s=t.UTILS.StringToBoolean,r=n.debug,c="SCORM.connection.terminate ";if(n.connection.isActive){var l=n.API.getHandle(),d=0;if(l){if(n.handleExitMode&&!i){if("completed"!==a&&"passed"!==a)switch(n.version){case"1.2":e=n.set("cmi.core.exit","suspend");break;case"2004":e=n.set("cmi.exit","suspend")}else switch(n.version){case"1.2":e=n.set("cmi.core.exit","logout");break;case"2004":e=n.set("cmi.exit","normal")}}if(e=n.save()){switch(n.version){case"1.2":e=s(l.LMSFinish(""));break;case"2004":e=s(l.Terminate(""))}e?n.connection.isActive=!1:o(c+"failed. \nError code: "+(d=r.getCode())+" \nError info: "+r.getInfo(d))}}else o(c+"failed: API is null.")}else o(c+"aborted: Connection already terminated.");return e},t.SCORM.data.get=function(e){var n=null,i=t.SCORM,a=t.UTILS.trace,o=i.debug,s="SCORM.data.get('"+e+"') ";if(i.connection.isActive){var r=i.API.getHandle(),c=0;if(r){switch(i.version){case"1.2":n=r.LMSGetValue(e);break;case"2004":n=r.GetValue(e)}if(c=o.getCode(),""!==n||0===c)switch(e){case"cmi.core.lesson_status":case"cmi.completion_status":i.data.completionStatus=n;break;case"cmi.core.exit":case"cmi.exit":i.data.exitStatus=n}else a(s+"failed. \nError code: "+c+"\nError info: "+o.getInfo(c))}else a(s+"failed: API is null.")}else a(s+"failed: API connection is inactive.");return a(s+" value: "+n),String(n)},t.SCORM.data.set=function(e,n){var i=!1,a=t.SCORM,o=t.UTILS.trace,s=t.UTILS.StringToBoolean,r=a.debug,c="SCORM.data.set('"+e+"') ";if(a.connection.isActive){var l=a.API.getHandle(),d=0;if(l){switch(a.version){case"1.2":i=s(l.LMSSetValue(e,n));break;case"2004":i=s(l.SetValue(e,n))}i?("cmi.core.lesson_status"===e||"cmi.completion_status"===e)&&(a.data.completionStatus=n):o(c+"failed. \nError code: "+(d=r.getCode())+". \nError info: "+r.getInfo(d))}else o(c+"failed: API is null.")}else o(c+"failed: API connection is inactive.");return o(c+" value: "+n),i},t.SCORM.data.save=function(){var e=!1,n=t.SCORM,i=t.UTILS.trace,a=t.UTILS.StringToBoolean,o="SCORM.data.save failed";if(n.connection.isActive){var s=n.API.getHandle();if(s)switch(n.version){case"1.2":e=a(s.LMSCommit(""));break;case"2004":e=a(s.Commit(""))}else i(o+": API is null.")}else i(o+": API connection is inactive.");return e},t.SCORM.status=function(e,n){var i=!1,a=t.SCORM,o=t.UTILS.trace,s="SCORM.getStatus failed",r="";if(null!==e){switch(a.version){case"1.2":r="cmi.core.lesson_status";break;case"2004":r="cmi.completion_status"}switch(e){case"get":i=a.data.get(r);break;case"set":null!==n?i=a.data.set(r,n):(i=!1,o(s+": status was not specified."));break;default:i=!1,o(s+": no valid action was specified.")}}else o(s+": action was not specified.");return i},t.SCORM.debug.getCode=function(){var e=t.SCORM,n=e.API.getHandle(),i=t.UTILS.trace,a=0;if(n)switch(e.version){case"1.2":a=parseInt(n.LMSGetLastError(),10);break;case"2004":a=parseInt(n.GetLastError(),10)}else i("SCORM.debug.getCode failed: API is null.");return a},t.SCORM.debug.getInfo=function(e){var n=t.SCORM,i=n.API.getHandle(),a=t.UTILS.trace,o="";if(i)switch(n.version){case"1.2":o=i.LMSGetErrorString(e.toString());break;case"2004":o=i.GetErrorString(e.toString())}else a("SCORM.debug.getInfo failed: API is null.");return String(o)},t.SCORM.debug.getDiagnosticInfo=function(e){var n=t.SCORM,i=n.API.getHandle(),a=t.UTILS.trace,o="";if(i)switch(n.version){case"1.2":o=i.LMSGetDiagnostic(e);break;case"2004":o=i.GetDiagnostic(e)}else a("SCORM.debug.getDiagnosticInfo failed: API is null.");return String(o)},t.SCORM.init=t.SCORM.connection.initialize,t.SCORM.get=t.SCORM.data.get,t.SCORM.set=t.SCORM.data.set,t.SCORM.save=t.SCORM.data.save,t.SCORM.quit=t.SCORM.connection.terminate,t.UTILS.StringToBoolean=function(e){switch(typeof e){case"object":case"string":return/(true|1)/i.test(e);case"number":return!!e;case"boolean":return e;case"undefined":return null;default:return!1}},t.UTILS.trace=function(e){t.debug.isActive&&window.console&&window.console.log&&window.console.log(e)},e.exports=t},84537:function(e,t,n){window.pipwerks=n(74566)}},function(e){e.O(0,["698"],function(){return e(e.s="55140")}),e.O()}]);
//# sourceMappingURL=scorm.2aa5f200ece6542d.js.map